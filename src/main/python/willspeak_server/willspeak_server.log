2025-03-04 11:41:35.516 | INFO     | willspeak_server.api.server:<module>:304 - Included router from endpoints.py
2025-03-04 11:41:35.516 | INFO     | willspeak_server.api.server:<module>:307 - Route: / - {'GET'}
2025-03-04 11:41:35.516 | INFO     | willspeak_server.api.server:<module>:307 - Route: /process-audio - {'POST'}
2025-03-04 11:41:35.516 | INFO     | willspeak_server.api.server:<module>:307 - Route: /debug/paths - {'GET'}
2025-03-04 11:41:35.516 | INFO     | willspeak_server.api.server:<module>:307 - Route: /user/create - {'POST'}
2025-03-04 11:41:35.516 | INFO     | willspeak_server.api.server:<module>:307 - Route: /user/list - {'GET'}
2025-03-04 11:41:35.516 | INFO     | willspeak_server.api.server:<module>:307 - Route: /user/{user_id} - {'GET'}
2025-03-04 11:41:35.516 | INFO     | willspeak_server.api.server:<module>:307 - Route: /user/{user_id}/update - {'POST'}
2025-03-04 11:41:35.516 | INFO     | willspeak_server.api.server:<module>:307 - Route: /training/start - {'POST'}
2025-03-04 11:41:35.516 | INFO     | willspeak_server.api.server:<module>:307 - Route: /training/{session_id}/upload - {'POST'}
2025-03-04 11:41:35.516 | INFO     | willspeak_server.api.server:<module>:307 - Route: /training/{session_id}/complete - {'POST'}
2025-03-04 11:41:35.516 | INFO     | willspeak_server.api.server:<module>:307 - Route: /process-audio-for-user - {'POST'}
2025-03-04 11:41:35.520 | INFO     | willspeak_server.ml.model_integration:initialize_models:65 - Initializing speech enhancement models
2025-03-04 11:41:35.520 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:65 - Initialized SpeechEnhancementModel for user: default
2025-03-04 11:41:35.520 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:147 - No pre-trained model found at C:\Users\jaxon\Documents\WillSpeak\src\main\python\willspeak_server\models\base_model
2025-03-04 11:41:35.520 | WARNING  | willspeak_server.ml.model_integration:initialize_models:72 - No pre-trained model found. Building new model.
2025-03-04 11:41:35.520 | INFO     | willspeak_server.ml.speech_enhancement_model:build_model:77 - Building model with input shape: (128, 128, 1)
2025-03-04 11:41:35.730 | INFO     | willspeak_server.ml.speech_enhancement_model:build_model:127 - Model built: None
2025-03-04 11:41:35.730 | INFO     | willspeak_server.ml.model_integration:initialize_models:75 - Speech enhancement models initialized
2025-03-04 11:41:39.791 | INFO     | willspeak_server.api.server:<module>:304 - Included router from endpoints.py
2025-03-04 11:41:39.791 | INFO     | willspeak_server.api.server:<module>:307 - Route: / - {'GET'}
2025-03-04 11:41:39.791 | INFO     | willspeak_server.api.server:<module>:307 - Route: /process-audio - {'POST'}
2025-03-04 11:41:39.791 | INFO     | willspeak_server.api.server:<module>:307 - Route: /debug/paths - {'GET'}
2025-03-04 11:41:39.791 | INFO     | willspeak_server.api.server:<module>:307 - Route: /user/create - {'POST'}
2025-03-04 11:41:39.791 | INFO     | willspeak_server.api.server:<module>:307 - Route: /user/list - {'GET'}
2025-03-04 11:41:39.791 | INFO     | willspeak_server.api.server:<module>:307 - Route: /user/{user_id} - {'GET'}
2025-03-04 11:41:39.791 | INFO     | willspeak_server.api.server:<module>:307 - Route: /user/{user_id}/update - {'POST'}
2025-03-04 11:41:39.791 | INFO     | willspeak_server.api.server:<module>:307 - Route: /training/start - {'POST'}
2025-03-04 11:41:39.791 | INFO     | willspeak_server.api.server:<module>:307 - Route: /training/{session_id}/upload - {'POST'}
2025-03-04 11:41:39.791 | INFO     | willspeak_server.api.server:<module>:307 - Route: /training/{session_id}/complete - {'POST'}
2025-03-04 11:41:39.793 | INFO     | willspeak_server.api.server:<module>:307 - Route: /process-audio-for-user - {'POST'}
2025-03-04 11:42:39.752 | INFO     | willspeak_server.api.endpoints:create_user:92 - Created user profile: GETTT (8d94f369-e7d3-4a6a-ab98-c566d039aa57)
2025-03-04 11:45:38.309 | INFO     | willspeak_server.api.endpoints:start_training_session:196 - Started training session 41484bcc-c241-4bd5-a8cd-0f011d739061 for user 8d94f369-e7d3-4a6a-ab98-c566d039aa57
2025-03-04 11:45:45.212 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample 6c5a261f-5d1d-4c89-a469-3a908b09ff3f for session 41484bcc-c241-4bd5-a8cd-0f011d739061
2025-03-04 11:45:48.854 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample b501d349-b8e5-4b70-b1b4-a7dd9c53eb0c for session 41484bcc-c241-4bd5-a8cd-0f011d739061
2025-03-04 11:45:52.163 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample 21558174-9cf8-4ff1-83ce-3fab2bff17c6 for session 41484bcc-c241-4bd5-a8cd-0f011d739061
2025-03-04 11:45:56.161 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample 8ad34c63-3287-49bf-9656-c2394e8c77d0 for session 41484bcc-c241-4bd5-a8cd-0f011d739061
2025-03-04 11:45:59.515 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample 5bbe25b3-b235-466f-9390-bf92432d5018 for session 41484bcc-c241-4bd5-a8cd-0f011d739061
2025-03-04 11:46:03.415 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample 13223054-82ec-478b-a520-f54cb9df3445 for session 41484bcc-c241-4bd5-a8cd-0f011d739061
2025-03-04 11:46:06.859 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample 07aa6c6f-eaf6-4ccb-a07d-ec2065b3e2ec for session 41484bcc-c241-4bd5-a8cd-0f011d739061
2025-03-04 11:46:10.202 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample 48bc136f-bde6-4f4b-9e77-e7ff3e8fcf32 for session 41484bcc-c241-4bd5-a8cd-0f011d739061
2025-03-04 11:46:15.653 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample b80404f2-3c2b-4b69-a1c5-ad017ba215b7 for session 41484bcc-c241-4bd5-a8cd-0f011d739061
2025-03-04 11:46:20.232 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample 114be6b5-88df-4217-8d7d-57759f984842 for session 41484bcc-c241-4bd5-a8cd-0f011d739061
2025-03-04 11:46:20.238 | INFO     | willspeak_server.api.endpoints:complete_training_session:303 - Completed training session 41484bcc-c241-4bd5-a8cd-0f011d739061 for user 8d94f369-e7d3-4a6a-ab98-c566d039aa57, training started in background
2025-03-04 11:46:20.238 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:65 - Initialized SpeechEnhancementModel for user: 8d94f369-e7d3-4a6a-ab98-c566d039aa57
2025-03-04 11:46:20.238 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:147 - No pre-trained model found at C:\Users\jaxon\Documents\WillSpeak\src\main\python\willspeak_server\models\user_8d94f369-e7d3-4a6a-ab98-c566d039aa57_model
2025-03-04 11:46:20.240 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:65 - Initialized SpeechEnhancementModel for user: default
2025-03-04 11:46:20.240 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:147 - No pre-trained model found at C:\Users\jaxon\Documents\WillSpeak\src\main\python\willspeak_server\models\base_model
2025-03-04 11:46:20.240 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:403 - Processing training pair 1/10
2025-03-04 11:47:26.986 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:403 - Processing training pair 2/10
2025-03-04 11:47:26.995 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:403 - Processing training pair 3/10
2025-03-04 11:47:27.000 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:403 - Processing training pair 4/10
2025-03-04 11:47:27.007 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:403 - Processing training pair 5/10
2025-03-04 11:47:27.014 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:403 - Processing training pair 6/10
2025-03-04 11:47:27.021 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:403 - Processing training pair 7/10
2025-03-04 11:47:27.027 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:403 - Processing training pair 8/10
2025-03-04 11:47:27.032 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:403 - Processing training pair 9/10
2025-03-04 11:47:27.041 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:403 - Processing training pair 10/10
2025-03-04 11:47:27.048 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:439 - Prepared training data: (10, 128, 128, 1), (10, 128, 128, 1)
2025-03-04 11:47:27.048 | INFO     | willspeak_server.ml.model_integration:train_model:130 - Training model for user: 8d94f369-e7d3-4a6a-ab98-c566d039aa57
2025-03-04 11:47:27.048 | INFO     | willspeak_server.ml.speech_enhancement_model:build_model:77 - Building model with input shape: (128, 128, 1)
2025-03-04 11:47:27.236 | INFO     | willspeak_server.ml.speech_enhancement_model:build_model:127 - Model built: None
2025-03-04 11:47:27.236 | INFO     | willspeak_server.ml.speech_enhancement_model:train:353 - Starting training with 50 epochs, batch size 32
2025-03-04 11:48:01.151 | ERROR    | willspeak_server.ml.speech_enhancement_model:save_model:179 - Error saving model: Invalid filepath extension for saving. Please add either a `.keras` extension for the native Keras format (recommended) or a `.h5` extension. Use `model.export(filepath)` if you want to export a SavedModel for use with TFLite/TFServing/etc. Received: filepath=C:\Users\jaxon\Documents\WillSpeak\src\main\python\willspeak_server\models\user_default_model.
2025-03-04 11:48:01.151 | INFO     | willspeak_server.ml.speech_enhancement_model:train:381 - Training completed. Loss: 0.0067, MAE: 0.0672
2025-03-04 11:48:01.154 | ERROR    | willspeak_server.ml.speech_enhancement_model:save_model:179 - Error saving model: Invalid filepath extension for saving. Please add either a `.keras` extension for the native Keras format (recommended) or a `.h5` extension. Use `model.export(filepath)` if you want to export a SavedModel for use with TFLite/TFServing/etc. Received: filepath=C:\Users\jaxon\Documents\WillSpeak\src\main\python\willspeak_server\models\user_default_model.
2025-03-04 11:48:01.154 | INFO     | willspeak_server.ml.model_integration:train_model:149 - Training completed for user 8d94f369-e7d3-4a6a-ab98-c566d039aa57
2025-03-04 11:48:01.155 | INFO     | willspeak_server.api.endpoints:_train_model_background:337 - Model training completed for user 8d94f369-e7d3-4a6a-ab98-c566d039aa57
2025-03-04 11:48:13.151 | INFO     | willspeak_server.api.server:process_audio_generic:210 - Processing audio file: audio.wav for user: 8d94f369-e7d3-4a6a-ab98-c566d039aa57
2025-03-04 11:48:13.151 | ERROR    | willspeak_server.api.server:process_audio_generic:242 - Error processing audio: Error opening <_io.BytesIO object at 0x0000013EDE083330>: Format not recognised.
2025-03-04 11:50:42.435 | INFO     | willspeak_server.api.server:<module>:318 - Included router from endpoints.py
2025-03-04 11:50:42.436 | INFO     | willspeak_server.api.server:<module>:321 - Route: / - {'GET'}
2025-03-04 11:50:42.436 | INFO     | willspeak_server.api.server:<module>:321 - Route: /process-audio - {'POST'}
2025-03-04 11:50:42.436 | INFO     | willspeak_server.api.server:<module>:321 - Route: /debug/paths - {'GET'}
2025-03-04 11:50:42.436 | INFO     | willspeak_server.api.server:<module>:321 - Route: /user/create - {'POST'}
2025-03-04 11:50:42.436 | INFO     | willspeak_server.api.server:<module>:321 - Route: /user/list - {'GET'}
2025-03-04 11:50:42.436 | INFO     | willspeak_server.api.server:<module>:321 - Route: /user/{user_id} - {'GET'}
2025-03-04 11:50:42.436 | INFO     | willspeak_server.api.server:<module>:321 - Route: /user/{user_id}/update - {'POST'}
2025-03-04 11:50:42.436 | INFO     | willspeak_server.api.server:<module>:321 - Route: /training/start - {'POST'}
2025-03-04 11:50:42.436 | INFO     | willspeak_server.api.server:<module>:321 - Route: /training/{session_id}/upload - {'POST'}
2025-03-04 11:50:42.436 | INFO     | willspeak_server.api.server:<module>:321 - Route: /training/{session_id}/complete - {'POST'}
2025-03-04 11:50:42.436 | INFO     | willspeak_server.api.server:<module>:321 - Route: /process-audio-for-user - {'POST'}
2025-03-04 11:51:06.880 | INFO     | willspeak_server.api.server:<module>:318 - Included router from endpoints.py
2025-03-04 11:51:06.882 | INFO     | willspeak_server.api.server:<module>:321 - Route: / - {'GET'}
2025-03-04 11:51:06.882 | INFO     | willspeak_server.api.server:<module>:321 - Route: /process-audio - {'POST'}
2025-03-04 11:51:06.882 | INFO     | willspeak_server.api.server:<module>:321 - Route: /debug/paths - {'GET'}
2025-03-04 11:51:06.882 | INFO     | willspeak_server.api.server:<module>:321 - Route: /user/create - {'POST'}
2025-03-04 11:51:06.882 | INFO     | willspeak_server.api.server:<module>:321 - Route: /user/list - {'GET'}
2025-03-04 11:51:06.882 | INFO     | willspeak_server.api.server:<module>:321 - Route: /user/{user_id} - {'GET'}
2025-03-04 11:51:06.882 | INFO     | willspeak_server.api.server:<module>:321 - Route: /user/{user_id}/update - {'POST'}
2025-03-04 11:51:06.882 | INFO     | willspeak_server.api.server:<module>:321 - Route: /training/start - {'POST'}
2025-03-04 11:51:06.882 | INFO     | willspeak_server.api.server:<module>:321 - Route: /training/{session_id}/upload - {'POST'}
2025-03-04 11:51:06.882 | INFO     | willspeak_server.api.server:<module>:321 - Route: /training/{session_id}/complete - {'POST'}
2025-03-04 11:51:06.882 | INFO     | willspeak_server.api.server:<module>:321 - Route: /process-audio-for-user - {'POST'}
2025-03-04 11:51:06.886 | INFO     | willspeak_server.ml.model_integration:initialize_models:65 - Initializing speech enhancement models
2025-03-04 11:51:06.886 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:65 - Initialized SpeechEnhancementModel for user: default
2025-03-04 11:51:06.886 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:164 - No pre-trained model found
2025-03-04 11:51:06.886 | WARNING  | willspeak_server.ml.model_integration:initialize_models:72 - No pre-trained model found. Building new model.
2025-03-04 11:51:06.886 | INFO     | willspeak_server.ml.speech_enhancement_model:build_model:77 - Building model with input shape: (128, 128, 1)
2025-03-04 11:51:07.035 | INFO     | willspeak_server.ml.speech_enhancement_model:build_model:127 - Model built: None
2025-03-04 11:51:07.035 | INFO     | willspeak_server.ml.model_integration:initialize_models:75 - Speech enhancement models initialized
2025-03-04 11:51:11.739 | INFO     | willspeak_server.api.server:<module>:318 - Included router from endpoints.py
2025-03-04 11:51:11.739 | INFO     | willspeak_server.api.server:<module>:321 - Route: / - {'GET'}
2025-03-04 11:51:11.739 | INFO     | willspeak_server.api.server:<module>:321 - Route: /process-audio - {'POST'}
2025-03-04 11:51:11.739 | INFO     | willspeak_server.api.server:<module>:321 - Route: /debug/paths - {'GET'}
2025-03-04 11:51:11.739 | INFO     | willspeak_server.api.server:<module>:321 - Route: /user/create - {'POST'}
2025-03-04 11:51:11.739 | INFO     | willspeak_server.api.server:<module>:321 - Route: /user/list - {'GET'}
2025-03-04 11:51:11.739 | INFO     | willspeak_server.api.server:<module>:321 - Route: /user/{user_id} - {'GET'}
2025-03-04 11:51:11.739 | INFO     | willspeak_server.api.server:<module>:321 - Route: /user/{user_id}/update - {'POST'}
2025-03-04 11:51:11.741 | INFO     | willspeak_server.api.server:<module>:321 - Route: /training/start - {'POST'}
2025-03-04 11:51:11.741 | INFO     | willspeak_server.api.server:<module>:321 - Route: /training/{session_id}/upload - {'POST'}
2025-03-04 11:51:11.741 | INFO     | willspeak_server.api.server:<module>:321 - Route: /training/{session_id}/complete - {'POST'}
2025-03-04 11:51:11.741 | INFO     | willspeak_server.api.server:<module>:321 - Route: /process-audio-for-user - {'POST'}
2025-03-04 11:51:18.949 | INFO     | willspeak_server.api.endpoints:create_user:92 - Created user profile: TESS (8fa1972c-a8f1-47e7-a8f6-bbbff06fa063)
2025-03-04 11:51:25.878 | INFO     | willspeak_server.api.endpoints:start_training_session:196 - Started training session f52402f8-0b5a-497b-bde9-1207faef0378 for user 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 11:51:29.395 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample 2bd3cb6f-de5a-4079-932b-1989abe8219a for session f52402f8-0b5a-497b-bde9-1207faef0378
2025-03-04 11:51:31.739 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample 7670546f-37d8-4262-aec0-3bddb7430a47 for session f52402f8-0b5a-497b-bde9-1207faef0378
2025-03-04 11:51:34.315 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample 85048a76-d3b5-406f-9956-39be52dd1403 for session f52402f8-0b5a-497b-bde9-1207faef0378
2025-03-04 11:51:36.725 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample ce2709a4-7c09-4dc4-895a-81143e8b01c1 for session f52402f8-0b5a-497b-bde9-1207faef0378
2025-03-04 11:51:39.029 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample 0586e187-f42e-41c7-bdab-bc7c225d034f for session f52402f8-0b5a-497b-bde9-1207faef0378
2025-03-04 11:51:41.236 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample 7ba14b68-63c0-45f8-85a1-807d8743c080 for session f52402f8-0b5a-497b-bde9-1207faef0378
2025-03-04 11:51:43.558 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample 019717fc-e832-458c-bf86-e5c64a970633 for session f52402f8-0b5a-497b-bde9-1207faef0378
2025-03-04 11:51:46.261 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample 92b46d0a-5634-4a67-862a-3bbff62aadc9 for session f52402f8-0b5a-497b-bde9-1207faef0378
2025-03-04 11:51:50.166 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample 5f60775d-d4c3-42c5-a126-cd55d71dbb97 for session f52402f8-0b5a-497b-bde9-1207faef0378
2025-03-04 11:51:54.806 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample f7c8f4ae-629f-44d6-8df3-97e9dd2fa5f0 for session f52402f8-0b5a-497b-bde9-1207faef0378
2025-03-04 11:51:54.811 | INFO     | willspeak_server.api.endpoints:complete_training_session:303 - Completed training session f52402f8-0b5a-497b-bde9-1207faef0378 for user 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063, training started in background
2025-03-04 11:51:54.813 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:65 - Initialized SpeechEnhancementModel for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 11:51:54.813 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:164 - No pre-trained model found
2025-03-04 11:51:54.814 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:65 - Initialized SpeechEnhancementModel for user: default
2025-03-04 11:51:54.814 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:164 - No pre-trained model found
2025-03-04 11:51:54.814 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:416 - Processing training pair 1/10
2025-03-04 11:51:58.054 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:416 - Processing training pair 2/10
2025-03-04 11:51:58.061 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:416 - Processing training pair 3/10
2025-03-04 11:51:58.066 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:416 - Processing training pair 4/10
2025-03-04 11:51:58.071 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:416 - Processing training pair 5/10
2025-03-04 11:51:58.078 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:416 - Processing training pair 6/10
2025-03-04 11:51:58.083 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:416 - Processing training pair 7/10
2025-03-04 11:51:58.088 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:416 - Processing training pair 8/10
2025-03-04 11:51:58.094 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:416 - Processing training pair 9/10
2025-03-04 11:51:58.102 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:416 - Processing training pair 10/10
2025-03-04 11:51:58.110 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:452 - Prepared training data: (10, 128, 128, 1), (10, 128, 128, 1)
2025-03-04 11:51:58.110 | INFO     | willspeak_server.ml.model_integration:train_model:130 - Training model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 11:51:58.110 | INFO     | willspeak_server.ml.speech_enhancement_model:build_model:77 - Building model with input shape: (128, 128, 1)
2025-03-04 11:51:58.264 | INFO     | willspeak_server.ml.speech_enhancement_model:build_model:127 - Model built: None
2025-03-04 11:51:58.264 | INFO     | willspeak_server.ml.speech_enhancement_model:train:366 - Starting training with 50 epochs, batch size 32
2025-03-04 11:52:31.145 | INFO     | willspeak_server.ml.speech_enhancement_model:save_model:189 - Saved model to C:\Users\jaxon\Documents\WillSpeak\src\main\python\willspeak_server\models\user_default_model.keras
2025-03-04 11:52:31.146 | INFO     | willspeak_server.ml.speech_enhancement_model:train:394 - Training completed. Loss: 0.0080, MAE: 0.0720
2025-03-04 11:52:31.302 | INFO     | willspeak_server.ml.speech_enhancement_model:save_model:189 - Saved model to C:\Users\jaxon\Documents\WillSpeak\src\main\python\willspeak_server\models\user_default_model.keras
2025-03-04 11:52:31.302 | INFO     | willspeak_server.ml.model_integration:train_model:149 - Training completed for user 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 11:52:31.305 | INFO     | willspeak_server.api.endpoints:_train_model_background:337 - Model training completed for user 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 11:52:56.282 | INFO     | willspeak_server.api.server:process_audio_generic:211 - Processing audio file: audio.wav for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 11:52:56.285 | ERROR    | willspeak_server.api.server:process_audio_generic:256 - Error processing audio: Error opening 'C:\\Users\\jaxon\\AppData\\Local\\Temp\\willspeak_temp_4de93e15-8eb3-49b7-96fe-161def708fd3.wav': Format not recognised.
2025-03-04 11:59:27.952 | INFO     | willspeak_server.api.server:<module>:75 - Created directory at C:\Users\jaxon\Documents\WillSpeak\src\main\python\logs
2025-03-04 11:59:27.953 | INFO     | willspeak_server.api.server:<module>:75 - Created directory at C:\Users\jaxon\AppData\Local\Temp\willspeak
2025-03-04 11:59:28.013 | INFO     | willspeak_server.api.server:<module>:790 - Included router from endpoints.py
2025-03-04 11:59:28.013 | INFO     | willspeak_server.api.server:<module>:795 - Route: / - {'GET'}
2025-03-04 11:59:28.013 | INFO     | willspeak_server.api.server:<module>:795 - Route: /process-audio - {'POST'}
2025-03-04 11:59:28.014 | INFO     | willspeak_server.api.server:<module>:795 - Route: /process-audio-for-user - {'POST'}
2025-03-04 11:59:28.014 | INFO     | willspeak_server.api.server:<module>:795 - Route: /debug/audio-test - {'GET'}
2025-03-04 11:59:28.014 | INFO     | willspeak_server.api.server:<module>:795 - Route: /debug/paths - {'GET'}
2025-03-04 11:59:28.014 | INFO     | willspeak_server.api.server:<module>:795 - Route: /user/create - {'POST'}
2025-03-04 11:59:28.014 | INFO     | willspeak_server.api.server:<module>:795 - Route: /user/list - {'GET'}
2025-03-04 11:59:28.014 | INFO     | willspeak_server.api.server:<module>:795 - Route: /user/{user_id} - {'GET'}
2025-03-04 11:59:28.014 | INFO     | willspeak_server.api.server:<module>:795 - Route: /user/{user_id}/update - {'POST'}
2025-03-04 11:59:28.014 | INFO     | willspeak_server.api.server:<module>:795 - Route: /training/start - {'POST'}
2025-03-04 11:59:28.014 | INFO     | willspeak_server.api.server:<module>:795 - Route: /training/{session_id}/upload - {'POST'}
2025-03-04 11:59:28.014 | INFO     | willspeak_server.api.server:<module>:795 - Route: /training/{session_id}/complete - {'POST'}
2025-03-04 11:59:28.014 | INFO     | willspeak_server.api.server:<module>:795 - Route: /process-audio-for-user - {'POST'}
2025-03-04 11:59:28.073 | INFO     | willspeak_server.ml.model_integration:initialize_models:65 - Initializing speech enhancement models
2025-03-04 11:59:28.074 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:65 - Initialized SpeechEnhancementModel for user: default
2025-03-04 11:59:28.074 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:164 - No pre-trained model found
2025-03-04 11:59:28.074 | WARNING  | willspeak_server.ml.model_integration:initialize_models:72 - No pre-trained model found. Building new model.
2025-03-04 11:59:28.074 | INFO     | willspeak_server.ml.speech_enhancement_model:build_model:77 - Building model with input shape: (128, 128, 1)
2025-03-04 11:59:28.288 | INFO     | willspeak_server.ml.speech_enhancement_model:build_model:127 - Model built: None
2025-03-04 11:59:28.288 | INFO     | willspeak_server.ml.model_integration:initialize_models:75 - Speech enhancement models initialized
2025-03-04 11:59:28.288 | INFO     | willspeak_server.api.server:startup_event:821 - Models initialized on startup
2025-03-04 11:59:38.095 | INFO     | willspeak_server.api.server:<module>:790 - Included router from endpoints.py
2025-03-04 11:59:38.095 | INFO     | willspeak_server.api.server:<module>:795 - Route: / - {'GET'}
2025-03-04 11:59:38.095 | INFO     | willspeak_server.api.server:<module>:795 - Route: /process-audio - {'POST'}
2025-03-04 11:59:38.095 | INFO     | willspeak_server.api.server:<module>:795 - Route: /process-audio-for-user - {'POST'}
2025-03-04 11:59:38.096 | INFO     | willspeak_server.api.server:<module>:795 - Route: /debug/audio-test - {'GET'}
2025-03-04 11:59:38.096 | INFO     | willspeak_server.api.server:<module>:795 - Route: /debug/paths - {'GET'}
2025-03-04 11:59:38.096 | INFO     | willspeak_server.api.server:<module>:795 - Route: /user/create - {'POST'}
2025-03-04 11:59:38.096 | INFO     | willspeak_server.api.server:<module>:795 - Route: /user/list - {'GET'}
2025-03-04 11:59:38.096 | INFO     | willspeak_server.api.server:<module>:795 - Route: /user/{user_id} - {'GET'}
2025-03-04 11:59:38.096 | INFO     | willspeak_server.api.server:<module>:795 - Route: /user/{user_id}/update - {'POST'}
2025-03-04 11:59:38.096 | INFO     | willspeak_server.api.server:<module>:795 - Route: /training/start - {'POST'}
2025-03-04 11:59:38.096 | INFO     | willspeak_server.api.server:<module>:795 - Route: /training/{session_id}/upload - {'POST'}
2025-03-04 11:59:38.097 | INFO     | willspeak_server.api.server:<module>:795 - Route: /training/{session_id}/complete - {'POST'}
2025-03-04 11:59:38.097 | INFO     | willspeak_server.api.server:<module>:795 - Route: /process-audio-for-user - {'POST'}
2025-03-04 11:59:38.100 | INFO     | willspeak_server.ml.model_integration:initialize_models:65 - Initializing speech enhancement models
2025-03-04 11:59:38.100 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:65 - Initialized SpeechEnhancementModel for user: default
2025-03-04 11:59:38.100 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:164 - No pre-trained model found
2025-03-04 11:59:38.100 | WARNING  | willspeak_server.ml.model_integration:initialize_models:72 - No pre-trained model found. Building new model.
2025-03-04 11:59:38.100 | INFO     | willspeak_server.ml.speech_enhancement_model:build_model:77 - Building model with input shape: (128, 128, 1)
2025-03-04 11:59:38.434 | INFO     | willspeak_server.ml.speech_enhancement_model:build_model:127 - Model built: None
2025-03-04 11:59:38.435 | INFO     | willspeak_server.ml.model_integration:initialize_models:75 - Speech enhancement models initialized
2025-03-04 11:59:43.715 | INFO     | willspeak_server.api.server:<module>:790 - Included router from endpoints.py
2025-03-04 11:59:43.716 | INFO     | willspeak_server.api.server:<module>:795 - Route: / - {'GET'}
2025-03-04 11:59:43.716 | INFO     | willspeak_server.api.server:<module>:795 - Route: /process-audio - {'POST'}
2025-03-04 11:59:43.716 | INFO     | willspeak_server.api.server:<module>:795 - Route: /process-audio-for-user - {'POST'}
2025-03-04 11:59:43.716 | INFO     | willspeak_server.api.server:<module>:795 - Route: /debug/audio-test - {'GET'}
2025-03-04 11:59:43.716 | INFO     | willspeak_server.api.server:<module>:795 - Route: /debug/paths - {'GET'}
2025-03-04 11:59:43.716 | INFO     | willspeak_server.api.server:<module>:795 - Route: /user/create - {'POST'}
2025-03-04 11:59:43.716 | INFO     | willspeak_server.api.server:<module>:795 - Route: /user/list - {'GET'}
2025-03-04 11:59:43.716 | INFO     | willspeak_server.api.server:<module>:795 - Route: /user/{user_id} - {'GET'}
2025-03-04 11:59:43.716 | INFO     | willspeak_server.api.server:<module>:795 - Route: /user/{user_id}/update - {'POST'}
2025-03-04 11:59:43.716 | INFO     | willspeak_server.api.server:<module>:795 - Route: /training/start - {'POST'}
2025-03-04 11:59:43.716 | INFO     | willspeak_server.api.server:<module>:795 - Route: /training/{session_id}/upload - {'POST'}
2025-03-04 11:59:43.716 | INFO     | willspeak_server.api.server:<module>:795 - Route: /training/{session_id}/complete - {'POST'}
2025-03-04 11:59:43.716 | INFO     | willspeak_server.api.server:<module>:795 - Route: /process-audio-for-user - {'POST'}
2025-03-04 11:59:43.769 | INFO     | willspeak_server.ml.model_integration:initialize_models:65 - Initializing speech enhancement models
2025-03-04 11:59:43.770 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:65 - Initialized SpeechEnhancementModel for user: default
2025-03-04 11:59:43.770 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:164 - No pre-trained model found
2025-03-04 11:59:43.770 | WARNING  | willspeak_server.ml.model_integration:initialize_models:72 - No pre-trained model found. Building new model.
2025-03-04 11:59:43.771 | INFO     | willspeak_server.ml.speech_enhancement_model:build_model:77 - Building model with input shape: (128, 128, 1)
2025-03-04 11:59:44.009 | INFO     | willspeak_server.ml.speech_enhancement_model:build_model:127 - Model built: None
2025-03-04 11:59:44.009 | INFO     | willspeak_server.ml.model_integration:initialize_models:75 - Speech enhancement models initialized
2025-03-04 11:59:44.009 | INFO     | willspeak_server.api.server:startup_event:821 - Models initialized on startup
2025-03-04 12:00:11.133 | INFO     | willspeak_server.api.endpoints:verify_user_exists:382 - Verifying user existence: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 12:00:11.133 | DEBUG    | willspeak_server.api.endpoints:verify_user_exists:383 - Checking path: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\users\8fa1972c-a8f1-47e7-a8f6-bbbff06fa063\profile.json
2025-03-04 12:00:11.134 | INFO     | willspeak_server.api.endpoints:verify_user_exists:404 - User verified: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 (TESS)
2025-03-04 12:00:11.134 | INFO     | willspeak_server.api.server:process_audio_generic:511 - Processing audio file: audio.wav for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 12:00:11.134 | INFO     | willspeak_server.api.server:read_audio_file:301 - Reading audio file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_7ad3bc33-1df3-4cb0-915c-82cceda7ed32.wav
2025-03-04 12:00:11.136 | DEBUG    | willspeak_server.api.server:read_audio_file:308 - Attempting to read with soundfile
2025-03-04 12:00:11.136 | WARNING  | willspeak_server.api.server:read_audio_file:314 - Failed to read with soundfile: Error opening 'C:\\Users\\jaxon\\AppData\\Local\\Temp\\willspeak\\willspeak_temp_7ad3bc33-1df3-4cb0-915c-82cceda7ed32.wav': Format not recognised.
2025-03-04 12:00:11.136 | DEBUG    | willspeak_server.api.server:read_audio_file:318 - Attempting to read with scipy.io.wavfile
2025-03-04 12:00:11.136 | WARNING  | willspeak_server.api.server:read_audio_file:330 - Failed to read with scipy.io.wavfile: File format b'\x00\x00\x00\x00' not understood. Only 'RIFF', 'RIFX', and 'RF64' supported.
2025-03-04 12:00:11.136 | DEBUG    | willspeak_server.api.server:read_audio_file:334 - Attempting to read with wave module
2025-03-04 12:00:11.136 | WARNING  | willspeak_server.api.server:read_audio_file:369 - Failed to read with wave module: file does not start with RIFF id
2025-03-04 12:00:11.136 | DEBUG    | willspeak_server.api.server:read_audio_file:373 - Attempting to read with librosa
2025-03-04 12:00:13.107 | WARNING  | willspeak_server.api.server:read_audio_file:379 - Failed to read with librosa: 
2025-03-04 12:00:13.107 | ERROR    | willspeak_server.api.server:read_audio_file:383 - Failed to read audio file with methods: soundfile, scipy.io.wavfile, wave, librosa
2025-03-04 12:00:13.107 | ERROR    | willspeak_server.api.server:process_audio_generic:549 - Failed to read audio file: Failed to read audio file with methods: soundfile, scipy.io.wavfile, wave, librosa
2025-03-04 12:00:13.107 | DEBUG    | willspeak_server.api.server:process_audio_generic:630 - Removed temporary file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_7ad3bc33-1df3-4cb0-915c-82cceda7ed32.wav
2025-03-04 12:00:27.960 | INFO     | willspeak_server.api.endpoints:verify_user_exists:382 - Verifying user existence: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 12:00:27.960 | DEBUG    | willspeak_server.api.endpoints:verify_user_exists:383 - Checking path: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\users\8fa1972c-a8f1-47e7-a8f6-bbbff06fa063\profile.json
2025-03-04 12:00:27.961 | INFO     | willspeak_server.api.endpoints:verify_user_exists:404 - User verified: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 (TESS)
2025-03-04 12:00:27.961 | INFO     | willspeak_server.api.server:process_audio_generic:511 - Processing audio file: audio.wav for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 12:00:27.963 | INFO     | willspeak_server.api.server:read_audio_file:301 - Reading audio file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_db423b43-2490-4c14-9485-0dff654d4f17.wav
2025-03-04 12:00:27.963 | DEBUG    | willspeak_server.api.server:read_audio_file:308 - Attempting to read with soundfile
2025-03-04 12:00:27.963 | WARNING  | willspeak_server.api.server:read_audio_file:314 - Failed to read with soundfile: Error opening 'C:\\Users\\jaxon\\AppData\\Local\\Temp\\willspeak\\willspeak_temp_db423b43-2490-4c14-9485-0dff654d4f17.wav': Format not recognised.
2025-03-04 12:00:27.963 | DEBUG    | willspeak_server.api.server:read_audio_file:318 - Attempting to read with scipy.io.wavfile
2025-03-04 12:00:27.963 | WARNING  | willspeak_server.api.server:read_audio_file:330 - Failed to read with scipy.io.wavfile: File format b'\x01\x00\x03\x00' not understood. Only 'RIFF', 'RIFX', and 'RF64' supported.
2025-03-04 12:00:27.963 | DEBUG    | willspeak_server.api.server:read_audio_file:334 - Attempting to read with wave module
2025-03-04 12:00:27.963 | WARNING  | willspeak_server.api.server:read_audio_file:369 - Failed to read with wave module: file does not start with RIFF id
2025-03-04 12:00:27.963 | DEBUG    | willspeak_server.api.server:read_audio_file:373 - Attempting to read with librosa
2025-03-04 12:00:27.965 | WARNING  | willspeak_server.api.server:read_audio_file:379 - Failed to read with librosa: 
2025-03-04 12:00:27.965 | ERROR    | willspeak_server.api.server:read_audio_file:383 - Failed to read audio file with methods: soundfile, scipy.io.wavfile, wave, librosa
2025-03-04 12:00:27.965 | ERROR    | willspeak_server.api.server:process_audio_generic:549 - Failed to read audio file: Failed to read audio file with methods: soundfile, scipy.io.wavfile, wave, librosa
2025-03-04 12:00:27.965 | DEBUG    | willspeak_server.api.server:process_audio_generic:630 - Removed temporary file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_db423b43-2490-4c14-9485-0dff654d4f17.wav
2025-03-04 12:00:33.978 | INFO     | willspeak_server.api.endpoints:verify_user_exists:382 - Verifying user existence: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 12:00:33.979 | DEBUG    | willspeak_server.api.endpoints:verify_user_exists:383 - Checking path: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\users\8fa1972c-a8f1-47e7-a8f6-bbbff06fa063\profile.json
2025-03-04 12:00:33.979 | INFO     | willspeak_server.api.endpoints:verify_user_exists:404 - User verified: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 (TESS)
2025-03-04 12:00:33.979 | INFO     | willspeak_server.api.server:process_audio_generic:511 - Processing audio file: audio.wav for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 12:00:33.979 | INFO     | willspeak_server.api.server:read_audio_file:301 - Reading audio file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_1b0d4553-0100-46bf-ad19-6182ec63570a.wav
2025-03-04 12:00:33.979 | DEBUG    | willspeak_server.api.server:read_audio_file:308 - Attempting to read with soundfile
2025-03-04 12:00:33.981 | WARNING  | willspeak_server.api.server:read_audio_file:314 - Failed to read with soundfile: Error opening 'C:\\Users\\jaxon\\AppData\\Local\\Temp\\willspeak\\willspeak_temp_1b0d4553-0100-46bf-ad19-6182ec63570a.wav': Format not recognised.
2025-03-04 12:00:33.981 | DEBUG    | willspeak_server.api.server:read_audio_file:318 - Attempting to read with scipy.io.wavfile
2025-03-04 12:00:33.981 | WARNING  | willspeak_server.api.server:read_audio_file:330 - Failed to read with scipy.io.wavfile: File format b'\x01\x00\x03\x00' not understood. Only 'RIFF', 'RIFX', and 'RF64' supported.
2025-03-04 12:00:33.981 | DEBUG    | willspeak_server.api.server:read_audio_file:334 - Attempting to read with wave module
2025-03-04 12:00:33.981 | WARNING  | willspeak_server.api.server:read_audio_file:369 - Failed to read with wave module: file does not start with RIFF id
2025-03-04 12:00:33.981 | DEBUG    | willspeak_server.api.server:read_audio_file:373 - Attempting to read with librosa
2025-03-04 12:00:33.981 | WARNING  | willspeak_server.api.server:read_audio_file:379 - Failed to read with librosa: 
2025-03-04 12:00:33.981 | ERROR    | willspeak_server.api.server:read_audio_file:383 - Failed to read audio file with methods: soundfile, scipy.io.wavfile, wave, librosa
2025-03-04 12:00:33.981 | ERROR    | willspeak_server.api.server:process_audio_generic:549 - Failed to read audio file: Failed to read audio file with methods: soundfile, scipy.io.wavfile, wave, librosa
2025-03-04 12:00:33.983 | DEBUG    | willspeak_server.api.server:process_audio_generic:630 - Removed temporary file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_1b0d4553-0100-46bf-ad19-6182ec63570a.wav
2025-03-04 12:01:26.015 | INFO     | willspeak_server.api.endpoints:verify_user_exists:382 - Verifying user existence: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 12:01:26.015 | DEBUG    | willspeak_server.api.endpoints:verify_user_exists:383 - Checking path: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\users\8fa1972c-a8f1-47e7-a8f6-bbbff06fa063\profile.json
2025-03-04 12:01:26.015 | INFO     | willspeak_server.api.endpoints:verify_user_exists:404 - User verified: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 (TESS)
2025-03-04 12:01:26.015 | INFO     | willspeak_server.api.server:process_audio_generic:511 - Processing audio file: audio.wav for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 12:01:26.016 | INFO     | willspeak_server.api.server:read_audio_file:301 - Reading audio file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_46e16cbf-5ecc-43aa-8b18-c08df4fb2d78.wav
2025-03-04 12:01:26.016 | DEBUG    | willspeak_server.api.server:read_audio_file:308 - Attempting to read with soundfile
2025-03-04 12:01:26.018 | INFO     | willspeak_server.api.server:read_audio_file:311 - Successfully read with soundfile: sr=16000, shape=(26624,), dtype=float64
2025-03-04 12:01:26.018 | INFO     | willspeak_server.api.server:process_audio_generic:563 - Audio file loaded: 26624 samples, 16000Hz
2025-03-04 12:01:26.018 | INFO     | willspeak_server.api.server:preprocess_audio:113 - Preprocessing audio: original sr=16000, target sr=16000
2025-03-04 12:01:26.018 | DEBUG    | willspeak_server.api.server:preprocess_audio:114 - Audio data shape: (26624,), dtype: float64
2025-03-04 12:01:26.018 | INFO     | willspeak_server.api.server:preprocess_audio:144 - Normalizing amplitude
2025-03-04 12:01:27.413 | INFO     | willspeak_server.api.server:preprocess_audio:154 - Removing silence
2025-03-04 12:01:27.988 | DEBUG    | willspeak_server.api.server:preprocess_audio:169 - After silence removal, audio length: 20992
2025-03-04 12:01:27.988 | INFO     | willspeak_server.api.server:preprocess_audio:180 - Preprocessing complete
2025-03-04 12:01:27.988 | INFO     | willspeak_server.api.server:extract_features:197 - Extracting features: n_mfcc=13, n_fft=2048
2025-03-04 12:01:27.999 | INFO     | willspeak_server.api.server:extract_features:228 - Feature extraction complete
2025-03-04 12:01:28.827 | WARNING  | willspeak_server.api.server:transcribe_audio:281 - Speech Recognition could not understand audio
2025-03-04 12:01:28.827 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:65 - Initialized SpeechEnhancementModel for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 12:01:28.827 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:164 - No pre-trained model found
2025-03-04 12:01:28.827 | INFO     | willspeak_server.ml.model_integration:enhance_audio:98 - Enhancing audio with model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 12:01:29.422 | ERROR    | willspeak_server.api.server:enhance_speech:251 - Speech enhancement failed: operands could not be broadcast together with shapes (257,128) (257,165) 
2025-03-04 12:01:29.422 | WARNING  | willspeak_server.api.server:enhance_speech:253 - Returning original audio due to enhancement failure
2025-03-04 12:01:29.422 | INFO     | willspeak_server.api.server:save_audio_file:399 - Saving audio to: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\processed_6daefc82-cbdf-4644-bb79-99654c295a4f.wav
2025-03-04 12:01:29.422 | DEBUG    | willspeak_server.api.server:save_audio_file:409 - Attempting to save with soundfile
2025-03-04 12:01:29.425 | INFO     | willspeak_server.api.server:save_audio_file:412 - Successfully saved with soundfile
2025-03-04 12:01:29.425 | DEBUG    | willspeak_server.api.server:process_audio_generic:630 - Removed temporary file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_46e16cbf-5ecc-43aa-8b18-c08df4fb2d78.wav
2025-03-04 12:01:48.973 | INFO     | willspeak_server.api.endpoints:create_user:92 - Created user profile: Slurred (72089c64-310c-48e3-8928-4dc311c379bb)
2025-03-04 12:01:56.200 | INFO     | willspeak_server.api.endpoints:start_training_session:196 - Started training session db39807e-3785-4dbe-8b10-9cf68be2402c for user 72089c64-310c-48e3-8928-4dc311c379bb
2025-03-04 12:02:05.141 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample 86cb888a-8b7c-4f7a-bbd2-b9b34016ae55 for session db39807e-3785-4dbe-8b10-9cf68be2402c
2025-03-04 12:02:09.450 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample d7e23334-b079-4944-a79d-209a05525b58 for session db39807e-3785-4dbe-8b10-9cf68be2402c
2025-03-04 12:02:13.428 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample a203d658-5517-41ba-8380-ba5fc7545499 for session db39807e-3785-4dbe-8b10-9cf68be2402c
2025-03-04 12:02:18.368 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample 7edcd462-9d39-4fa3-afcc-0be71b4449ce for session db39807e-3785-4dbe-8b10-9cf68be2402c
2025-03-04 12:02:23.148 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample d374908f-28f4-476c-90aa-496338a8c4e4 for session db39807e-3785-4dbe-8b10-9cf68be2402c
2025-03-04 12:02:27.841 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample 221cb9e0-7963-46a4-a5ae-351cd7245bd7 for session db39807e-3785-4dbe-8b10-9cf68be2402c
2025-03-04 12:02:32.557 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample daf2fb22-40ca-456d-b0e0-6e5e9e45a508 for session db39807e-3785-4dbe-8b10-9cf68be2402c
2025-03-04 12:02:37.177 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample 0d8ae798-a000-4522-b511-623164b45ebf for session db39807e-3785-4dbe-8b10-9cf68be2402c
2025-03-04 12:02:43.619 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample c9c36fcd-7c87-4ed8-af45-655e83417c77 for session db39807e-3785-4dbe-8b10-9cf68be2402c
2025-03-04 12:02:48.795 | INFO     | willspeak_server.api.endpoints:upload_training_sample:247 - Uploaded training sample 9051d95a-4aa0-4f3f-9c46-7cdc4443325c for session db39807e-3785-4dbe-8b10-9cf68be2402c
2025-03-04 12:02:48.800 | INFO     | willspeak_server.api.endpoints:complete_training_session:303 - Completed training session db39807e-3785-4dbe-8b10-9cf68be2402c for user 72089c64-310c-48e3-8928-4dc311c379bb, training started in background
2025-03-04 12:02:48.800 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:65 - Initialized SpeechEnhancementModel for user: 72089c64-310c-48e3-8928-4dc311c379bb
2025-03-04 12:02:48.800 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:164 - No pre-trained model found
2025-03-04 12:02:48.801 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:416 - Processing training pair 1/10
2025-03-04 12:02:48.809 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:416 - Processing training pair 2/10
2025-03-04 12:02:48.817 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:416 - Processing training pair 3/10
2025-03-04 12:02:48.824 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:416 - Processing training pair 4/10
2025-03-04 12:02:48.830 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:416 - Processing training pair 5/10
2025-03-04 12:02:48.840 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:416 - Processing training pair 6/10
2025-03-04 12:02:48.848 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:416 - Processing training pair 7/10
2025-03-04 12:02:48.856 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:416 - Processing training pair 8/10
2025-03-04 12:02:48.865 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:416 - Processing training pair 9/10
2025-03-04 12:02:48.876 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:416 - Processing training pair 10/10
2025-03-04 12:02:48.885 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:452 - Prepared training data: (10, 128, 128, 1), (10, 128, 128, 1)
2025-03-04 12:02:48.886 | INFO     | willspeak_server.ml.model_integration:train_model:130 - Training model for user: 72089c64-310c-48e3-8928-4dc311c379bb
2025-03-04 12:02:48.886 | INFO     | willspeak_server.ml.speech_enhancement_model:train:366 - Starting training with 50 epochs, batch size 32
2025-03-04 12:03:30.115 | INFO     | willspeak_server.ml.speech_enhancement_model:save_model:189 - Saved model to C:\Users\jaxon\Documents\WillSpeak\src\main\python\willspeak_server\models\user_default_model.keras
2025-03-04 12:03:30.116 | INFO     | willspeak_server.ml.speech_enhancement_model:train:394 - Training completed. Loss: 0.0055, MAE: 0.0607
2025-03-04 12:03:30.358 | INFO     | willspeak_server.ml.speech_enhancement_model:save_model:189 - Saved model to C:\Users\jaxon\Documents\WillSpeak\src\main\python\willspeak_server\models\user_default_model.keras
2025-03-04 12:03:30.358 | INFO     | willspeak_server.ml.model_integration:train_model:149 - Training completed for user 72089c64-310c-48e3-8928-4dc311c379bb
2025-03-04 12:03:30.361 | INFO     | willspeak_server.api.endpoints:_train_model_background:337 - Model training completed for user 72089c64-310c-48e3-8928-4dc311c379bb
2025-03-04 12:03:57.040 | INFO     | willspeak_server.api.endpoints:verify_user_exists:382 - Verifying user existence: 72089c64-310c-48e3-8928-4dc311c379bb
2025-03-04 12:03:57.040 | DEBUG    | willspeak_server.api.endpoints:verify_user_exists:383 - Checking path: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\users\72089c64-310c-48e3-8928-4dc311c379bb\profile.json
2025-03-04 12:03:57.041 | INFO     | willspeak_server.api.endpoints:verify_user_exists:404 - User verified: 72089c64-310c-48e3-8928-4dc311c379bb (Slurred)
2025-03-04 12:03:57.041 | INFO     | willspeak_server.api.server:process_audio_generic:511 - Processing audio file: audio.wav for user: 72089c64-310c-48e3-8928-4dc311c379bb
2025-03-04 12:03:57.044 | INFO     | willspeak_server.api.server:read_audio_file:301 - Reading audio file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_1330bfc7-5bcb-4a20-a30c-2892eb1c4b49.wav
2025-03-04 12:03:57.044 | DEBUG    | willspeak_server.api.server:read_audio_file:308 - Attempting to read with soundfile
2025-03-04 12:03:57.045 | INFO     | willspeak_server.api.server:read_audio_file:311 - Successfully read with soundfile: sr=16000, shape=(36864,), dtype=float64
2025-03-04 12:03:57.045 | INFO     | willspeak_server.api.server:process_audio_generic:563 - Audio file loaded: 36864 samples, 16000Hz
2025-03-04 12:03:57.045 | INFO     | willspeak_server.api.server:preprocess_audio:113 - Preprocessing audio: original sr=16000, target sr=16000
2025-03-04 12:03:57.045 | DEBUG    | willspeak_server.api.server:preprocess_audio:114 - Audio data shape: (36864,), dtype: float64
2025-03-04 12:03:57.045 | INFO     | willspeak_server.api.server:preprocess_audio:144 - Normalizing amplitude
2025-03-04 12:03:57.045 | INFO     | willspeak_server.api.server:preprocess_audio:154 - Removing silence
2025-03-04 12:03:57.048 | DEBUG    | willspeak_server.api.server:preprocess_audio:169 - After silence removal, audio length: 28672
2025-03-04 12:03:57.048 | INFO     | willspeak_server.api.server:preprocess_audio:180 - Preprocessing complete
2025-03-04 12:03:57.048 | INFO     | willspeak_server.api.server:extract_features:197 - Extracting features: n_mfcc=13, n_fft=2048
2025-03-04 12:03:57.056 | INFO     | willspeak_server.api.server:extract_features:228 - Feature extraction complete
2025-03-04 12:03:57.720 | INFO     | willspeak_server.api.server:transcribe_audio:278 - Transcription: hello my name is
2025-03-04 12:03:57.720 | INFO     | willspeak_server.ml.model_integration:enhance_audio:98 - Enhancing audio with model for user: 72089c64-310c-48e3-8928-4dc311c379bb
2025-03-04 12:03:57.956 | ERROR    | willspeak_server.api.server:enhance_speech:251 - Speech enhancement failed: operands could not be broadcast together with shapes (257,128) (257,225) 
2025-03-04 12:03:57.957 | WARNING  | willspeak_server.api.server:enhance_speech:253 - Returning original audio due to enhancement failure
2025-03-04 12:03:57.957 | INFO     | willspeak_server.api.server:save_audio_file:399 - Saving audio to: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\processed_8863c038-4bc5-4d37-9259-c873413cfd57.wav
2025-03-04 12:03:57.957 | DEBUG    | willspeak_server.api.server:save_audio_file:409 - Attempting to save with soundfile
2025-03-04 12:03:57.960 | INFO     | willspeak_server.api.server:save_audio_file:412 - Successfully saved with soundfile
2025-03-04 12:03:57.960 | DEBUG    | willspeak_server.api.server:process_audio_generic:630 - Removed temporary file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_1330bfc7-5bcb-4a20-a30c-2892eb1c4b49.wav
2025-03-04 12:04:16.049 | INFO     | willspeak_server.api.endpoints:verify_user_exists:382 - Verifying user existence: 72089c64-310c-48e3-8928-4dc311c379bb
2025-03-04 12:04:16.049 | DEBUG    | willspeak_server.api.endpoints:verify_user_exists:383 - Checking path: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\users\72089c64-310c-48e3-8928-4dc311c379bb\profile.json
2025-03-04 12:04:16.049 | INFO     | willspeak_server.api.endpoints:verify_user_exists:404 - User verified: 72089c64-310c-48e3-8928-4dc311c379bb (Slurred)
2025-03-04 12:04:16.049 | INFO     | willspeak_server.api.server:process_audio_generic:511 - Processing audio file: audio.wav for user: 72089c64-310c-48e3-8928-4dc311c379bb
2025-03-04 12:04:16.051 | INFO     | willspeak_server.api.server:read_audio_file:301 - Reading audio file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_d97ff22d-735b-42e5-a87c-f03c59cc50bd.wav
2025-03-04 12:04:16.051 | DEBUG    | willspeak_server.api.server:read_audio_file:308 - Attempting to read with soundfile
2025-03-04 12:04:16.052 | INFO     | willspeak_server.api.server:read_audio_file:311 - Successfully read with soundfile: sr=16000, shape=(34816,), dtype=float64
2025-03-04 12:04:16.052 | INFO     | willspeak_server.api.server:process_audio_generic:563 - Audio file loaded: 34816 samples, 16000Hz
2025-03-04 12:04:16.052 | INFO     | willspeak_server.api.server:preprocess_audio:113 - Preprocessing audio: original sr=16000, target sr=16000
2025-03-04 12:04:16.052 | DEBUG    | willspeak_server.api.server:preprocess_audio:114 - Audio data shape: (34816,), dtype: float64
2025-03-04 12:04:16.052 | INFO     | willspeak_server.api.server:preprocess_audio:144 - Normalizing amplitude
2025-03-04 12:04:16.052 | INFO     | willspeak_server.api.server:preprocess_audio:154 - Removing silence
2025-03-04 12:04:16.054 | DEBUG    | willspeak_server.api.server:preprocess_audio:169 - After silence removal, audio length: 25856
2025-03-04 12:04:16.054 | INFO     | willspeak_server.api.server:preprocess_audio:180 - Preprocessing complete
2025-03-04 12:04:16.054 | INFO     | willspeak_server.api.server:extract_features:197 - Extracting features: n_mfcc=13, n_fft=2048
2025-03-04 12:04:16.061 | INFO     | willspeak_server.api.server:extract_features:228 - Feature extraction complete
2025-03-04 12:04:16.513 | INFO     | willspeak_server.api.server:transcribe_audio:278 - Transcription: all right
2025-03-04 12:04:16.513 | INFO     | willspeak_server.ml.model_integration:enhance_audio:98 - Enhancing audio with model for user: 72089c64-310c-48e3-8928-4dc311c379bb
2025-03-04 12:04:16.697 | ERROR    | willspeak_server.api.server:enhance_speech:251 - Speech enhancement failed: operands could not be broadcast together with shapes (257,128) (257,203) 
2025-03-04 12:04:16.697 | WARNING  | willspeak_server.api.server:enhance_speech:253 - Returning original audio due to enhancement failure
2025-03-04 12:04:16.697 | INFO     | willspeak_server.api.server:save_audio_file:399 - Saving audio to: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\processed_b76b7045-9cb3-425f-9e52-a06bc10056cb.wav
2025-03-04 12:04:16.697 | DEBUG    | willspeak_server.api.server:save_audio_file:409 - Attempting to save with soundfile
2025-03-04 12:04:16.701 | INFO     | willspeak_server.api.server:save_audio_file:412 - Successfully saved with soundfile
2025-03-04 12:04:16.702 | DEBUG    | willspeak_server.api.server:process_audio_generic:630 - Removed temporary file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_d97ff22d-735b-42e5-a87c-f03c59cc50bd.wav
2025-03-04 12:04:24.971 | INFO     | willspeak_server.api.endpoints:verify_user_exists:382 - Verifying user existence: 72089c64-310c-48e3-8928-4dc311c379bb
2025-03-04 12:04:24.971 | DEBUG    | willspeak_server.api.endpoints:verify_user_exists:383 - Checking path: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\users\72089c64-310c-48e3-8928-4dc311c379bb\profile.json
2025-03-04 12:04:24.971 | INFO     | willspeak_server.api.endpoints:verify_user_exists:404 - User verified: 72089c64-310c-48e3-8928-4dc311c379bb (Slurred)
2025-03-04 12:04:24.971 | INFO     | willspeak_server.api.server:process_audio_generic:511 - Processing audio file: audio.wav for user: 72089c64-310c-48e3-8928-4dc311c379bb
2025-03-04 12:04:24.973 | INFO     | willspeak_server.api.server:read_audio_file:301 - Reading audio file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_2ee52ea0-e48d-4d0e-8fd8-14acd9261eb5.wav
2025-03-04 12:04:24.973 | DEBUG    | willspeak_server.api.server:read_audio_file:308 - Attempting to read with soundfile
2025-03-04 12:04:24.974 | INFO     | willspeak_server.api.server:read_audio_file:311 - Successfully read with soundfile: sr=16000, shape=(63488,), dtype=float64
2025-03-04 12:04:24.974 | INFO     | willspeak_server.api.server:process_audio_generic:563 - Audio file loaded: 63488 samples, 16000Hz
2025-03-04 12:04:24.974 | INFO     | willspeak_server.api.server:preprocess_audio:113 - Preprocessing audio: original sr=16000, target sr=16000
2025-03-04 12:04:24.974 | DEBUG    | willspeak_server.api.server:preprocess_audio:114 - Audio data shape: (63488,), dtype: float64
2025-03-04 12:04:24.974 | INFO     | willspeak_server.api.server:preprocess_audio:144 - Normalizing amplitude
2025-03-04 12:04:24.974 | INFO     | willspeak_server.api.server:preprocess_audio:154 - Removing silence
2025-03-04 12:04:24.979 | DEBUG    | willspeak_server.api.server:preprocess_audio:169 - After silence removal, audio length: 32896
2025-03-04 12:04:24.980 | INFO     | willspeak_server.api.server:preprocess_audio:180 - Preprocessing complete
2025-03-04 12:04:24.980 | INFO     | willspeak_server.api.server:extract_features:197 - Extracting features: n_mfcc=13, n_fft=2048
2025-03-04 12:04:25.198 | INFO     | willspeak_server.api.server:extract_features:228 - Feature extraction complete
2025-03-04 12:04:25.653 | WARNING  | willspeak_server.api.server:transcribe_audio:281 - Speech Recognition could not understand audio
2025-03-04 12:04:25.653 | INFO     | willspeak_server.ml.model_integration:enhance_audio:98 - Enhancing audio with model for user: 72089c64-310c-48e3-8928-4dc311c379bb
2025-03-04 12:04:25.844 | ERROR    | willspeak_server.api.server:enhance_speech:251 - Speech enhancement failed: operands could not be broadcast together with shapes (257,128) (257,258) 
2025-03-04 12:04:25.844 | WARNING  | willspeak_server.api.server:enhance_speech:253 - Returning original audio due to enhancement failure
2025-03-04 12:04:25.844 | INFO     | willspeak_server.api.server:save_audio_file:399 - Saving audio to: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\processed_c9f96841-1e8c-4948-9a25-9b34d2105643.wav
2025-03-04 12:04:25.845 | DEBUG    | willspeak_server.api.server:save_audio_file:409 - Attempting to save with soundfile
2025-03-04 12:04:25.848 | INFO     | willspeak_server.api.server:save_audio_file:412 - Successfully saved with soundfile
2025-03-04 12:04:25.848 | DEBUG    | willspeak_server.api.server:process_audio_generic:630 - Removed temporary file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_2ee52ea0-e48d-4d0e-8fd8-14acd9261eb5.wav
2025-03-04 12:37:26.770 | INFO     | willspeak_server.api.server:<module>:48 - Included training data router from training_data_endpoints.py
2025-03-04 12:39:45.772 | INFO     | willspeak_server.api.server:<module>:77 - Included training data router from training_data_endpoints.py
2025-03-04 12:42:59.039 | INFO     | willspeak_server.api.server:<module>:89 - Included training data router from training_data_endpoints.py
2025-03-04 12:42:59.061 | INFO     | willspeak_server.api.server:<module>:799 - Included router from endpoints.py
2025-03-04 12:42:59.061 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/create-pair - {'POST'}
2025-03-04 12:42:59.061 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/upload-clear-template - {'POST'}
2025-03-04 12:42:59.061 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/templates - {'GET'}
2025-03-04 12:42:59.061 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/templates/{template_id} - {'GET'}
2025-03-04 12:42:59.061 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/templates/{template_id}/audio - {'GET'}
2025-03-04 12:42:59.061 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/user-pairs/{user_id} - {'GET'}
2025-03-04 12:42:59.061 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/use-template - {'POST'}
2025-03-04 12:42:59.061 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/train-from-pairs - {'POST'}
2025-03-04 12:42:59.061 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/training-jobs/{user_id} - {'GET'}
2025-03-04 12:42:59.061 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/training-jobs/{job_id}/status - {'GET'}
2025-03-04 12:42:59.061 | INFO     | willspeak_server.api.server:<module>:804 - Route: / - {'GET'}
2025-03-04 12:42:59.061 | INFO     | willspeak_server.api.server:<module>:804 - Route: /process-audio - {'POST'}
2025-03-04 12:42:59.062 | INFO     | willspeak_server.api.server:<module>:804 - Route: /process-audio-for-user - {'POST'}
2025-03-04 12:42:59.062 | INFO     | willspeak_server.api.server:<module>:804 - Route: /debug/audio-test - {'GET'}
2025-03-04 12:42:59.062 | INFO     | willspeak_server.api.server:<module>:804 - Route: /debug/paths - {'GET'}
2025-03-04 12:42:59.062 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/create - {'POST'}
2025-03-04 12:42:59.063 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/list - {'GET'}
2025-03-04 12:42:59.063 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/{user_id} - {'GET'}
2025-03-04 12:42:59.063 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/{user_id}/update - {'POST'}
2025-03-04 12:42:59.063 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training/start - {'POST'}
2025-03-04 12:42:59.063 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training/{session_id}/upload - {'POST'}
2025-03-04 12:42:59.063 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training/{session_id}/complete - {'POST'}
2025-03-04 12:42:59.063 | INFO     | willspeak_server.api.server:<module>:804 - Route: /process-audio-for-user - {'POST'}
2025-03-04 12:42:59.066 | INFO     | willspeak_server.ml.model_integration:initialize_models:65 - Initializing speech enhancement models
2025-03-04 12:42:59.066 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: default
2025-03-04 12:42:59.066 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:354 - No pre-trained model found
2025-03-04 12:42:59.066 | WARNING  | willspeak_server.ml.model_integration:initialize_models:72 - No pre-trained model found. Building new model.
2025-03-04 12:42:59.066 | INFO     | willspeak_server.ml.speech_enhancement_model:build_model:78 - Building improved model with input shape: (128, 128, 1)
2025-03-04 12:46:41.271 | INFO     | willspeak_server.api.server:<module>:89 - Included training data router from training_data_endpoints.py
2025-03-04 12:46:41.296 | INFO     | willspeak_server.api.server:<module>:799 - Included router from endpoints.py
2025-03-04 12:46:41.296 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/create-pair - {'POST'}
2025-03-04 12:46:41.296 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/upload-clear-template - {'POST'}
2025-03-04 12:46:41.296 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/templates - {'GET'}
2025-03-04 12:46:41.296 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/templates/{template_id} - {'GET'}
2025-03-04 12:46:41.296 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/templates/{template_id}/audio - {'GET'}
2025-03-04 12:46:41.296 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/user-pairs/{user_id} - {'GET'}
2025-03-04 12:46:41.296 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/use-template - {'POST'}
2025-03-04 12:46:41.297 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/train-from-pairs - {'POST'}
2025-03-04 12:46:41.297 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/training-jobs/{user_id} - {'GET'}
2025-03-04 12:46:41.297 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/training-jobs/{job_id}/status - {'GET'}
2025-03-04 12:46:41.297 | INFO     | willspeak_server.api.server:<module>:804 - Route: / - {'GET'}
2025-03-04 12:46:41.297 | INFO     | willspeak_server.api.server:<module>:804 - Route: /process-audio - {'POST'}
2025-03-04 12:46:41.297 | INFO     | willspeak_server.api.server:<module>:804 - Route: /process-audio-for-user - {'POST'}
2025-03-04 12:46:41.297 | INFO     | willspeak_server.api.server:<module>:804 - Route: /debug/audio-test - {'GET'}
2025-03-04 12:46:41.297 | INFO     | willspeak_server.api.server:<module>:804 - Route: /debug/paths - {'GET'}
2025-03-04 12:46:41.297 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/create - {'POST'}
2025-03-04 12:46:41.297 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/list - {'GET'}
2025-03-04 12:46:41.297 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/{user_id} - {'GET'}
2025-03-04 12:46:41.297 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/{user_id}/update - {'POST'}
2025-03-04 12:46:41.297 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training/start - {'POST'}
2025-03-04 12:46:41.297 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training/{session_id}/upload - {'POST'}
2025-03-04 12:46:41.297 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training/{session_id}/complete - {'POST'}
2025-03-04 12:46:41.297 | INFO     | willspeak_server.api.server:<module>:804 - Route: /process-audio-for-user - {'POST'}
2025-03-04 12:46:41.301 | INFO     | willspeak_server.ml.model_integration:initialize_models:65 - Initializing speech enhancement models
2025-03-04 12:46:41.301 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: default
2025-03-04 12:46:41.301 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:359 - No pre-trained model found
2025-03-04 12:46:41.301 | WARNING  | willspeak_server.ml.model_integration:initialize_models:72 - No pre-trained model found. Building new model.
2025-03-04 12:46:41.301 | INFO     | willspeak_server.ml.speech_enhancement_model:build_model:78 - Building improved model with input shape: (128, 128, 1)
2025-03-04 12:46:42.687 | INFO     | keras.src.utils.summary_utils:print_summary:389 - Model: "functional"

 Layer (type)         Output Shape          Param #  Connected to      

 input_spectrogram    (None, 128, 128,            0  -                 
 (InputLayer)         1)                                               

 conv2d (Conv2D)      (None, 128, 128,          320  input_spectrogra 
                      32)                                              

 batch_normalization  (None, 128, 128,          128  conv2d[0][0]      
 (BatchNormalizatio  32)                                              

 conv2d_1 (Conv2D)    (None, 128, 128,        9,248  batch_normalizat 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_1[0][0]    
 (BatchNormalizatio  32)                                              

 max_pooling2d        (None, 64, 64,              0  batch_normalizat 
 (MaxPooling2D)       32)                                              

 conv2d_2 (Conv2D)    (None, 64, 64,         18,496  max_pooling2d[0] 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_2[0][0]    
 (BatchNormalizatio  64)                                              

 conv2d_3 (Conv2D)    (None, 64, 64,         36,928  batch_normalizat 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_3[0][0]    
 (BatchNormalizatio  64)                                              

 global_average_poo  (None, 64)                  0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape (Reshape)    (None, 1, 1, 64)            0  global_average_p 

 conv2d_4 (Conv2D)    (None, 1, 1, 8)           520  reshape[0][0]     

 lambda (Lambda)      (None, 64, 64, 1)           0  batch_normalizat 

 lambda_1 (Lambda)    (None, 64, 64, 1)           0  batch_normalizat 

 conv2d_5 (Conv2D)    (None, 1, 1, 64)          576  conv2d_4[0][0]    

 concatenate          (None, 64, 64, 2)           0  lambda[0][0],     
 (Concatenate)                                       lambda_1[0][0]    

 multiply (Multiply)  (None, 64, 64,              0  batch_normalizat 
                      64)                            conv2d_5[0][0]    

 conv2d_6 (Conv2D)    (None, 64, 64, 1)          99  concatenate[0][0] 

 multiply_1           (None, 64, 64,              0  multiply[0][0],   
 (Multiply)           64)                            conv2d_6[0][0]    

 add (Add)            (None, 64, 64,              0  batch_normalizat 
                      64)                            multiply_1[0][0]  

 max_pooling2d_1      (None, 32, 32,              0  add[0][0]         
 (MaxPooling2D)       64)                                              

 conv2d_7 (Conv2D)    (None, 32, 32,         73,856  max_pooling2d_1[ 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_7[0][0]    
 (BatchNormalizatio  128)                                             

 conv2d_8 (Conv2D)    (None, 32, 32,        147,584  batch_normalizat 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_8[0][0]    
 (BatchNormalizatio  128)                                             

 global_average_poo  (None, 128)                 0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape_1 (Reshape)  (None, 1, 1, 128)           0  global_average_p 

 conv2d_9 (Conv2D)    (None, 1, 1, 16)        2,064  reshape_1[0][0]   

 lambda_2 (Lambda)    (None, 32, 32, 1)           0  batch_normalizat 

 lambda_3 (Lambda)    (None, 32, 32, 1)           0  batch_normalizat 

 conv2d_10 (Conv2D)   (None, 1, 1, 128)       2,176  conv2d_9[0][0]    

 concatenate_1        (None, 32, 32, 2)           0  lambda_2[0][0],   
 (Concatenate)                                       lambda_3[0][0]    

 multiply_2           (None, 32, 32,              0  batch_normalizat 
 (Multiply)           128)                           conv2d_10[0][0]   

 conv2d_11 (Conv2D)   (None, 32, 32, 1)          99  concatenate_1[0] 

 multiply_3           (None, 32, 32,              0  multiply_2[0][0], 
 (Multiply)           128)                           conv2d_11[0][0]   

 add_1 (Add)          (None, 32, 32,              0  batch_normalizat 
                      128)                           multiply_3[0][0]  

 max_pooling2d_2      (None, 16, 16,              0  add_1[0][0]       
 (MaxPooling2D)       128)                                             

 conv2d_12 (Conv2D)   (None, 16, 16,        295,168  max_pooling2d_2[ 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_12[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_13 (Conv2D)   (None, 16, 16,        590,080  batch_normalizat 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_13[0][0]   
 (BatchNormalizatio  256)                                             

 global_average_poo  (None, 256)                 0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape_2 (Reshape)  (None, 1, 1, 256)           0  global_average_p 

 conv2d_14 (Conv2D)   (None, 1, 1, 32)        8,224  reshape_2[0][0]   

 lambda_4 (Lambda)    (None, 16, 16, 1)           0  batch_normalizat 

 lambda_5 (Lambda)    (None, 16, 16, 1)           0  batch_normalizat 

 conv2d_15 (Conv2D)   (None, 1, 1, 256)       8,448  conv2d_14[0][0]   

 concatenate_2        (None, 16, 16, 2)           0  lambda_4[0][0],   
 (Concatenate)                                       lambda_5[0][0]    

 multiply_4           (None, 16, 16,              0  batch_normalizat 
 (Multiply)           256)                           conv2d_15[0][0]   

 conv2d_16 (Conv2D)   (None, 16, 16, 1)          99  concatenate_2[0] 

 multiply_5           (None, 16, 16,              0  multiply_4[0][0], 
 (Multiply)           256)                           conv2d_16[0][0]   

 add_2 (Add)          (None, 16, 16,              0  batch_normalizat 
                      256)                           multiply_5[0][0]  

 max_pooling2d_3      (None, 8, 8, 256)           0  add_2[0][0]       
 (MaxPooling2D)                                                        

 conv2d_17 (Conv2D)   (None, 8, 8, 512)   1,180,160  max_pooling2d_3[ 

 batch_normalizatio  (None, 8, 8, 512)       2,048  conv2d_17[0][0]   
 (BatchNormalizatio                                                   

 dropout (Dropout)    (None, 8, 8, 512)           0  batch_normalizat 

 conv2d_18 (Conv2D)   (None, 8, 8, 512)   2,359,808  dropout[0][0]     

 batch_normalizatio  (None, 8, 8, 512)       2,048  conv2d_18[0][0]   
 (BatchNormalizatio                                                   

 conv2d_transpose     (None, 16, 16,        524,544  batch_normalizat 
 (Conv2DTranspose)    256)                                             

 concatenate_3        (None, 16, 16,              0  conv2d_transpose 
 (Concatenate)        512)                           add_2[0][0]       

 conv2d_19 (Conv2D)   (None, 16, 16,      1,179,904  concatenate_3[0] 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_19[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_20 (Conv2D)   (None, 16, 16,        590,080  batch_normalizat 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_20[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_transpose_1   (None, 32, 32,        131,200  batch_normalizat 
 (Conv2DTranspose)    128)                                             

 concatenate_4        (None, 32, 32,              0  conv2d_transpose 
 (Concatenate)        256)                           add_1[0][0]       

 conv2d_21 (Conv2D)   (None, 32, 32,        295,040  concatenate_4[0] 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_21[0][0]   
 (BatchNormalizatio  128)                                             

 conv2d_22 (Conv2D)   (None, 32, 32,        147,584  batch_normalizat 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_22[0][0]   
 (BatchNormalizatio  128)                                             

 conv2d_transpose_2   (None, 64, 64,         32,832  batch_normalizat 
 (Conv2DTranspose)    64)                                              

 concatenate_5        (None, 64, 64,              0  conv2d_transpose 
 (Concatenate)        128)                           add[0][0]         

 conv2d_23 (Conv2D)   (None, 64, 64,         73,792  concatenate_5[0] 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_23[0][0]   
 (BatchNormalizatio  64)                                              

 conv2d_24 (Conv2D)   (None, 64, 64,         36,928  batch_normalizat 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_24[0][0]   
 (BatchNormalizatio  64)                                              

 conv2d_transpose_3   (None, 128, 128,        8,224  batch_normalizat 
 (Conv2DTranspose)    32)                                              

 concatenate_6        (None, 128, 128,            0  conv2d_transpose 
 (Concatenate)        64)                            batch_normalizat 

 conv2d_25 (Conv2D)   (None, 128, 128,       18,464  concatenate_6[0] 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_25[0][0]   
 (BatchNormalizatio  32)                                              

 conv2d_26 (Conv2D)   (None, 128, 128,        9,248  batch_normalizat 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_26[0][0]   
 (BatchNormalizatio  32)                                              

 enhanced_spectrogr  (None, 128, 128,           33  batch_normalizat 
 (Conv2D)             1)                                               

 Total params: 7,793,602 (29.73 MB)
 Trainable params: 7,787,714 (29.71 MB)
 Non-trainable params: 5,888 (23.00 KB)

2025-03-04 12:46:42.692 | INFO     | willspeak_server.ml.model_integration:initialize_models:75 - Speech enhancement models initialized
2025-03-04 12:46:47.502 | INFO     | willspeak_server.api.server:<module>:89 - Included training data router from training_data_endpoints.py
2025-03-04 12:46:47.541 | INFO     | willspeak_server.api.server:<module>:799 - Included router from endpoints.py
2025-03-04 12:46:47.543 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/create-pair - {'POST'}
2025-03-04 12:46:47.543 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/upload-clear-template - {'POST'}
2025-03-04 12:46:47.543 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/templates - {'GET'}
2025-03-04 12:46:47.543 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/templates/{template_id} - {'GET'}
2025-03-04 12:46:47.543 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/templates/{template_id}/audio - {'GET'}
2025-03-04 12:46:47.543 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/user-pairs/{user_id} - {'GET'}
2025-03-04 12:46:47.543 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/use-template - {'POST'}
2025-03-04 12:46:47.544 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/train-from-pairs - {'POST'}
2025-03-04 12:46:47.544 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/training-jobs/{user_id} - {'GET'}
2025-03-04 12:46:47.544 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/training-jobs/{job_id}/status - {'GET'}
2025-03-04 12:46:47.544 | INFO     | willspeak_server.api.server:<module>:804 - Route: / - {'GET'}
2025-03-04 12:46:47.544 | INFO     | willspeak_server.api.server:<module>:804 - Route: /process-audio - {'POST'}
2025-03-04 12:46:47.544 | INFO     | willspeak_server.api.server:<module>:804 - Route: /process-audio-for-user - {'POST'}
2025-03-04 12:46:47.544 | INFO     | willspeak_server.api.server:<module>:804 - Route: /debug/audio-test - {'GET'}
2025-03-04 12:46:47.544 | INFO     | willspeak_server.api.server:<module>:804 - Route: /debug/paths - {'GET'}
2025-03-04 12:46:47.544 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/create - {'POST'}
2025-03-04 12:46:47.544 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/list - {'GET'}
2025-03-04 12:46:47.544 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/{user_id} - {'GET'}
2025-03-04 12:46:47.544 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/{user_id}/update - {'POST'}
2025-03-04 12:46:47.545 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training/start - {'POST'}
2025-03-04 12:46:47.545 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training/{session_id}/upload - {'POST'}
2025-03-04 12:46:47.545 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training/{session_id}/complete - {'POST'}
2025-03-04 12:46:47.545 | INFO     | willspeak_server.api.server:<module>:804 - Route: /process-audio-for-user - {'POST'}
2025-03-04 12:46:47.640 | INFO     | willspeak_server.ml.model_integration:initialize_models:65 - Initializing speech enhancement models
2025-03-04 12:46:47.640 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: default
2025-03-04 12:46:47.640 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:359 - No pre-trained model found
2025-03-04 12:46:47.640 | WARNING  | willspeak_server.ml.model_integration:initialize_models:72 - No pre-trained model found. Building new model.
2025-03-04 12:46:47.640 | INFO     | willspeak_server.ml.speech_enhancement_model:build_model:78 - Building improved model with input shape: (128, 128, 1)
2025-03-04 12:46:49.171 | INFO     | keras.src.utils.summary_utils:print_summary:389 - Model: "functional"

 Layer (type)         Output Shape          Param #  Connected to      

 input_spectrogram    (None, 128, 128,            0  -                 
 (InputLayer)         1)                                               

 conv2d (Conv2D)      (None, 128, 128,          320  input_spectrogra 
                      32)                                              

 batch_normalization  (None, 128, 128,          128  conv2d[0][0]      
 (BatchNormalizatio  32)                                              

 conv2d_1 (Conv2D)    (None, 128, 128,        9,248  batch_normalizat 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_1[0][0]    
 (BatchNormalizatio  32)                                              

 max_pooling2d        (None, 64, 64,              0  batch_normalizat 
 (MaxPooling2D)       32)                                              

 conv2d_2 (Conv2D)    (None, 64, 64,         18,496  max_pooling2d[0] 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_2[0][0]    
 (BatchNormalizatio  64)                                              

 conv2d_3 (Conv2D)    (None, 64, 64,         36,928  batch_normalizat 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_3[0][0]    
 (BatchNormalizatio  64)                                              

 global_average_poo  (None, 64)                  0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape (Reshape)    (None, 1, 1, 64)            0  global_average_p 

 conv2d_4 (Conv2D)    (None, 1, 1, 8)           520  reshape[0][0]     

 lambda (Lambda)      (None, 64, 64, 1)           0  batch_normalizat 

 lambda_1 (Lambda)    (None, 64, 64, 1)           0  batch_normalizat 

 conv2d_5 (Conv2D)    (None, 1, 1, 64)          576  conv2d_4[0][0]    

 concatenate          (None, 64, 64, 2)           0  lambda[0][0],     
 (Concatenate)                                       lambda_1[0][0]    

 multiply (Multiply)  (None, 64, 64,              0  batch_normalizat 
                      64)                            conv2d_5[0][0]    

 conv2d_6 (Conv2D)    (None, 64, 64, 1)          99  concatenate[0][0] 

 multiply_1           (None, 64, 64,              0  multiply[0][0],   
 (Multiply)           64)                            conv2d_6[0][0]    

 add (Add)            (None, 64, 64,              0  batch_normalizat 
                      64)                            multiply_1[0][0]  

 max_pooling2d_1      (None, 32, 32,              0  add[0][0]         
 (MaxPooling2D)       64)                                              

 conv2d_7 (Conv2D)    (None, 32, 32,         73,856  max_pooling2d_1[ 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_7[0][0]    
 (BatchNormalizatio  128)                                             

 conv2d_8 (Conv2D)    (None, 32, 32,        147,584  batch_normalizat 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_8[0][0]    
 (BatchNormalizatio  128)                                             

 global_average_poo  (None, 128)                 0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape_1 (Reshape)  (None, 1, 1, 128)           0  global_average_p 

 conv2d_9 (Conv2D)    (None, 1, 1, 16)        2,064  reshape_1[0][0]   

 lambda_2 (Lambda)    (None, 32, 32, 1)           0  batch_normalizat 

 lambda_3 (Lambda)    (None, 32, 32, 1)           0  batch_normalizat 

 conv2d_10 (Conv2D)   (None, 1, 1, 128)       2,176  conv2d_9[0][0]    

 concatenate_1        (None, 32, 32, 2)           0  lambda_2[0][0],   
 (Concatenate)                                       lambda_3[0][0]    

 multiply_2           (None, 32, 32,              0  batch_normalizat 
 (Multiply)           128)                           conv2d_10[0][0]   

 conv2d_11 (Conv2D)   (None, 32, 32, 1)          99  concatenate_1[0] 

 multiply_3           (None, 32, 32,              0  multiply_2[0][0], 
 (Multiply)           128)                           conv2d_11[0][0]   

 add_1 (Add)          (None, 32, 32,              0  batch_normalizat 
                      128)                           multiply_3[0][0]  

 max_pooling2d_2      (None, 16, 16,              0  add_1[0][0]       
 (MaxPooling2D)       128)                                             

 conv2d_12 (Conv2D)   (None, 16, 16,        295,168  max_pooling2d_2[ 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_12[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_13 (Conv2D)   (None, 16, 16,        590,080  batch_normalizat 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_13[0][0]   
 (BatchNormalizatio  256)                                             

 global_average_poo  (None, 256)                 0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape_2 (Reshape)  (None, 1, 1, 256)           0  global_average_p 

 conv2d_14 (Conv2D)   (None, 1, 1, 32)        8,224  reshape_2[0][0]   

 lambda_4 (Lambda)    (None, 16, 16, 1)           0  batch_normalizat 

 lambda_5 (Lambda)    (None, 16, 16, 1)           0  batch_normalizat 

 conv2d_15 (Conv2D)   (None, 1, 1, 256)       8,448  conv2d_14[0][0]   

 concatenate_2        (None, 16, 16, 2)           0  lambda_4[0][0],   
 (Concatenate)                                       lambda_5[0][0]    

 multiply_4           (None, 16, 16,              0  batch_normalizat 
 (Multiply)           256)                           conv2d_15[0][0]   

 conv2d_16 (Conv2D)   (None, 16, 16, 1)          99  concatenate_2[0] 

 multiply_5           (None, 16, 16,              0  multiply_4[0][0], 
 (Multiply)           256)                           conv2d_16[0][0]   

 add_2 (Add)          (None, 16, 16,              0  batch_normalizat 
                      256)                           multiply_5[0][0]  

 max_pooling2d_3      (None, 8, 8, 256)           0  add_2[0][0]       
 (MaxPooling2D)                                                        

 conv2d_17 (Conv2D)   (None, 8, 8, 512)   1,180,160  max_pooling2d_3[ 

 batch_normalizatio  (None, 8, 8, 512)       2,048  conv2d_17[0][0]   
 (BatchNormalizatio                                                   

 dropout (Dropout)    (None, 8, 8, 512)           0  batch_normalizat 

 conv2d_18 (Conv2D)   (None, 8, 8, 512)   2,359,808  dropout[0][0]     

 batch_normalizatio  (None, 8, 8, 512)       2,048  conv2d_18[0][0]   
 (BatchNormalizatio                                                   

 conv2d_transpose     (None, 16, 16,        524,544  batch_normalizat 
 (Conv2DTranspose)    256)                                             

 concatenate_3        (None, 16, 16,              0  conv2d_transpose 
 (Concatenate)        512)                           add_2[0][0]       

 conv2d_19 (Conv2D)   (None, 16, 16,      1,179,904  concatenate_3[0] 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_19[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_20 (Conv2D)   (None, 16, 16,        590,080  batch_normalizat 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_20[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_transpose_1   (None, 32, 32,        131,200  batch_normalizat 
 (Conv2DTranspose)    128)                                             

 concatenate_4        (None, 32, 32,              0  conv2d_transpose 
 (Concatenate)        256)                           add_1[0][0]       

 conv2d_21 (Conv2D)   (None, 32, 32,        295,040  concatenate_4[0] 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_21[0][0]   
 (BatchNormalizatio  128)                                             

 conv2d_22 (Conv2D)   (None, 32, 32,        147,584  batch_normalizat 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_22[0][0]   
 (BatchNormalizatio  128)                                             

 conv2d_transpose_2   (None, 64, 64,         32,832  batch_normalizat 
 (Conv2DTranspose)    64)                                              

 concatenate_5        (None, 64, 64,              0  conv2d_transpose 
 (Concatenate)        128)                           add[0][0]         

 conv2d_23 (Conv2D)   (None, 64, 64,         73,792  concatenate_5[0] 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_23[0][0]   
 (BatchNormalizatio  64)                                              

 conv2d_24 (Conv2D)   (None, 64, 64,         36,928  batch_normalizat 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_24[0][0]   
 (BatchNormalizatio  64)                                              

 conv2d_transpose_3   (None, 128, 128,        8,224  batch_normalizat 
 (Conv2DTranspose)    32)                                              

 concatenate_6        (None, 128, 128,            0  conv2d_transpose 
 (Concatenate)        64)                            batch_normalizat 

 conv2d_25 (Conv2D)   (None, 128, 128,       18,464  concatenate_6[0] 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_25[0][0]   
 (BatchNormalizatio  32)                                              

 conv2d_26 (Conv2D)   (None, 128, 128,        9,248  batch_normalizat 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_26[0][0]   
 (BatchNormalizatio  32)                                              

 enhanced_spectrogr  (None, 128, 128,           33  batch_normalizat 
 (Conv2D)             1)                                               

 Total params: 7,793,602 (29.73 MB)
 Trainable params: 7,787,714 (29.71 MB)
 Non-trainable params: 5,888 (23.00 KB)

2025-03-04 12:46:49.173 | INFO     | willspeak_server.ml.model_integration:initialize_models:75 - Speech enhancement models initialized
2025-03-04 12:46:49.173 | INFO     | willspeak_server.api.server:startup_event:830 - Models initialized on startup
2025-03-04 12:50:50.338 | INFO     | willspeak_server.api.training_data_endpoints:create_training_pair:93 - Created training pair ea3c394f-82a3-4cea-95e2-5ef83ac45dc5 for user 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 13:19:23.381 | INFO     | willspeak_server.api.training_data_endpoints:train_from_pairs:450 - Started training job c7552e0d-c71f-4e50-bf49-2346e347c62c for user 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 with 1 pairs
2025-03-04 13:19:23.391 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 13:19:23.392 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:359 - No pre-trained model found
2025-03-04 13:19:23.394 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:869 - Processing training pair 1/1
2025-03-04 13:19:45.273 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:923 - Prepared training data: (1, 128, 128, 1), (1, 128, 128, 1)
2025-03-04 13:19:45.274 | INFO     | willspeak_server.ml.model_integration:train_model:130 - Training model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 13:19:45.274 | INFO     | willspeak_server.ml.speech_enhancement_model:train:768 - Mixed precision training enabled
2025-03-04 13:19:45.274 | INFO     | willspeak_server.ml.speech_enhancement_model:train:773 - Starting training with 50 epochs, batch size 32
2025-03-04 13:19:45.275 | INFO     | willspeak_server.ml.speech_enhancement_model:train:794 - Epoch 1/50
2025-03-04 13:20:02.515 | ERROR    | willspeak_server.ml.model_integration:train_model:153 - Error training model: math domain error
2025-03-04 13:20:02.515 | ERROR    | willspeak_server.api.training_data_endpoints:_run_training_job:570 - Training job c7552e0d-c71f-4e50-bf49-2346e347c62c failed: math domain error
2025-03-04 13:22:04.850 | INFO     | willspeak_server.api.endpoints:verify_user_exists:382 - Verifying user existence: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 13:22:04.851 | DEBUG    | willspeak_server.api.endpoints:verify_user_exists:383 - Checking path: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\users\8fa1972c-a8f1-47e7-a8f6-bbbff06fa063\profile.json
2025-03-04 13:22:04.851 | INFO     | willspeak_server.api.endpoints:verify_user_exists:404 - User verified: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 (TESS)
2025-03-04 13:22:04.852 | INFO     | willspeak_server.api.server:process_audio_generic:520 - Processing audio file: audio.wav for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 13:22:04.853 | INFO     | willspeak_server.api.server:read_audio_file:310 - Reading audio file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_bfcfd107-e2b3-4732-94bf-5725ae1a21b7.wav
2025-03-04 13:22:04.853 | DEBUG    | willspeak_server.api.server:read_audio_file:317 - Attempting to read with soundfile
2025-03-04 13:22:04.856 | INFO     | willspeak_server.api.server:read_audio_file:320 - Successfully read with soundfile: sr=16000, shape=(55296,), dtype=float64
2025-03-04 13:22:04.856 | INFO     | willspeak_server.api.server:process_audio_generic:572 - Audio file loaded: 55296 samples, 16000Hz
2025-03-04 13:22:04.857 | INFO     | willspeak_server.api.server:preprocess_audio:122 - Preprocessing audio: original sr=16000, target sr=16000
2025-03-04 13:22:04.857 | DEBUG    | willspeak_server.api.server:preprocess_audio:123 - Audio data shape: (55296,), dtype: float64
2025-03-04 13:22:04.857 | INFO     | willspeak_server.api.server:preprocess_audio:153 - Normalizing amplitude
2025-03-04 13:22:04.857 | INFO     | willspeak_server.api.server:preprocess_audio:163 - Removing silence
2025-03-04 13:22:05.245 | DEBUG    | willspeak_server.api.server:preprocess_audio:178 - After silence removal, audio length: 46080
2025-03-04 13:22:05.245 | INFO     | willspeak_server.api.server:preprocess_audio:189 - Preprocessing complete
2025-03-04 13:22:05.245 | INFO     | willspeak_server.api.server:extract_features:206 - Extracting features: n_mfcc=13, n_fft=2048
2025-03-04 13:22:05.258 | INFO     | willspeak_server.api.server:extract_features:237 - Feature extraction complete
2025-03-04 13:22:06.166 | INFO     | willspeak_server.api.server:transcribe_audio:287 - Transcription: hello my name is John
2025-03-04 13:22:06.167 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 13:22:06.167 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:359 - No pre-trained model found
2025-03-04 13:22:06.167 | INFO     | willspeak_server.ml.model_integration:enhance_audio:98 - Enhancing audio with model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 13:22:07.104 | ERROR    | willspeak_server.api.server:enhance_speech:260 - Speech enhancement failed: operands could not be broadcast together with shapes (257,128) (257,361) 
2025-03-04 13:22:07.105 | WARNING  | willspeak_server.api.server:enhance_speech:262 - Returning original audio due to enhancement failure
2025-03-04 13:22:07.105 | INFO     | willspeak_server.api.server:save_audio_file:408 - Saving audio to: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\processed_c6093ceb-d967-40bc-bc64-7fbacde70e41.wav
2025-03-04 13:22:07.105 | DEBUG    | willspeak_server.api.server:save_audio_file:418 - Attempting to save with soundfile
2025-03-04 13:22:07.108 | INFO     | willspeak_server.api.server:save_audio_file:421 - Successfully saved with soundfile
2025-03-04 13:22:07.108 | DEBUG    | willspeak_server.api.server:process_audio_generic:639 - Removed temporary file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_bfcfd107-e2b3-4732-94bf-5725ae1a21b7.wav
2025-03-04 13:22:22.770 | INFO     | willspeak_server.api.endpoints:verify_user_exists:382 - Verifying user existence: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 13:22:22.770 | DEBUG    | willspeak_server.api.endpoints:verify_user_exists:383 - Checking path: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\users\8fa1972c-a8f1-47e7-a8f6-bbbff06fa063\profile.json
2025-03-04 13:22:22.771 | INFO     | willspeak_server.api.endpoints:verify_user_exists:404 - User verified: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 (TESS)
2025-03-04 13:22:22.771 | INFO     | willspeak_server.api.server:process_audio_generic:520 - Processing audio file: audio.wav for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 13:22:22.772 | INFO     | willspeak_server.api.server:read_audio_file:310 - Reading audio file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_9e3db900-5eba-4a99-a807-264965a4f370.wav
2025-03-04 13:22:22.773 | DEBUG    | willspeak_server.api.server:read_audio_file:317 - Attempting to read with soundfile
2025-03-04 13:22:22.774 | INFO     | willspeak_server.api.server:read_audio_file:320 - Successfully read with soundfile: sr=16000, shape=(86016,), dtype=float64
2025-03-04 13:22:22.774 | INFO     | willspeak_server.api.server:process_audio_generic:572 - Audio file loaded: 86016 samples, 16000Hz
2025-03-04 13:22:22.774 | INFO     | willspeak_server.api.server:preprocess_audio:122 - Preprocessing audio: original sr=16000, target sr=16000
2025-03-04 13:22:22.774 | DEBUG    | willspeak_server.api.server:preprocess_audio:123 - Audio data shape: (86016,), dtype: float64
2025-03-04 13:22:22.774 | INFO     | willspeak_server.api.server:preprocess_audio:153 - Normalizing amplitude
2025-03-04 13:22:22.775 | INFO     | willspeak_server.api.server:preprocess_audio:163 - Removing silence
2025-03-04 13:22:22.783 | DEBUG    | willspeak_server.api.server:preprocess_audio:178 - After silence removal, audio length: 67968
2025-03-04 13:22:22.783 | INFO     | willspeak_server.api.server:preprocess_audio:189 - Preprocessing complete
2025-03-04 13:22:22.783 | INFO     | willspeak_server.api.server:extract_features:206 - Extracting features: n_mfcc=13, n_fft=2048
2025-03-04 13:22:23.176 | INFO     | willspeak_server.api.server:extract_features:237 - Feature extraction complete
2025-03-04 13:22:25.067 | WARNING  | willspeak_server.api.server:transcribe_audio:290 - Speech Recognition could not understand audio
2025-03-04 13:22:25.067 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 13:22:25.068 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:359 - No pre-trained model found
2025-03-04 13:22:25.068 | INFO     | willspeak_server.ml.model_integration:enhance_audio:98 - Enhancing audio with model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 13:22:25.705 | ERROR    | willspeak_server.api.server:enhance_speech:260 - Speech enhancement failed: operands could not be broadcast together with shapes (257,128) (257,532) 
2025-03-04 13:22:25.706 | WARNING  | willspeak_server.api.server:enhance_speech:262 - Returning original audio due to enhancement failure
2025-03-04 13:22:25.706 | INFO     | willspeak_server.api.server:save_audio_file:408 - Saving audio to: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\processed_170851f2-0435-4647-bb6b-d6c23a2833f9.wav
2025-03-04 13:22:25.706 | DEBUG    | willspeak_server.api.server:save_audio_file:418 - Attempting to save with soundfile
2025-03-04 13:22:25.710 | INFO     | willspeak_server.api.server:save_audio_file:421 - Successfully saved with soundfile
2025-03-04 13:22:25.710 | DEBUG    | willspeak_server.api.server:process_audio_generic:639 - Removed temporary file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_9e3db900-5eba-4a99-a807-264965a4f370.wav
2025-03-04 13:25:46.921 | INFO     | willspeak_server.api.server:shutdown_event:845 - Cleanup completed on shutdown
2025-03-04 13:25:57.348 | INFO     | willspeak_server.api.server:<module>:89 - Included training data router from training_data_endpoints.py
2025-03-04 13:25:57.371 | INFO     | willspeak_server.api.server:<module>:799 - Included router from endpoints.py
2025-03-04 13:25:57.372 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/create-pair - {'POST'}
2025-03-04 13:25:57.372 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/upload-clear-template - {'POST'}
2025-03-04 13:25:57.372 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/templates - {'GET'}
2025-03-04 13:25:57.372 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/templates/{template_id} - {'GET'}
2025-03-04 13:25:57.372 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/templates/{template_id}/audio - {'GET'}
2025-03-04 13:25:57.372 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/user-pairs/{user_id} - {'GET'}
2025-03-04 13:25:57.372 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/use-template - {'POST'}
2025-03-04 13:25:57.372 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/train-from-pairs - {'POST'}
2025-03-04 13:25:57.372 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/training-jobs/{user_id} - {'GET'}
2025-03-04 13:25:57.372 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/training-jobs/{job_id}/status - {'GET'}
2025-03-04 13:25:57.372 | INFO     | willspeak_server.api.server:<module>:804 - Route: / - {'GET'}
2025-03-04 13:25:57.372 | INFO     | willspeak_server.api.server:<module>:804 - Route: /process-audio - {'POST'}
2025-03-04 13:25:57.372 | INFO     | willspeak_server.api.server:<module>:804 - Route: /process-audio-for-user - {'POST'}
2025-03-04 13:25:57.372 | INFO     | willspeak_server.api.server:<module>:804 - Route: /debug/audio-test - {'GET'}
2025-03-04 13:25:57.373 | INFO     | willspeak_server.api.server:<module>:804 - Route: /debug/paths - {'GET'}
2025-03-04 13:25:57.373 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/create - {'POST'}
2025-03-04 13:25:57.373 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/list - {'GET'}
2025-03-04 13:25:57.373 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/{user_id} - {'GET'}
2025-03-04 13:25:57.373 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/{user_id}/update - {'POST'}
2025-03-04 13:25:57.373 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training/start - {'POST'}
2025-03-04 13:25:57.373 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training/{session_id}/upload - {'POST'}
2025-03-04 13:25:57.373 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training/{session_id}/complete - {'POST'}
2025-03-04 13:25:57.373 | INFO     | willspeak_server.api.server:<module>:804 - Route: /process-audio-for-user - {'POST'}
2025-03-04 13:25:57.439 | INFO     | willspeak_server.ml.model_integration:initialize_models:65 - Initializing speech enhancement models
2025-03-04 13:25:57.439 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: default
2025-03-04 13:25:57.440 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:359 - No pre-trained model found
2025-03-04 13:25:57.440 | WARNING  | willspeak_server.ml.model_integration:initialize_models:72 - No pre-trained model found. Building new model.
2025-03-04 13:25:57.440 | INFO     | willspeak_server.ml.speech_enhancement_model:build_model:78 - Building improved model with input shape: (128, 128, 1)
2025-03-04 13:25:58.814 | INFO     | keras.src.utils.summary_utils:print_summary:389 - Model: "functional"

 Layer (type)         Output Shape          Param #  Connected to      

 input_spectrogram    (None, 128, 128,            0  -                 
 (InputLayer)         1)                                               

 conv2d (Conv2D)      (None, 128, 128,          320  input_spectrogra 
                      32)                                              

 batch_normalization  (None, 128, 128,          128  conv2d[0][0]      
 (BatchNormalizatio  32)                                              

 conv2d_1 (Conv2D)    (None, 128, 128,        9,248  batch_normalizat 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_1[0][0]    
 (BatchNormalizatio  32)                                              

 max_pooling2d        (None, 64, 64,              0  batch_normalizat 
 (MaxPooling2D)       32)                                              

 conv2d_2 (Conv2D)    (None, 64, 64,         18,496  max_pooling2d[0] 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_2[0][0]    
 (BatchNormalizatio  64)                                              

 conv2d_3 (Conv2D)    (None, 64, 64,         36,928  batch_normalizat 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_3[0][0]    
 (BatchNormalizatio  64)                                              

 global_average_poo  (None, 64)                  0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape (Reshape)    (None, 1, 1, 64)            0  global_average_p 

 conv2d_4 (Conv2D)    (None, 1, 1, 8)           520  reshape[0][0]     

 lambda (Lambda)      (None, 64, 64, 1)           0  batch_normalizat 

 lambda_1 (Lambda)    (None, 64, 64, 1)           0  batch_normalizat 

 conv2d_5 (Conv2D)    (None, 1, 1, 64)          576  conv2d_4[0][0]    

 concatenate          (None, 64, 64, 2)           0  lambda[0][0],     
 (Concatenate)                                       lambda_1[0][0]    

 multiply (Multiply)  (None, 64, 64,              0  batch_normalizat 
                      64)                            conv2d_5[0][0]    

 conv2d_6 (Conv2D)    (None, 64, 64, 1)          99  concatenate[0][0] 

 multiply_1           (None, 64, 64,              0  multiply[0][0],   
 (Multiply)           64)                            conv2d_6[0][0]    

 add (Add)            (None, 64, 64,              0  batch_normalizat 
                      64)                            multiply_1[0][0]  

 max_pooling2d_1      (None, 32, 32,              0  add[0][0]         
 (MaxPooling2D)       64)                                              

 conv2d_7 (Conv2D)    (None, 32, 32,         73,856  max_pooling2d_1[ 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_7[0][0]    
 (BatchNormalizatio  128)                                             

 conv2d_8 (Conv2D)    (None, 32, 32,        147,584  batch_normalizat 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_8[0][0]    
 (BatchNormalizatio  128)                                             

 global_average_poo  (None, 128)                 0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape_1 (Reshape)  (None, 1, 1, 128)           0  global_average_p 

 conv2d_9 (Conv2D)    (None, 1, 1, 16)        2,064  reshape_1[0][0]   

 lambda_2 (Lambda)    (None, 32, 32, 1)           0  batch_normalizat 

 lambda_3 (Lambda)    (None, 32, 32, 1)           0  batch_normalizat 

 conv2d_10 (Conv2D)   (None, 1, 1, 128)       2,176  conv2d_9[0][0]    

 concatenate_1        (None, 32, 32, 2)           0  lambda_2[0][0],   
 (Concatenate)                                       lambda_3[0][0]    

 multiply_2           (None, 32, 32,              0  batch_normalizat 
 (Multiply)           128)                           conv2d_10[0][0]   

 conv2d_11 (Conv2D)   (None, 32, 32, 1)          99  concatenate_1[0] 

 multiply_3           (None, 32, 32,              0  multiply_2[0][0], 
 (Multiply)           128)                           conv2d_11[0][0]   

 add_1 (Add)          (None, 32, 32,              0  batch_normalizat 
                      128)                           multiply_3[0][0]  

 max_pooling2d_2      (None, 16, 16,              0  add_1[0][0]       
 (MaxPooling2D)       128)                                             

 conv2d_12 (Conv2D)   (None, 16, 16,        295,168  max_pooling2d_2[ 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_12[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_13 (Conv2D)   (None, 16, 16,        590,080  batch_normalizat 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_13[0][0]   
 (BatchNormalizatio  256)                                             

 global_average_poo  (None, 256)                 0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape_2 (Reshape)  (None, 1, 1, 256)           0  global_average_p 

 conv2d_14 (Conv2D)   (None, 1, 1, 32)        8,224  reshape_2[0][0]   

 lambda_4 (Lambda)    (None, 16, 16, 1)           0  batch_normalizat 

 lambda_5 (Lambda)    (None, 16, 16, 1)           0  batch_normalizat 

 conv2d_15 (Conv2D)   (None, 1, 1, 256)       8,448  conv2d_14[0][0]   

 concatenate_2        (None, 16, 16, 2)           0  lambda_4[0][0],   
 (Concatenate)                                       lambda_5[0][0]    

 multiply_4           (None, 16, 16,              0  batch_normalizat 
 (Multiply)           256)                           conv2d_15[0][0]   

 conv2d_16 (Conv2D)   (None, 16, 16, 1)          99  concatenate_2[0] 

 multiply_5           (None, 16, 16,              0  multiply_4[0][0], 
 (Multiply)           256)                           conv2d_16[0][0]   

 add_2 (Add)          (None, 16, 16,              0  batch_normalizat 
                      256)                           multiply_5[0][0]  

 max_pooling2d_3      (None, 8, 8, 256)           0  add_2[0][0]       
 (MaxPooling2D)                                                        

 conv2d_17 (Conv2D)   (None, 8, 8, 512)   1,180,160  max_pooling2d_3[ 

 batch_normalizatio  (None, 8, 8, 512)       2,048  conv2d_17[0][0]   
 (BatchNormalizatio                                                   

 dropout (Dropout)    (None, 8, 8, 512)           0  batch_normalizat 

 conv2d_18 (Conv2D)   (None, 8, 8, 512)   2,359,808  dropout[0][0]     

 batch_normalizatio  (None, 8, 8, 512)       2,048  conv2d_18[0][0]   
 (BatchNormalizatio                                                   

 conv2d_transpose     (None, 16, 16,        524,544  batch_normalizat 
 (Conv2DTranspose)    256)                                             

 concatenate_3        (None, 16, 16,              0  conv2d_transpose 
 (Concatenate)        512)                           add_2[0][0]       

 conv2d_19 (Conv2D)   (None, 16, 16,      1,179,904  concatenate_3[0] 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_19[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_20 (Conv2D)   (None, 16, 16,        590,080  batch_normalizat 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_20[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_transpose_1   (None, 32, 32,        131,200  batch_normalizat 
 (Conv2DTranspose)    128)                                             

 concatenate_4        (None, 32, 32,              0  conv2d_transpose 
 (Concatenate)        256)                           add_1[0][0]       

 conv2d_21 (Conv2D)   (None, 32, 32,        295,040  concatenate_4[0] 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_21[0][0]   
 (BatchNormalizatio  128)                                             

 conv2d_22 (Conv2D)   (None, 32, 32,        147,584  batch_normalizat 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_22[0][0]   
 (BatchNormalizatio  128)                                             

 conv2d_transpose_2   (None, 64, 64,         32,832  batch_normalizat 
 (Conv2DTranspose)    64)                                              

 concatenate_5        (None, 64, 64,              0  conv2d_transpose 
 (Concatenate)        128)                           add[0][0]         

 conv2d_23 (Conv2D)   (None, 64, 64,         73,792  concatenate_5[0] 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_23[0][0]   
 (BatchNormalizatio  64)                                              

 conv2d_24 (Conv2D)   (None, 64, 64,         36,928  batch_normalizat 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_24[0][0]   
 (BatchNormalizatio  64)                                              

 conv2d_transpose_3   (None, 128, 128,        8,224  batch_normalizat 
 (Conv2DTranspose)    32)                                              

 concatenate_6        (None, 128, 128,            0  conv2d_transpose 
 (Concatenate)        64)                            batch_normalizat 

 conv2d_25 (Conv2D)   (None, 128, 128,       18,464  concatenate_6[0] 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_25[0][0]   
 (BatchNormalizatio  32)                                              

 conv2d_26 (Conv2D)   (None, 128, 128,        9,248  batch_normalizat 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_26[0][0]   
 (BatchNormalizatio  32)                                              

 enhanced_spectrogr  (None, 128, 128,           33  batch_normalizat 
 (Conv2D)             1)                                               

 Total params: 7,793,602 (29.73 MB)
 Trainable params: 7,787,714 (29.71 MB)
 Non-trainable params: 5,888 (23.00 KB)

2025-03-04 13:25:58.816 | INFO     | willspeak_server.ml.model_integration:initialize_models:75 - Speech enhancement models initialized
2025-03-04 13:25:58.816 | INFO     | willspeak_server.api.server:startup_event:830 - Models initialized on startup
2025-03-04 13:26:02.588 | INFO     | willspeak_server.api.training_data_endpoints:train_from_pairs:450 - Started training job 3da07e11-329d-4ec6-af57-fe5d87566daf for user 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 with 1 pairs
2025-03-04 13:26:02.590 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 13:26:02.591 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:359 - No pre-trained model found
2025-03-04 13:26:08.059 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:926 - Prepared training data: (1, 128, 128, 1), (1, 128, 128, 1)
2025-03-04 13:26:08.060 | INFO     | willspeak_server.ml.model_integration:train_model:130 - Training model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 13:26:08.060 | INFO     | willspeak_server.ml.speech_enhancement_model:train:768 - Mixed precision training enabled
2025-03-04 13:26:08.060 | INFO     | willspeak_server.ml.speech_enhancement_model:train:773 - Starting training with 50 epochs, batch size 32
2025-03-04 13:26:08.061 | INFO     | willspeak_server.ml.speech_enhancement_model:train:794 - Epoch 1/50
2025-03-04 13:26:30.999 | ERROR    | willspeak_server.ml.model_integration:train_model:153 - Error training model: math domain error
2025-03-04 13:26:30.999 | ERROR    | willspeak_server.api.training_data_endpoints:_run_training_job:570 - Training job 3da07e11-329d-4ec6-af57-fe5d87566daf failed: math domain error
2025-03-04 13:26:31.123 | INFO     | willspeak_server.api.server:shutdown_event:845 - Cleanup completed on shutdown
2025-03-04 13:26:40.461 | INFO     | willspeak_server.api.server:<module>:89 - Included training data router from training_data_endpoints.py
2025-03-04 13:26:40.480 | INFO     | willspeak_server.api.server:<module>:799 - Included router from endpoints.py
2025-03-04 13:26:40.480 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/create-pair - {'POST'}
2025-03-04 13:26:40.480 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/upload-clear-template - {'POST'}
2025-03-04 13:26:40.480 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/templates - {'GET'}
2025-03-04 13:26:40.480 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/templates/{template_id} - {'GET'}
2025-03-04 13:26:40.481 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/templates/{template_id}/audio - {'GET'}
2025-03-04 13:26:40.481 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/user-pairs/{user_id} - {'GET'}
2025-03-04 13:26:40.481 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/use-template - {'POST'}
2025-03-04 13:26:40.481 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/train-from-pairs - {'POST'}
2025-03-04 13:26:40.481 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/training-jobs/{user_id} - {'GET'}
2025-03-04 13:26:40.481 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/training-jobs/{job_id}/status - {'GET'}
2025-03-04 13:26:40.481 | INFO     | willspeak_server.api.server:<module>:804 - Route: / - {'GET'}
2025-03-04 13:26:40.481 | INFO     | willspeak_server.api.server:<module>:804 - Route: /process-audio - {'POST'}
2025-03-04 13:26:40.481 | INFO     | willspeak_server.api.server:<module>:804 - Route: /process-audio-for-user - {'POST'}
2025-03-04 13:26:40.481 | INFO     | willspeak_server.api.server:<module>:804 - Route: /debug/audio-test - {'GET'}
2025-03-04 13:26:40.481 | INFO     | willspeak_server.api.server:<module>:804 - Route: /debug/paths - {'GET'}
2025-03-04 13:26:40.481 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/create - {'POST'}
2025-03-04 13:26:40.481 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/list - {'GET'}
2025-03-04 13:26:40.481 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/{user_id} - {'GET'}
2025-03-04 13:26:40.482 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/{user_id}/update - {'POST'}
2025-03-04 13:26:40.482 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training/start - {'POST'}
2025-03-04 13:26:40.482 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training/{session_id}/upload - {'POST'}
2025-03-04 13:26:40.482 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training/{session_id}/complete - {'POST'}
2025-03-04 13:26:40.482 | INFO     | willspeak_server.api.server:<module>:804 - Route: /process-audio-for-user - {'POST'}
2025-03-04 13:26:40.531 | INFO     | willspeak_server.ml.model_integration:initialize_models:65 - Initializing speech enhancement models
2025-03-04 13:26:40.531 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: default
2025-03-04 13:26:40.531 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:359 - No pre-trained model found
2025-03-04 13:26:40.531 | WARNING  | willspeak_server.ml.model_integration:initialize_models:72 - No pre-trained model found. Building new model.
2025-03-04 13:26:40.531 | INFO     | willspeak_server.ml.speech_enhancement_model:build_model:78 - Building improved model with input shape: (128, 128, 1)
2025-03-04 13:26:41.721 | INFO     | keras.src.utils.summary_utils:print_summary:389 - Model: "functional"

 Layer (type)         Output Shape          Param #  Connected to      

 input_spectrogram    (None, 128, 128,            0  -                 
 (InputLayer)         1)                                               

 conv2d (Conv2D)      (None, 128, 128,          320  input_spectrogra 
                      32)                                              

 batch_normalization  (None, 128, 128,          128  conv2d[0][0]      
 (BatchNormalizatio  32)                                              

 conv2d_1 (Conv2D)    (None, 128, 128,        9,248  batch_normalizat 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_1[0][0]    
 (BatchNormalizatio  32)                                              

 max_pooling2d        (None, 64, 64,              0  batch_normalizat 
 (MaxPooling2D)       32)                                              

 conv2d_2 (Conv2D)    (None, 64, 64,         18,496  max_pooling2d[0] 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_2[0][0]    
 (BatchNormalizatio  64)                                              

 conv2d_3 (Conv2D)    (None, 64, 64,         36,928  batch_normalizat 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_3[0][0]    
 (BatchNormalizatio  64)                                              

 global_average_poo  (None, 64)                  0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape (Reshape)    (None, 1, 1, 64)            0  global_average_p 

 conv2d_4 (Conv2D)    (None, 1, 1, 8)           520  reshape[0][0]     

 lambda (Lambda)      (None, 64, 64, 1)           0  batch_normalizat 

 lambda_1 (Lambda)    (None, 64, 64, 1)           0  batch_normalizat 

 conv2d_5 (Conv2D)    (None, 1, 1, 64)          576  conv2d_4[0][0]    

 concatenate          (None, 64, 64, 2)           0  lambda[0][0],     
 (Concatenate)                                       lambda_1[0][0]    

 multiply (Multiply)  (None, 64, 64,              0  batch_normalizat 
                      64)                            conv2d_5[0][0]    

 conv2d_6 (Conv2D)    (None, 64, 64, 1)          99  concatenate[0][0] 

 multiply_1           (None, 64, 64,              0  multiply[0][0],   
 (Multiply)           64)                            conv2d_6[0][0]    

 add (Add)            (None, 64, 64,              0  batch_normalizat 
                      64)                            multiply_1[0][0]  

 max_pooling2d_1      (None, 32, 32,              0  add[0][0]         
 (MaxPooling2D)       64)                                              

 conv2d_7 (Conv2D)    (None, 32, 32,         73,856  max_pooling2d_1[ 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_7[0][0]    
 (BatchNormalizatio  128)                                             

 conv2d_8 (Conv2D)    (None, 32, 32,        147,584  batch_normalizat 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_8[0][0]    
 (BatchNormalizatio  128)                                             

 global_average_poo  (None, 128)                 0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape_1 (Reshape)  (None, 1, 1, 128)           0  global_average_p 

 conv2d_9 (Conv2D)    (None, 1, 1, 16)        2,064  reshape_1[0][0]   

 lambda_2 (Lambda)    (None, 32, 32, 1)           0  batch_normalizat 

 lambda_3 (Lambda)    (None, 32, 32, 1)           0  batch_normalizat 

 conv2d_10 (Conv2D)   (None, 1, 1, 128)       2,176  conv2d_9[0][0]    

 concatenate_1        (None, 32, 32, 2)           0  lambda_2[0][0],   
 (Concatenate)                                       lambda_3[0][0]    

 multiply_2           (None, 32, 32,              0  batch_normalizat 
 (Multiply)           128)                           conv2d_10[0][0]   

 conv2d_11 (Conv2D)   (None, 32, 32, 1)          99  concatenate_1[0] 

 multiply_3           (None, 32, 32,              0  multiply_2[0][0], 
 (Multiply)           128)                           conv2d_11[0][0]   

 add_1 (Add)          (None, 32, 32,              0  batch_normalizat 
                      128)                           multiply_3[0][0]  

 max_pooling2d_2      (None, 16, 16,              0  add_1[0][0]       
 (MaxPooling2D)       128)                                             

 conv2d_12 (Conv2D)   (None, 16, 16,        295,168  max_pooling2d_2[ 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_12[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_13 (Conv2D)   (None, 16, 16,        590,080  batch_normalizat 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_13[0][0]   
 (BatchNormalizatio  256)                                             

 global_average_poo  (None, 256)                 0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape_2 (Reshape)  (None, 1, 1, 256)           0  global_average_p 

 conv2d_14 (Conv2D)   (None, 1, 1, 32)        8,224  reshape_2[0][0]   

 lambda_4 (Lambda)    (None, 16, 16, 1)           0  batch_normalizat 

 lambda_5 (Lambda)    (None, 16, 16, 1)           0  batch_normalizat 

 conv2d_15 (Conv2D)   (None, 1, 1, 256)       8,448  conv2d_14[0][0]   

 concatenate_2        (None, 16, 16, 2)           0  lambda_4[0][0],   
 (Concatenate)                                       lambda_5[0][0]    

 multiply_4           (None, 16, 16,              0  batch_normalizat 
 (Multiply)           256)                           conv2d_15[0][0]   

 conv2d_16 (Conv2D)   (None, 16, 16, 1)          99  concatenate_2[0] 

 multiply_5           (None, 16, 16,              0  multiply_4[0][0], 
 (Multiply)           256)                           conv2d_16[0][0]   

 add_2 (Add)          (None, 16, 16,              0  batch_normalizat 
                      256)                           multiply_5[0][0]  

 max_pooling2d_3      (None, 8, 8, 256)           0  add_2[0][0]       
 (MaxPooling2D)                                                        

 conv2d_17 (Conv2D)   (None, 8, 8, 512)   1,180,160  max_pooling2d_3[ 

 batch_normalizatio  (None, 8, 8, 512)       2,048  conv2d_17[0][0]   
 (BatchNormalizatio                                                   

 dropout (Dropout)    (None, 8, 8, 512)           0  batch_normalizat 

 conv2d_18 (Conv2D)   (None, 8, 8, 512)   2,359,808  dropout[0][0]     

 batch_normalizatio  (None, 8, 8, 512)       2,048  conv2d_18[0][0]   
 (BatchNormalizatio                                                   

 conv2d_transpose     (None, 16, 16,        524,544  batch_normalizat 
 (Conv2DTranspose)    256)                                             

 concatenate_3        (None, 16, 16,              0  conv2d_transpose 
 (Concatenate)        512)                           add_2[0][0]       

 conv2d_19 (Conv2D)   (None, 16, 16,      1,179,904  concatenate_3[0] 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_19[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_20 (Conv2D)   (None, 16, 16,        590,080  batch_normalizat 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_20[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_transpose_1   (None, 32, 32,        131,200  batch_normalizat 
 (Conv2DTranspose)    128)                                             

 concatenate_4        (None, 32, 32,              0  conv2d_transpose 
 (Concatenate)        256)                           add_1[0][0]       

 conv2d_21 (Conv2D)   (None, 32, 32,        295,040  concatenate_4[0] 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_21[0][0]   
 (BatchNormalizatio  128)                                             

 conv2d_22 (Conv2D)   (None, 32, 32,        147,584  batch_normalizat 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_22[0][0]   
 (BatchNormalizatio  128)                                             

 conv2d_transpose_2   (None, 64, 64,         32,832  batch_normalizat 
 (Conv2DTranspose)    64)                                              

 concatenate_5        (None, 64, 64,              0  conv2d_transpose 
 (Concatenate)        128)                           add[0][0]         

 conv2d_23 (Conv2D)   (None, 64, 64,         73,792  concatenate_5[0] 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_23[0][0]   
 (BatchNormalizatio  64)                                              

 conv2d_24 (Conv2D)   (None, 64, 64,         36,928  batch_normalizat 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_24[0][0]   
 (BatchNormalizatio  64)                                              

 conv2d_transpose_3   (None, 128, 128,        8,224  batch_normalizat 
 (Conv2DTranspose)    32)                                              

 concatenate_6        (None, 128, 128,            0  conv2d_transpose 
 (Concatenate)        64)                            batch_normalizat 

 conv2d_25 (Conv2D)   (None, 128, 128,       18,464  concatenate_6[0] 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_25[0][0]   
 (BatchNormalizatio  32)                                              

 conv2d_26 (Conv2D)   (None, 128, 128,        9,248  batch_normalizat 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_26[0][0]   
 (BatchNormalizatio  32)                                              

 enhanced_spectrogr  (None, 128, 128,           33  batch_normalizat 
 (Conv2D)             1)                                               

 Total params: 7,793,602 (29.73 MB)
 Trainable params: 7,787,714 (29.71 MB)
 Non-trainable params: 5,888 (23.00 KB)

2025-03-04 13:26:41.723 | INFO     | willspeak_server.ml.model_integration:initialize_models:75 - Speech enhancement models initialized
2025-03-04 13:26:41.723 | INFO     | willspeak_server.api.server:startup_event:830 - Models initialized on startup
2025-03-04 13:26:53.337 | INFO     | willspeak_server.api.training_data_endpoints:train_from_pairs:450 - Started training job d0797b9f-9e21-4901-aa9a-c279507eef64 for user 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 with 1 pairs
2025-03-04 13:26:53.339 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 13:26:53.339 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:359 - No pre-trained model found
2025-03-04 13:26:56.743 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:915 - Prepared training data: (1, 128, 128, 1), (1, 128, 128, 1)
2025-03-04 13:26:56.744 | INFO     | willspeak_server.ml.model_integration:train_model:130 - Training model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 13:26:56.744 | INFO     | willspeak_server.ml.speech_enhancement_model:train:734 - Adjusted batch_size to 0 due to small dataset (0 samples)
2025-03-04 13:26:56.744 | INFO     | willspeak_server.ml.speech_enhancement_model:train:784 - Epoch 1/50
2025-03-04 13:27:13.736 | ERROR    | willspeak_server.ml.speech_enhancement_model:train:812 - Error during training epoch 1: math domain error
2025-03-04 13:27:13.736 | ERROR    | willspeak_server.ml.model_integration:train_model:153 - Error training model: math domain error
2025-03-04 13:27:13.736 | ERROR    | willspeak_server.api.training_data_endpoints:_run_training_job:570 - Training job d0797b9f-9e21-4901-aa9a-c279507eef64 failed: math domain error
2025-03-04 13:31:55.636 | INFO     | willspeak_server.api.training_data_endpoints:train_from_pairs:450 - Started training job f89572e7-53b1-42bf-bbba-007108fae148 for user 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 with 1 pairs
2025-03-04 13:31:55.644 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 13:31:55.645 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:359 - No pre-trained model found
2025-03-04 13:31:56.486 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:915 - Prepared training data: (1, 128, 128, 1), (1, 128, 128, 1)
2025-03-04 13:31:56.487 | INFO     | willspeak_server.ml.model_integration:train_model:130 - Training model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 13:31:56.487 | INFO     | willspeak_server.ml.speech_enhancement_model:train:734 - Adjusted batch_size to 0 due to small dataset (0 samples)
2025-03-04 13:31:56.490 | INFO     | willspeak_server.ml.speech_enhancement_model:train:784 - Epoch 1/50
2025-03-04 13:32:00.093 | ERROR    | willspeak_server.ml.speech_enhancement_model:train:812 - Error during training epoch 1: math domain error
2025-03-04 13:32:00.095 | ERROR    | willspeak_server.ml.model_integration:train_model:153 - Error training model: math domain error
2025-03-04 13:32:00.095 | ERROR    | willspeak_server.api.training_data_endpoints:_run_training_job:570 - Training job f89572e7-53b1-42bf-bbba-007108fae148 failed: math domain error
2025-03-04 13:47:54.395 | INFO     | willspeak_server.api.server:<module>:89 - Included training data router from training_data_endpoints.py
2025-03-04 13:47:54.417 | INFO     | willspeak_server.api.server:<module>:799 - Included router from endpoints.py
2025-03-04 13:47:54.418 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/create-pair - {'POST'}
2025-03-04 13:47:54.418 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/upload-clear-template - {'POST'}
2025-03-04 13:47:54.418 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/templates - {'GET'}
2025-03-04 13:47:54.418 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/templates/{template_id} - {'GET'}
2025-03-04 13:47:54.418 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/templates/{template_id}/audio - {'GET'}
2025-03-04 13:47:54.418 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/user-pairs/{user_id} - {'GET'}
2025-03-04 13:47:54.418 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/use-template - {'POST'}
2025-03-04 13:47:54.418 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/train-from-pairs - {'POST'}
2025-03-04 13:47:54.418 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/training-jobs/{user_id} - {'GET'}
2025-03-04 13:47:54.418 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/training-jobs/{job_id}/status - {'GET'}
2025-03-04 13:47:54.418 | INFO     | willspeak_server.api.server:<module>:804 - Route: / - {'GET'}
2025-03-04 13:47:54.419 | INFO     | willspeak_server.api.server:<module>:804 - Route: /process-audio - {'POST'}
2025-03-04 13:47:54.419 | INFO     | willspeak_server.api.server:<module>:804 - Route: /process-audio-for-user - {'POST'}
2025-03-04 13:47:54.419 | INFO     | willspeak_server.api.server:<module>:804 - Route: /debug/audio-test - {'GET'}
2025-03-04 13:47:54.419 | INFO     | willspeak_server.api.server:<module>:804 - Route: /debug/paths - {'GET'}
2025-03-04 13:47:54.419 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/create - {'POST'}
2025-03-04 13:47:54.419 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/list - {'GET'}
2025-03-04 13:47:54.419 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/{user_id} - {'GET'}
2025-03-04 13:47:54.420 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/{user_id}/update - {'POST'}
2025-03-04 13:47:54.420 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training/start - {'POST'}
2025-03-04 13:47:54.420 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training/{session_id}/upload - {'POST'}
2025-03-04 13:47:54.420 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training/{session_id}/complete - {'POST'}
2025-03-04 13:47:54.420 | INFO     | willspeak_server.api.server:<module>:804 - Route: /process-audio-for-user - {'POST'}
2025-03-04 13:47:54.423 | INFO     | willspeak_server.ml.model_integration:initialize_models:65 - Initializing speech enhancement models
2025-03-04 13:47:54.423 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: default
2025-03-04 13:47:54.423 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:359 - No pre-trained model found
2025-03-04 13:47:54.423 | WARNING  | willspeak_server.ml.model_integration:initialize_models:72 - No pre-trained model found. Building new model.
2025-03-04 13:47:54.423 | INFO     | willspeak_server.ml.speech_enhancement_model:build_model:78 - Building improved model with input shape: (128, 128, 1)
2025-03-04 13:47:55.600 | INFO     | keras.src.utils.summary_utils:print_summary:389 - Model: "functional"

 Layer (type)         Output Shape          Param #  Connected to      

 input_spectrogram    (None, 128, 128,            0  -                 
 (InputLayer)         1)                                               

 conv2d (Conv2D)      (None, 128, 128,          320  input_spectrogra 
                      32)                                              

 batch_normalization  (None, 128, 128,          128  conv2d[0][0]      
 (BatchNormalizatio  32)                                              

 conv2d_1 (Conv2D)    (None, 128, 128,        9,248  batch_normalizat 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_1[0][0]    
 (BatchNormalizatio  32)                                              

 max_pooling2d        (None, 64, 64,              0  batch_normalizat 
 (MaxPooling2D)       32)                                              

 conv2d_2 (Conv2D)    (None, 64, 64,         18,496  max_pooling2d[0] 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_2[0][0]    
 (BatchNormalizatio  64)                                              

 conv2d_3 (Conv2D)    (None, 64, 64,         36,928  batch_normalizat 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_3[0][0]    
 (BatchNormalizatio  64)                                              

 global_average_poo  (None, 64)                  0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape (Reshape)    (None, 1, 1, 64)            0  global_average_p 

 conv2d_4 (Conv2D)    (None, 1, 1, 8)           520  reshape[0][0]     

 lambda (Lambda)      (None, 64, 64, 1)           0  batch_normalizat 

 lambda_1 (Lambda)    (None, 64, 64, 1)           0  batch_normalizat 

 conv2d_5 (Conv2D)    (None, 1, 1, 64)          576  conv2d_4[0][0]    

 concatenate          (None, 64, 64, 2)           0  lambda[0][0],     
 (Concatenate)                                       lambda_1[0][0]    

 multiply (Multiply)  (None, 64, 64,              0  batch_normalizat 
                      64)                            conv2d_5[0][0]    

 conv2d_6 (Conv2D)    (None, 64, 64, 1)          99  concatenate[0][0] 

 multiply_1           (None, 64, 64,              0  multiply[0][0],   
 (Multiply)           64)                            conv2d_6[0][0]    

 add (Add)            (None, 64, 64,              0  batch_normalizat 
                      64)                            multiply_1[0][0]  

 max_pooling2d_1      (None, 32, 32,              0  add[0][0]         
 (MaxPooling2D)       64)                                              

 conv2d_7 (Conv2D)    (None, 32, 32,         73,856  max_pooling2d_1[ 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_7[0][0]    
 (BatchNormalizatio  128)                                             

 conv2d_8 (Conv2D)    (None, 32, 32,        147,584  batch_normalizat 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_8[0][0]    
 (BatchNormalizatio  128)                                             

 global_average_poo  (None, 128)                 0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape_1 (Reshape)  (None, 1, 1, 128)           0  global_average_p 

 conv2d_9 (Conv2D)    (None, 1, 1, 16)        2,064  reshape_1[0][0]   

 lambda_2 (Lambda)    (None, 32, 32, 1)           0  batch_normalizat 

 lambda_3 (Lambda)    (None, 32, 32, 1)           0  batch_normalizat 

 conv2d_10 (Conv2D)   (None, 1, 1, 128)       2,176  conv2d_9[0][0]    

 concatenate_1        (None, 32, 32, 2)           0  lambda_2[0][0],   
 (Concatenate)                                       lambda_3[0][0]    

 multiply_2           (None, 32, 32,              0  batch_normalizat 
 (Multiply)           128)                           conv2d_10[0][0]   

 conv2d_11 (Conv2D)   (None, 32, 32, 1)          99  concatenate_1[0] 

 multiply_3           (None, 32, 32,              0  multiply_2[0][0], 
 (Multiply)           128)                           conv2d_11[0][0]   

 add_1 (Add)          (None, 32, 32,              0  batch_normalizat 
                      128)                           multiply_3[0][0]  

 max_pooling2d_2      (None, 16, 16,              0  add_1[0][0]       
 (MaxPooling2D)       128)                                             

 conv2d_12 (Conv2D)   (None, 16, 16,        295,168  max_pooling2d_2[ 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_12[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_13 (Conv2D)   (None, 16, 16,        590,080  batch_normalizat 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_13[0][0]   
 (BatchNormalizatio  256)                                             

 global_average_poo  (None, 256)                 0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape_2 (Reshape)  (None, 1, 1, 256)           0  global_average_p 

 conv2d_14 (Conv2D)   (None, 1, 1, 32)        8,224  reshape_2[0][0]   

 lambda_4 (Lambda)    (None, 16, 16, 1)           0  batch_normalizat 

 lambda_5 (Lambda)    (None, 16, 16, 1)           0  batch_normalizat 

 conv2d_15 (Conv2D)   (None, 1, 1, 256)       8,448  conv2d_14[0][0]   

 concatenate_2        (None, 16, 16, 2)           0  lambda_4[0][0],   
 (Concatenate)                                       lambda_5[0][0]    

 multiply_4           (None, 16, 16,              0  batch_normalizat 
 (Multiply)           256)                           conv2d_15[0][0]   

 conv2d_16 (Conv2D)   (None, 16, 16, 1)          99  concatenate_2[0] 

 multiply_5           (None, 16, 16,              0  multiply_4[0][0], 
 (Multiply)           256)                           conv2d_16[0][0]   

 add_2 (Add)          (None, 16, 16,              0  batch_normalizat 
                      256)                           multiply_5[0][0]  

 max_pooling2d_3      (None, 8, 8, 256)           0  add_2[0][0]       
 (MaxPooling2D)                                                        

 conv2d_17 (Conv2D)   (None, 8, 8, 512)   1,180,160  max_pooling2d_3[ 

 batch_normalizatio  (None, 8, 8, 512)       2,048  conv2d_17[0][0]   
 (BatchNormalizatio                                                   

 dropout (Dropout)    (None, 8, 8, 512)           0  batch_normalizat 

 conv2d_18 (Conv2D)   (None, 8, 8, 512)   2,359,808  dropout[0][0]     

 batch_normalizatio  (None, 8, 8, 512)       2,048  conv2d_18[0][0]   
 (BatchNormalizatio                                                   

 conv2d_transpose     (None, 16, 16,        524,544  batch_normalizat 
 (Conv2DTranspose)    256)                                             

 concatenate_3        (None, 16, 16,              0  conv2d_transpose 
 (Concatenate)        512)                           add_2[0][0]       

 conv2d_19 (Conv2D)   (None, 16, 16,      1,179,904  concatenate_3[0] 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_19[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_20 (Conv2D)   (None, 16, 16,        590,080  batch_normalizat 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_20[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_transpose_1   (None, 32, 32,        131,200  batch_normalizat 
 (Conv2DTranspose)    128)                                             

 concatenate_4        (None, 32, 32,              0  conv2d_transpose 
 (Concatenate)        256)                           add_1[0][0]       

 conv2d_21 (Conv2D)   (None, 32, 32,        295,040  concatenate_4[0] 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_21[0][0]   
 (BatchNormalizatio  128)                                             

 conv2d_22 (Conv2D)   (None, 32, 32,        147,584  batch_normalizat 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_22[0][0]   
 (BatchNormalizatio  128)                                             

 conv2d_transpose_2   (None, 64, 64,         32,832  batch_normalizat 
 (Conv2DTranspose)    64)                                              

 concatenate_5        (None, 64, 64,              0  conv2d_transpose 
 (Concatenate)        128)                           add[0][0]         

 conv2d_23 (Conv2D)   (None, 64, 64,         73,792  concatenate_5[0] 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_23[0][0]   
 (BatchNormalizatio  64)                                              

 conv2d_24 (Conv2D)   (None, 64, 64,         36,928  batch_normalizat 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_24[0][0]   
 (BatchNormalizatio  64)                                              

 conv2d_transpose_3   (None, 128, 128,        8,224  batch_normalizat 
 (Conv2DTranspose)    32)                                              

 concatenate_6        (None, 128, 128,            0  conv2d_transpose 
 (Concatenate)        64)                            batch_normalizat 

 conv2d_25 (Conv2D)   (None, 128, 128,       18,464  concatenate_6[0] 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_25[0][0]   
 (BatchNormalizatio  32)                                              

 conv2d_26 (Conv2D)   (None, 128, 128,        9,248  batch_normalizat 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_26[0][0]   
 (BatchNormalizatio  32)                                              

 enhanced_spectrogr  (None, 128, 128,           33  batch_normalizat 
 (Conv2D)             1)                                               

 Total params: 7,793,602 (29.73 MB)
 Trainable params: 7,787,714 (29.71 MB)
 Non-trainable params: 5,888 (23.00 KB)

2025-03-04 13:47:55.601 | INFO     | willspeak_server.ml.model_integration:initialize_models:75 - Speech enhancement models initialized
2025-03-04 13:48:11.655 | INFO     | willspeak_server.api.server:<module>:89 - Included training data router from training_data_endpoints.py
2025-03-04 13:48:11.674 | INFO     | willspeak_server.api.server:<module>:799 - Included router from endpoints.py
2025-03-04 13:48:11.674 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/create-pair - {'POST'}
2025-03-04 13:48:11.675 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/upload-clear-template - {'POST'}
2025-03-04 13:48:11.675 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/templates - {'GET'}
2025-03-04 13:48:11.675 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/templates/{template_id} - {'GET'}
2025-03-04 13:48:11.675 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/templates/{template_id}/audio - {'GET'}
2025-03-04 13:48:11.675 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/user-pairs/{user_id} - {'GET'}
2025-03-04 13:48:11.675 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/use-template - {'POST'}
2025-03-04 13:48:11.675 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/train-from-pairs - {'POST'}
2025-03-04 13:48:11.675 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/training-jobs/{user_id} - {'GET'}
2025-03-04 13:48:11.675 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/training-jobs/{job_id}/status - {'GET'}
2025-03-04 13:48:11.675 | INFO     | willspeak_server.api.server:<module>:804 - Route: / - {'GET'}
2025-03-04 13:48:11.675 | INFO     | willspeak_server.api.server:<module>:804 - Route: /process-audio - {'POST'}
2025-03-04 13:48:11.676 | INFO     | willspeak_server.api.server:<module>:804 - Route: /process-audio-for-user - {'POST'}
2025-03-04 13:48:11.676 | INFO     | willspeak_server.api.server:<module>:804 - Route: /debug/audio-test - {'GET'}
2025-03-04 13:48:11.676 | INFO     | willspeak_server.api.server:<module>:804 - Route: /debug/paths - {'GET'}
2025-03-04 13:48:11.676 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/create - {'POST'}
2025-03-04 13:48:11.676 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/list - {'GET'}
2025-03-04 13:48:11.676 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/{user_id} - {'GET'}
2025-03-04 13:48:11.676 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/{user_id}/update - {'POST'}
2025-03-04 13:48:11.676 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training/start - {'POST'}
2025-03-04 13:48:11.676 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training/{session_id}/upload - {'POST'}
2025-03-04 13:48:11.676 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training/{session_id}/complete - {'POST'}
2025-03-04 13:48:11.676 | INFO     | willspeak_server.api.server:<module>:804 - Route: /process-audio-for-user - {'POST'}
2025-03-04 13:48:11.678 | INFO     | willspeak_server.ml.model_integration:initialize_models:65 - Initializing speech enhancement models
2025-03-04 13:48:11.678 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: default
2025-03-04 13:48:11.678 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:359 - No pre-trained model found
2025-03-04 13:48:11.678 | WARNING  | willspeak_server.ml.model_integration:initialize_models:72 - No pre-trained model found. Building new model.
2025-03-04 13:48:11.678 | INFO     | willspeak_server.ml.speech_enhancement_model:build_model:78 - Building improved model with input shape: (128, 128, 1)
2025-03-04 13:48:13.137 | INFO     | keras.src.utils.summary_utils:print_summary:389 - Model: "functional"

 Layer (type)         Output Shape          Param #  Connected to      

 input_spectrogram    (None, 128, 128,            0  -                 
 (InputLayer)         1)                                               

 conv2d (Conv2D)      (None, 128, 128,          320  input_spectrogra 
                      32)                                              

 batch_normalization  (None, 128, 128,          128  conv2d[0][0]      
 (BatchNormalizatio  32)                                              

 conv2d_1 (Conv2D)    (None, 128, 128,        9,248  batch_normalizat 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_1[0][0]    
 (BatchNormalizatio  32)                                              

 max_pooling2d        (None, 64, 64,              0  batch_normalizat 
 (MaxPooling2D)       32)                                              

 conv2d_2 (Conv2D)    (None, 64, 64,         18,496  max_pooling2d[0] 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_2[0][0]    
 (BatchNormalizatio  64)                                              

 conv2d_3 (Conv2D)    (None, 64, 64,         36,928  batch_normalizat 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_3[0][0]    
 (BatchNormalizatio  64)                                              

 global_average_poo  (None, 64)                  0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape (Reshape)    (None, 1, 1, 64)            0  global_average_p 

 conv2d_4 (Conv2D)    (None, 1, 1, 8)           520  reshape[0][0]     

 lambda (Lambda)      (None, 64, 64, 1)           0  batch_normalizat 

 lambda_1 (Lambda)    (None, 64, 64, 1)           0  batch_normalizat 

 conv2d_5 (Conv2D)    (None, 1, 1, 64)          576  conv2d_4[0][0]    

 concatenate          (None, 64, 64, 2)           0  lambda[0][0],     
 (Concatenate)                                       lambda_1[0][0]    

 multiply (Multiply)  (None, 64, 64,              0  batch_normalizat 
                      64)                            conv2d_5[0][0]    

 conv2d_6 (Conv2D)    (None, 64, 64, 1)          99  concatenate[0][0] 

 multiply_1           (None, 64, 64,              0  multiply[0][0],   
 (Multiply)           64)                            conv2d_6[0][0]    

 add (Add)            (None, 64, 64,              0  batch_normalizat 
                      64)                            multiply_1[0][0]  

 max_pooling2d_1      (None, 32, 32,              0  add[0][0]         
 (MaxPooling2D)       64)                                              

 conv2d_7 (Conv2D)    (None, 32, 32,         73,856  max_pooling2d_1[ 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_7[0][0]    
 (BatchNormalizatio  128)                                             

 conv2d_8 (Conv2D)    (None, 32, 32,        147,584  batch_normalizat 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_8[0][0]    
 (BatchNormalizatio  128)                                             

 global_average_poo  (None, 128)                 0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape_1 (Reshape)  (None, 1, 1, 128)           0  global_average_p 

 conv2d_9 (Conv2D)    (None, 1, 1, 16)        2,064  reshape_1[0][0]   

 lambda_2 (Lambda)    (None, 32, 32, 1)           0  batch_normalizat 

 lambda_3 (Lambda)    (None, 32, 32, 1)           0  batch_normalizat 

 conv2d_10 (Conv2D)   (None, 1, 1, 128)       2,176  conv2d_9[0][0]    

 concatenate_1        (None, 32, 32, 2)           0  lambda_2[0][0],   
 (Concatenate)                                       lambda_3[0][0]    

 multiply_2           (None, 32, 32,              0  batch_normalizat 
 (Multiply)           128)                           conv2d_10[0][0]   

 conv2d_11 (Conv2D)   (None, 32, 32, 1)          99  concatenate_1[0] 

 multiply_3           (None, 32, 32,              0  multiply_2[0][0], 
 (Multiply)           128)                           conv2d_11[0][0]   

 add_1 (Add)          (None, 32, 32,              0  batch_normalizat 
                      128)                           multiply_3[0][0]  

 max_pooling2d_2      (None, 16, 16,              0  add_1[0][0]       
 (MaxPooling2D)       128)                                             

 conv2d_12 (Conv2D)   (None, 16, 16,        295,168  max_pooling2d_2[ 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_12[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_13 (Conv2D)   (None, 16, 16,        590,080  batch_normalizat 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_13[0][0]   
 (BatchNormalizatio  256)                                             

 global_average_poo  (None, 256)                 0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape_2 (Reshape)  (None, 1, 1, 256)           0  global_average_p 

 conv2d_14 (Conv2D)   (None, 1, 1, 32)        8,224  reshape_2[0][0]   

 lambda_4 (Lambda)    (None, 16, 16, 1)           0  batch_normalizat 

 lambda_5 (Lambda)    (None, 16, 16, 1)           0  batch_normalizat 

 conv2d_15 (Conv2D)   (None, 1, 1, 256)       8,448  conv2d_14[0][0]   

 concatenate_2        (None, 16, 16, 2)           0  lambda_4[0][0],   
 (Concatenate)                                       lambda_5[0][0]    

 multiply_4           (None, 16, 16,              0  batch_normalizat 
 (Multiply)           256)                           conv2d_15[0][0]   

 conv2d_16 (Conv2D)   (None, 16, 16, 1)          99  concatenate_2[0] 

 multiply_5           (None, 16, 16,              0  multiply_4[0][0], 
 (Multiply)           256)                           conv2d_16[0][0]   

 add_2 (Add)          (None, 16, 16,              0  batch_normalizat 
                      256)                           multiply_5[0][0]  

 max_pooling2d_3      (None, 8, 8, 256)           0  add_2[0][0]       
 (MaxPooling2D)                                                        

 conv2d_17 (Conv2D)   (None, 8, 8, 512)   1,180,160  max_pooling2d_3[ 

 batch_normalizatio  (None, 8, 8, 512)       2,048  conv2d_17[0][0]   
 (BatchNormalizatio                                                   

 dropout (Dropout)    (None, 8, 8, 512)           0  batch_normalizat 

 conv2d_18 (Conv2D)   (None, 8, 8, 512)   2,359,808  dropout[0][0]     

 batch_normalizatio  (None, 8, 8, 512)       2,048  conv2d_18[0][0]   
 (BatchNormalizatio                                                   

 conv2d_transpose     (None, 16, 16,        524,544  batch_normalizat 
 (Conv2DTranspose)    256)                                             

 concatenate_3        (None, 16, 16,              0  conv2d_transpose 
 (Concatenate)        512)                           add_2[0][0]       

 conv2d_19 (Conv2D)   (None, 16, 16,      1,179,904  concatenate_3[0] 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_19[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_20 (Conv2D)   (None, 16, 16,        590,080  batch_normalizat 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_20[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_transpose_1   (None, 32, 32,        131,200  batch_normalizat 
 (Conv2DTranspose)    128)                                             

 concatenate_4        (None, 32, 32,              0  conv2d_transpose 
 (Concatenate)        256)                           add_1[0][0]       

 conv2d_21 (Conv2D)   (None, 32, 32,        295,040  concatenate_4[0] 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_21[0][0]   
 (BatchNormalizatio  128)                                             

 conv2d_22 (Conv2D)   (None, 32, 32,        147,584  batch_normalizat 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_22[0][0]   
 (BatchNormalizatio  128)                                             

 conv2d_transpose_2   (None, 64, 64,         32,832  batch_normalizat 
 (Conv2DTranspose)    64)                                              

 concatenate_5        (None, 64, 64,              0  conv2d_transpose 
 (Concatenate)        128)                           add[0][0]         

 conv2d_23 (Conv2D)   (None, 64, 64,         73,792  concatenate_5[0] 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_23[0][0]   
 (BatchNormalizatio  64)                                              

 conv2d_24 (Conv2D)   (None, 64, 64,         36,928  batch_normalizat 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_24[0][0]   
 (BatchNormalizatio  64)                                              

 conv2d_transpose_3   (None, 128, 128,        8,224  batch_normalizat 
 (Conv2DTranspose)    32)                                              

 concatenate_6        (None, 128, 128,            0  conv2d_transpose 
 (Concatenate)        64)                            batch_normalizat 

 conv2d_25 (Conv2D)   (None, 128, 128,       18,464  concatenate_6[0] 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_25[0][0]   
 (BatchNormalizatio  32)                                              

 conv2d_26 (Conv2D)   (None, 128, 128,        9,248  batch_normalizat 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_26[0][0]   
 (BatchNormalizatio  32)                                              

 enhanced_spectrogr  (None, 128, 128,           33  batch_normalizat 
 (Conv2D)             1)                                               

 Total params: 7,793,602 (29.73 MB)
 Trainable params: 7,787,714 (29.71 MB)
 Non-trainable params: 5,888 (23.00 KB)

2025-03-04 13:48:13.139 | INFO     | willspeak_server.ml.model_integration:initialize_models:75 - Speech enhancement models initialized
2025-03-04 13:48:17.409 | INFO     | willspeak_server.api.server:<module>:89 - Included training data router from training_data_endpoints.py
2025-03-04 13:48:17.433 | INFO     | willspeak_server.api.server:<module>:799 - Included router from endpoints.py
2025-03-04 13:48:17.433 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/create-pair - {'POST'}
2025-03-04 13:48:17.433 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/upload-clear-template - {'POST'}
2025-03-04 13:48:17.434 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/templates - {'GET'}
2025-03-04 13:48:17.434 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/templates/{template_id} - {'GET'}
2025-03-04 13:48:17.434 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/templates/{template_id}/audio - {'GET'}
2025-03-04 13:48:17.434 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/user-pairs/{user_id} - {'GET'}
2025-03-04 13:48:17.434 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/use-template - {'POST'}
2025-03-04 13:48:17.434 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/train-from-pairs - {'POST'}
2025-03-04 13:48:17.434 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/training-jobs/{user_id} - {'GET'}
2025-03-04 13:48:17.434 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/training-jobs/{job_id}/status - {'GET'}
2025-03-04 13:48:17.434 | INFO     | willspeak_server.api.server:<module>:804 - Route: / - {'GET'}
2025-03-04 13:48:17.434 | INFO     | willspeak_server.api.server:<module>:804 - Route: /process-audio - {'POST'}
2025-03-04 13:48:17.434 | INFO     | willspeak_server.api.server:<module>:804 - Route: /process-audio-for-user - {'POST'}
2025-03-04 13:48:17.434 | INFO     | willspeak_server.api.server:<module>:804 - Route: /debug/audio-test - {'GET'}
2025-03-04 13:48:17.434 | INFO     | willspeak_server.api.server:<module>:804 - Route: /debug/paths - {'GET'}
2025-03-04 13:48:17.434 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/create - {'POST'}
2025-03-04 13:48:17.434 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/list - {'GET'}
2025-03-04 13:48:17.434 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/{user_id} - {'GET'}
2025-03-04 13:48:17.435 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/{user_id}/update - {'POST'}
2025-03-04 13:48:17.435 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training/start - {'POST'}
2025-03-04 13:48:17.435 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training/{session_id}/upload - {'POST'}
2025-03-04 13:48:17.435 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training/{session_id}/complete - {'POST'}
2025-03-04 13:48:17.435 | INFO     | willspeak_server.api.server:<module>:804 - Route: /process-audio-for-user - {'POST'}
2025-03-04 13:48:17.505 | INFO     | willspeak_server.ml.model_integration:initialize_models:65 - Initializing speech enhancement models
2025-03-04 13:48:17.506 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: default
2025-03-04 13:48:17.506 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:359 - No pre-trained model found
2025-03-04 13:48:17.506 | WARNING  | willspeak_server.ml.model_integration:initialize_models:72 - No pre-trained model found. Building new model.
2025-03-04 13:48:17.506 | INFO     | willspeak_server.ml.speech_enhancement_model:build_model:78 - Building improved model with input shape: (128, 128, 1)
2025-03-04 13:48:18.735 | INFO     | keras.src.utils.summary_utils:print_summary:389 - Model: "functional"

 Layer (type)         Output Shape          Param #  Connected to      

 input_spectrogram    (None, 128, 128,            0  -                 
 (InputLayer)         1)                                               

 conv2d (Conv2D)      (None, 128, 128,          320  input_spectrogra 
                      32)                                              

 batch_normalization  (None, 128, 128,          128  conv2d[0][0]      
 (BatchNormalizatio  32)                                              

 conv2d_1 (Conv2D)    (None, 128, 128,        9,248  batch_normalizat 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_1[0][0]    
 (BatchNormalizatio  32)                                              

 max_pooling2d        (None, 64, 64,              0  batch_normalizat 
 (MaxPooling2D)       32)                                              

 conv2d_2 (Conv2D)    (None, 64, 64,         18,496  max_pooling2d[0] 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_2[0][0]    
 (BatchNormalizatio  64)                                              

 conv2d_3 (Conv2D)    (None, 64, 64,         36,928  batch_normalizat 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_3[0][0]    
 (BatchNormalizatio  64)                                              

 global_average_poo  (None, 64)                  0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape (Reshape)    (None, 1, 1, 64)            0  global_average_p 

 conv2d_4 (Conv2D)    (None, 1, 1, 8)           520  reshape[0][0]     

 lambda (Lambda)      (None, 64, 64, 1)           0  batch_normalizat 

 lambda_1 (Lambda)    (None, 64, 64, 1)           0  batch_normalizat 

 conv2d_5 (Conv2D)    (None, 1, 1, 64)          576  conv2d_4[0][0]    

 concatenate          (None, 64, 64, 2)           0  lambda[0][0],     
 (Concatenate)                                       lambda_1[0][0]    

 multiply (Multiply)  (None, 64, 64,              0  batch_normalizat 
                      64)                            conv2d_5[0][0]    

 conv2d_6 (Conv2D)    (None, 64, 64, 1)          99  concatenate[0][0] 

 multiply_1           (None, 64, 64,              0  multiply[0][0],   
 (Multiply)           64)                            conv2d_6[0][0]    

 add (Add)            (None, 64, 64,              0  batch_normalizat 
                      64)                            multiply_1[0][0]  

 max_pooling2d_1      (None, 32, 32,              0  add[0][0]         
 (MaxPooling2D)       64)                                              

 conv2d_7 (Conv2D)    (None, 32, 32,         73,856  max_pooling2d_1[ 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_7[0][0]    
 (BatchNormalizatio  128)                                             

 conv2d_8 (Conv2D)    (None, 32, 32,        147,584  batch_normalizat 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_8[0][0]    
 (BatchNormalizatio  128)                                             

 global_average_poo  (None, 128)                 0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape_1 (Reshape)  (None, 1, 1, 128)           0  global_average_p 

 conv2d_9 (Conv2D)    (None, 1, 1, 16)        2,064  reshape_1[0][0]   

 lambda_2 (Lambda)    (None, 32, 32, 1)           0  batch_normalizat 

 lambda_3 (Lambda)    (None, 32, 32, 1)           0  batch_normalizat 

 conv2d_10 (Conv2D)   (None, 1, 1, 128)       2,176  conv2d_9[0][0]    

 concatenate_1        (None, 32, 32, 2)           0  lambda_2[0][0],   
 (Concatenate)                                       lambda_3[0][0]    

 multiply_2           (None, 32, 32,              0  batch_normalizat 
 (Multiply)           128)                           conv2d_10[0][0]   

 conv2d_11 (Conv2D)   (None, 32, 32, 1)          99  concatenate_1[0] 

 multiply_3           (None, 32, 32,              0  multiply_2[0][0], 
 (Multiply)           128)                           conv2d_11[0][0]   

 add_1 (Add)          (None, 32, 32,              0  batch_normalizat 
                      128)                           multiply_3[0][0]  

 max_pooling2d_2      (None, 16, 16,              0  add_1[0][0]       
 (MaxPooling2D)       128)                                             

 conv2d_12 (Conv2D)   (None, 16, 16,        295,168  max_pooling2d_2[ 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_12[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_13 (Conv2D)   (None, 16, 16,        590,080  batch_normalizat 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_13[0][0]   
 (BatchNormalizatio  256)                                             

 global_average_poo  (None, 256)                 0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape_2 (Reshape)  (None, 1, 1, 256)           0  global_average_p 

 conv2d_14 (Conv2D)   (None, 1, 1, 32)        8,224  reshape_2[0][0]   

 lambda_4 (Lambda)    (None, 16, 16, 1)           0  batch_normalizat 

 lambda_5 (Lambda)    (None, 16, 16, 1)           0  batch_normalizat 

 conv2d_15 (Conv2D)   (None, 1, 1, 256)       8,448  conv2d_14[0][0]   

 concatenate_2        (None, 16, 16, 2)           0  lambda_4[0][0],   
 (Concatenate)                                       lambda_5[0][0]    

 multiply_4           (None, 16, 16,              0  batch_normalizat 
 (Multiply)           256)                           conv2d_15[0][0]   

 conv2d_16 (Conv2D)   (None, 16, 16, 1)          99  concatenate_2[0] 

 multiply_5           (None, 16, 16,              0  multiply_4[0][0], 
 (Multiply)           256)                           conv2d_16[0][0]   

 add_2 (Add)          (None, 16, 16,              0  batch_normalizat 
                      256)                           multiply_5[0][0]  

 max_pooling2d_3      (None, 8, 8, 256)           0  add_2[0][0]       
 (MaxPooling2D)                                                        

 conv2d_17 (Conv2D)   (None, 8, 8, 512)   1,180,160  max_pooling2d_3[ 

 batch_normalizatio  (None, 8, 8, 512)       2,048  conv2d_17[0][0]   
 (BatchNormalizatio                                                   

 dropout (Dropout)    (None, 8, 8, 512)           0  batch_normalizat 

 conv2d_18 (Conv2D)   (None, 8, 8, 512)   2,359,808  dropout[0][0]     

 batch_normalizatio  (None, 8, 8, 512)       2,048  conv2d_18[0][0]   
 (BatchNormalizatio                                                   

 conv2d_transpose     (None, 16, 16,        524,544  batch_normalizat 
 (Conv2DTranspose)    256)                                             

 concatenate_3        (None, 16, 16,              0  conv2d_transpose 
 (Concatenate)        512)                           add_2[0][0]       

 conv2d_19 (Conv2D)   (None, 16, 16,      1,179,904  concatenate_3[0] 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_19[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_20 (Conv2D)   (None, 16, 16,        590,080  batch_normalizat 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_20[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_transpose_1   (None, 32, 32,        131,200  batch_normalizat 
 (Conv2DTranspose)    128)                                             

 concatenate_4        (None, 32, 32,              0  conv2d_transpose 
 (Concatenate)        256)                           add_1[0][0]       

 conv2d_21 (Conv2D)   (None, 32, 32,        295,040  concatenate_4[0] 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_21[0][0]   
 (BatchNormalizatio  128)                                             

 conv2d_22 (Conv2D)   (None, 32, 32,        147,584  batch_normalizat 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_22[0][0]   
 (BatchNormalizatio  128)                                             

 conv2d_transpose_2   (None, 64, 64,         32,832  batch_normalizat 
 (Conv2DTranspose)    64)                                              

 concatenate_5        (None, 64, 64,              0  conv2d_transpose 
 (Concatenate)        128)                           add[0][0]         

 conv2d_23 (Conv2D)   (None, 64, 64,         73,792  concatenate_5[0] 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_23[0][0]   
 (BatchNormalizatio  64)                                              

 conv2d_24 (Conv2D)   (None, 64, 64,         36,928  batch_normalizat 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_24[0][0]   
 (BatchNormalizatio  64)                                              

 conv2d_transpose_3   (None, 128, 128,        8,224  batch_normalizat 
 (Conv2DTranspose)    32)                                              

 concatenate_6        (None, 128, 128,            0  conv2d_transpose 
 (Concatenate)        64)                            batch_normalizat 

 conv2d_25 (Conv2D)   (None, 128, 128,       18,464  concatenate_6[0] 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_25[0][0]   
 (BatchNormalizatio  32)                                              

 conv2d_26 (Conv2D)   (None, 128, 128,        9,248  batch_normalizat 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_26[0][0]   
 (BatchNormalizatio  32)                                              

 enhanced_spectrogr  (None, 128, 128,           33  batch_normalizat 
 (Conv2D)             1)                                               

 Total params: 7,793,602 (29.73 MB)
 Trainable params: 7,787,714 (29.71 MB)
 Non-trainable params: 5,888 (23.00 KB)

2025-03-04 13:48:18.741 | INFO     | willspeak_server.ml.model_integration:initialize_models:75 - Speech enhancement models initialized
2025-03-04 13:48:18.741 | INFO     | willspeak_server.api.server:startup_event:830 - Models initialized on startup
2025-03-04 15:26:26.857 | INFO     | willspeak_server.api.training_data_endpoints:train_from_pairs:450 - Started training job cad744b6-aae0-4e6e-abec-2a8bd97a9b1c for user 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 with 1 pairs
2025-03-04 15:26:26.861 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 15:26:26.862 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:359 - No pre-trained model found
2025-03-04 15:26:26.862 | INFO     | willspeak_server.ml.model_integration:train_model:132 - Starting training with 1 audio pairs for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 15:26:26.862 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:858 - Preparing training data from 1 file pairs
2025-03-04 15:26:26.862 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:865 - Processing audio pair 1: impaired.wav and clear.wav
2025-03-04 15:26:30.112 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:884 - Audio loaded successfully. Lengths - unclear: 45.95s, clear: 33.15s
2025-03-04 15:26:31.208 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:910 - Spectrogram variance - unclear: 1.000000, clear: 1.000000
2025-03-04 15:26:31.208 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:922 - Reshaping spectrograms to (128, 128, 1)
2025-03-04 15:26:31.209 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:934 - Successfully processed pair 1
2025-03-04 15:26:31.209 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:947 - Prepared training data: (1, 128, 128, 1), (1, 128, 128, 1)
2025-03-04 15:26:31.210 | WARNING  | willspeak_server.ml.model_integration:train_model:150 - Not enough data to create validation set, using all data for training
2025-03-04 15:26:31.210 | INFO     | willspeak_server.ml.model_integration:train_model:159 - Adjusted batch size from 32 to 1 based on dataset size
2025-03-04 15:26:31.210 | INFO     | willspeak_server.ml.model_integration:train_model:163 - Training model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 with 1 samples
2025-03-04 15:26:31.210 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 1/50
2025-03-04 15:26:45.592 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 2/50
2025-03-04 15:26:47.795 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 3/50
2025-03-04 15:26:49.835 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 4/50
2025-03-04 15:26:52.544 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 5/50
2025-03-04 15:26:54.498 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 6/50
2025-03-04 15:26:56.405 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 7/50
2025-03-04 15:26:58.452 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 8/50
2025-03-04 15:27:00.401 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 9/50
2025-03-04 15:27:02.360 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 10/50
2025-03-04 15:27:04.274 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 11/50
2025-03-04 15:27:07.121 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 12/50
2025-03-04 15:27:09.378 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 13/50
2025-03-04 15:27:11.360 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 14/50
2025-03-04 15:27:13.328 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 15/50
2025-03-04 15:27:15.314 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 16/50
2025-03-04 15:27:17.380 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 17/50
2025-03-04 15:27:19.596 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 18/50
2025-03-04 15:27:22.327 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 19/50
2025-03-04 15:27:25.098 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 20/50
2025-03-04 15:27:27.352 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 21/50
2025-03-04 15:27:29.372 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 22/50
2025-03-04 15:27:31.328 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 23/50
2025-03-04 15:27:33.333 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 24/50
2025-03-04 15:27:35.377 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 25/50
2025-03-04 15:27:38.128 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 26/50
2025-03-04 15:27:40.106 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 27/50
2025-03-04 15:27:42.195 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 28/50
2025-03-04 15:27:44.268 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 29/50
2025-03-04 15:27:46.252 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 30/50
2025-03-04 15:27:48.762 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 31/50
2025-03-04 15:27:51.159 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 32/50
2025-03-04 15:27:53.945 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 33/50
2025-03-04 15:27:56.257 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 34/50
2025-03-04 15:27:58.627 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 35/50
2025-03-04 15:28:00.806 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 36/50
2025-03-04 15:28:03.192 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 37/50
2025-03-04 15:28:05.498 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 38/50
2025-03-04 15:28:08.143 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 39/50
2025-03-04 15:28:10.181 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 40/50
2025-03-04 15:28:12.394 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 41/50
2025-03-04 15:28:14.778 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 42/50
2025-03-04 15:28:17.715 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 43/50
2025-03-04 15:28:20.745 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 44/50
2025-03-04 15:28:24.040 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 45/50
2025-03-04 15:28:27.029 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 46/50
2025-03-04 15:28:29.636 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 47/50
2025-03-04 15:28:32.021 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 48/50
2025-03-04 15:28:34.072 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 49/50
2025-03-04 15:28:36.341 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 50/50
2025-03-04 15:28:38.805 | INFO     | willspeak_server.ml.speech_enhancement_model:save_model:384 - Saved model to C:\Users\jaxon\Documents\WillSpeak\src\main\python\willspeak_server\models\user_default_model.keras
2025-03-04 15:28:38.805 | INFO     | willspeak_server.ml.speech_enhancement_model:train:840 - Training completed. Loss: 0.3904, MAE: 0.1681, Clarity: -0.0033
2025-03-04 15:28:39.336 | INFO     | willspeak_server.ml.speech_enhancement_model:save_model:384 - Saved model to C:\Users\jaxon\Documents\WillSpeak\src\main\python\willspeak_server\models\user_default_model.keras
2025-03-04 15:28:39.336 | INFO     | willspeak_server.ml.model_integration:train_model:183 - Training completed for user 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 15:28:39.338 | INFO     | willspeak_server.api.training_data_endpoints:_run_training_job:567 - Training job cad744b6-aae0-4e6e-abec-2a8bd97a9b1c completed successfully
2025-03-04 15:31:31.781 | INFO     | willspeak_server.api.endpoints:verify_user_exists:382 - Verifying user existence: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 15:31:31.782 | DEBUG    | willspeak_server.api.endpoints:verify_user_exists:383 - Checking path: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\users\8fa1972c-a8f1-47e7-a8f6-bbbff06fa063\profile.json
2025-03-04 15:31:31.782 | INFO     | willspeak_server.api.endpoints:verify_user_exists:404 - User verified: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 (TESS)
2025-03-04 15:31:31.782 | INFO     | willspeak_server.api.server:process_audio_generic:520 - Processing audio file: audio.wav for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 15:31:31.784 | INFO     | willspeak_server.api.server:read_audio_file:310 - Reading audio file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_2daf48fc-d770-4e74-9673-2b12fe419dd5.wav
2025-03-04 15:31:31.784 | DEBUG    | willspeak_server.api.server:read_audio_file:317 - Attempting to read with soundfile
2025-03-04 15:31:31.787 | INFO     | willspeak_server.api.server:read_audio_file:320 - Successfully read with soundfile: sr=16000, shape=(38912,), dtype=float64
2025-03-04 15:31:31.787 | INFO     | willspeak_server.api.server:process_audio_generic:572 - Audio file loaded: 38912 samples, 16000Hz
2025-03-04 15:31:31.787 | INFO     | willspeak_server.api.server:preprocess_audio:122 - Preprocessing audio: original sr=16000, target sr=16000
2025-03-04 15:31:31.787 | DEBUG    | willspeak_server.api.server:preprocess_audio:123 - Audio data shape: (38912,), dtype: float64
2025-03-04 15:31:31.787 | INFO     | willspeak_server.api.server:preprocess_audio:153 - Normalizing amplitude
2025-03-04 15:31:31.790 | INFO     | willspeak_server.api.server:preprocess_audio:163 - Removing silence
2025-03-04 15:31:32.159 | DEBUG    | willspeak_server.api.server:preprocess_audio:178 - After silence removal, audio length: 32128
2025-03-04 15:31:32.159 | INFO     | willspeak_server.api.server:preprocess_audio:189 - Preprocessing complete
2025-03-04 15:31:32.159 | INFO     | willspeak_server.api.server:extract_features:206 - Extracting features: n_mfcc=13, n_fft=2048
2025-03-04 15:31:32.174 | INFO     | willspeak_server.api.server:extract_features:237 - Feature extraction complete
2025-03-04 15:31:32.622 | INFO     | willspeak_server.api.server:transcribe_audio:287 - Transcription: hello how are you
2025-03-04 15:31:32.622 | INFO     | willspeak_server.ml.model_integration:enhance_audio:98 - Enhancing audio with model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 15:31:33.407 | ERROR    | willspeak_server.api.server:enhance_speech:260 - Speech enhancement failed: operands could not be broadcast together with shapes (257,128) (257,252) 
2025-03-04 15:31:33.407 | WARNING  | willspeak_server.api.server:enhance_speech:262 - Returning original audio due to enhancement failure
2025-03-04 15:31:33.407 | INFO     | willspeak_server.api.server:save_audio_file:408 - Saving audio to: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\processed_54343cad-361f-4eae-9c70-4d77bf4a1ec6.wav
2025-03-04 15:31:33.407 | DEBUG    | willspeak_server.api.server:save_audio_file:418 - Attempting to save with soundfile
2025-03-04 15:31:33.410 | INFO     | willspeak_server.api.server:save_audio_file:421 - Successfully saved with soundfile
2025-03-04 15:31:33.411 | DEBUG    | willspeak_server.api.server:process_audio_generic:639 - Removed temporary file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_2daf48fc-d770-4e74-9673-2b12fe419dd5.wav
2025-03-04 15:31:42.668 | INFO     | willspeak_server.api.endpoints:verify_user_exists:382 - Verifying user existence: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 15:31:42.668 | DEBUG    | willspeak_server.api.endpoints:verify_user_exists:383 - Checking path: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\users\8fa1972c-a8f1-47e7-a8f6-bbbff06fa063\profile.json
2025-03-04 15:31:42.669 | INFO     | willspeak_server.api.endpoints:verify_user_exists:404 - User verified: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 (TESS)
2025-03-04 15:31:42.669 | INFO     | willspeak_server.api.server:process_audio_generic:520 - Processing audio file: audio.wav for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 15:31:42.670 | INFO     | willspeak_server.api.server:read_audio_file:310 - Reading audio file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_853a3c9f-70d1-4cd6-8157-0fb1b1f2aa81.wav
2025-03-04 15:31:42.670 | DEBUG    | willspeak_server.api.server:read_audio_file:317 - Attempting to read with soundfile
2025-03-04 15:31:42.670 | INFO     | willspeak_server.api.server:read_audio_file:320 - Successfully read with soundfile: sr=16000, shape=(53248,), dtype=float64
2025-03-04 15:31:42.670 | INFO     | willspeak_server.api.server:process_audio_generic:572 - Audio file loaded: 53248 samples, 16000Hz
2025-03-04 15:31:42.670 | INFO     | willspeak_server.api.server:preprocess_audio:122 - Preprocessing audio: original sr=16000, target sr=16000
2025-03-04 15:31:42.670 | DEBUG    | willspeak_server.api.server:preprocess_audio:123 - Audio data shape: (53248,), dtype: float64
2025-03-04 15:31:42.670 | INFO     | willspeak_server.api.server:preprocess_audio:153 - Normalizing amplitude
2025-03-04 15:31:42.672 | INFO     | willspeak_server.api.server:preprocess_audio:163 - Removing silence
2025-03-04 15:31:42.674 | DEBUG    | willspeak_server.api.server:preprocess_audio:178 - After silence removal, audio length: 51456
2025-03-04 15:31:42.674 | INFO     | willspeak_server.api.server:preprocess_audio:189 - Preprocessing complete
2025-03-04 15:31:42.674 | INFO     | willspeak_server.api.server:extract_features:206 - Extracting features: n_mfcc=13, n_fft=2048
2025-03-04 15:31:42.681 | INFO     | willspeak_server.api.server:extract_features:237 - Feature extraction complete
2025-03-04 15:31:43.246 | WARNING  | willspeak_server.api.server:transcribe_audio:290 - Speech Recognition could not understand audio
2025-03-04 15:31:43.246 | INFO     | willspeak_server.ml.model_integration:enhance_audio:98 - Enhancing audio with model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 15:31:43.485 | ERROR    | willspeak_server.api.server:enhance_speech:260 - Speech enhancement failed: operands could not be broadcast together with shapes (257,128) (257,403) 
2025-03-04 15:31:43.485 | WARNING  | willspeak_server.api.server:enhance_speech:262 - Returning original audio due to enhancement failure
2025-03-04 15:31:43.486 | INFO     | willspeak_server.api.server:save_audio_file:408 - Saving audio to: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\processed_dd0a3e1f-641d-4977-aac9-761aae78be25.wav
2025-03-04 15:31:43.487 | DEBUG    | willspeak_server.api.server:save_audio_file:418 - Attempting to save with soundfile
2025-03-04 15:31:43.490 | INFO     | willspeak_server.api.server:save_audio_file:421 - Successfully saved with soundfile
2025-03-04 15:31:43.490 | DEBUG    | willspeak_server.api.server:process_audio_generic:639 - Removed temporary file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_853a3c9f-70d1-4cd6-8157-0fb1b1f2aa81.wav
2025-03-04 15:34:58.903 | INFO     | willspeak_server.api.training_data_endpoints:train_from_pairs:450 - Started training job aa1cedfd-276a-4cec-be60-2cb3835bd2b4 for user 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 with 1 pairs
2025-03-04 15:34:58.904 | INFO     | willspeak_server.ml.model_integration:train_model:132 - Starting training with 1 audio pairs for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 15:34:58.905 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:858 - Preparing training data from 1 file pairs
2025-03-04 15:34:58.905 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:865 - Processing audio pair 1: impaired.wav and clear.wav
2025-03-04 15:34:58.909 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:884 - Audio loaded successfully. Lengths - unclear: 45.95s, clear: 33.15s
2025-03-04 15:34:59.551 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:910 - Spectrogram variance - unclear: 1.000000, clear: 1.000000
2025-03-04 15:34:59.551 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:922 - Reshaping spectrograms to (128, 128, 1)
2025-03-04 15:34:59.552 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:934 - Successfully processed pair 1
2025-03-04 15:34:59.552 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:947 - Prepared training data: (1, 128, 128, 1), (1, 128, 128, 1)
2025-03-04 15:34:59.552 | WARNING  | willspeak_server.ml.model_integration:train_model:150 - Not enough data to create validation set, using all data for training
2025-03-04 15:34:59.552 | INFO     | willspeak_server.ml.model_integration:train_model:159 - Adjusted batch size from 32 to 1 based on dataset size
2025-03-04 15:34:59.552 | INFO     | willspeak_server.ml.model_integration:train_model:163 - Training model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 with 1 samples
2025-03-04 15:34:59.554 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 1/50
2025-03-04 15:35:02.199 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 2/50
2025-03-04 15:35:04.835 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 3/50
2025-03-04 15:35:07.042 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 4/50
2025-03-04 15:35:09.359 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 5/50
2025-03-04 15:35:11.439 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 6/50
2025-03-04 15:35:14.097 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 7/50
2025-03-04 15:35:16.198 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 8/50
2025-03-04 15:35:18.282 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 9/50
2025-03-04 15:35:20.580 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 10/50
2025-03-04 15:35:23.434 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 11/50
2025-03-04 15:35:25.489 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 12/50
2025-03-04 15:35:27.502 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 13/50
2025-03-04 15:35:30.461 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 14/50
2025-03-04 15:35:32.429 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 15/50
2025-03-04 15:35:34.688 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 16/50
2025-03-04 15:35:36.943 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 17/50
2025-03-04 15:35:39.436 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 18/50
2025-03-04 15:35:41.844 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 19/50
2025-03-04 15:35:45.042 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 20/50
2025-03-04 15:35:47.378 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 21/50
2025-03-04 15:35:49.785 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 22/50
2025-03-04 15:35:52.090 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 23/50
2025-03-04 15:35:54.688 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 24/50
2025-03-04 15:35:57.059 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 25/50
2025-03-04 15:36:00.072 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 26/50
2025-03-04 15:36:02.422 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 27/50
2025-03-04 15:36:04.865 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 28/50
2025-03-04 15:36:08.804 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 29/50
2025-03-04 15:36:11.309 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 30/50
2025-03-04 15:36:14.414 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 31/50
2025-03-04 15:36:17.278 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 32/50
2025-03-04 15:36:19.673 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 33/50
2025-03-04 15:36:21.916 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 34/50
2025-03-04 15:36:25.109 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 35/50
2025-03-04 15:36:27.852 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 36/50
2025-03-04 15:36:30.292 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 37/50
2025-03-04 15:36:32.770 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 38/50
2025-03-04 15:36:36.135 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 39/50
2025-03-04 15:36:39.034 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 40/50
2025-03-04 15:36:41.257 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 41/50
2025-03-04 15:36:43.582 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 42/50
2025-03-04 15:36:45.799 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 43/50
2025-03-04 15:36:48.016 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 44/50
2025-03-04 15:36:50.058 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 45/50
2025-03-04 15:36:52.627 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 46/50
2025-03-04 15:36:54.854 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 47/50
2025-03-04 15:36:56.947 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 48/50
2025-03-04 15:36:59.418 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 49/50
2025-03-04 15:37:01.647 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 50/50
2025-03-04 15:37:04.267 | INFO     | willspeak_server.ml.speech_enhancement_model:save_model:384 - Saved model to C:\Users\jaxon\Documents\WillSpeak\src\main\python\willspeak_server\models\user_default_model.keras
2025-03-04 15:37:04.268 | INFO     | willspeak_server.ml.speech_enhancement_model:train:840 - Training completed. Loss: 0.2347, MAE: 0.1035, Clarity: -0.0022
2025-03-04 15:37:04.781 | INFO     | willspeak_server.ml.speech_enhancement_model:save_model:384 - Saved model to C:\Users\jaxon\Documents\WillSpeak\src\main\python\willspeak_server\models\user_default_model.keras
2025-03-04 15:37:04.781 | INFO     | willspeak_server.ml.model_integration:train_model:183 - Training completed for user 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 15:37:04.783 | INFO     | willspeak_server.api.training_data_endpoints:_run_training_job:567 - Training job aa1cedfd-276a-4cec-be60-2cb3835bd2b4 completed successfully
2025-03-04 15:37:48.189 | INFO     | willspeak_server.api.training_data_endpoints:create_training_pair:93 - Created training pair 31005ed7-96d7-4442-923b-910a010928ba for user 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 15:38:25.029 | INFO     | willspeak_server.api.training_data_endpoints:train_from_pairs:450 - Started training job 9b66f53e-4e6a-4399-99da-7458bf0b019a for user 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 with 2 pairs
2025-03-04 15:38:25.031 | INFO     | willspeak_server.ml.model_integration:train_model:132 - Starting training with 2 audio pairs for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 15:38:25.031 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:858 - Preparing training data from 2 file pairs
2025-03-04 15:38:25.031 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:865 - Processing audio pair 1: impaired.wav and clear.wav
2025-03-04 15:38:25.035 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:884 - Audio loaded successfully. Lengths - unclear: 2.43s, clear: 3.20s
2025-03-04 15:38:25.092 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:910 - Spectrogram variance - unclear: 1.000000, clear: 1.000000
2025-03-04 15:38:25.093 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:922 - Reshaping spectrograms to (128, 128, 1)
2025-03-04 15:38:25.093 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:934 - Successfully processed pair 1
2025-03-04 15:38:25.093 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:865 - Processing audio pair 2: impaired.wav and clear.wav
2025-03-04 15:38:25.098 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:884 - Audio loaded successfully. Lengths - unclear: 45.95s, clear: 33.15s
2025-03-04 15:38:25.785 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:910 - Spectrogram variance - unclear: 1.000000, clear: 1.000000
2025-03-04 15:38:25.785 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:922 - Reshaping spectrograms to (128, 128, 1)
2025-03-04 15:38:25.785 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:934 - Successfully processed pair 2
2025-03-04 15:38:25.787 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:947 - Prepared training data: (2, 128, 128, 1), (2, 128, 128, 1)
2025-03-04 15:38:25.787 | INFO     | willspeak_server.ml.model_integration:train_model:154 - Split data into 1 training and 1 validation samples
2025-03-04 15:38:25.787 | INFO     | willspeak_server.ml.model_integration:train_model:159 - Adjusted batch size from 32 to 1 based on dataset size
2025-03-04 15:38:25.787 | INFO     | willspeak_server.ml.model_integration:train_model:163 - Training model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 with 1 samples
2025-03-04 15:38:25.787 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 1/50
2025-03-04 15:38:28.772 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 2/50
2025-03-04 15:38:31.847 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 3/50
2025-03-04 15:38:34.063 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 4/50
2025-03-04 15:38:35.645 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 5/50
2025-03-04 15:38:37.214 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 6/50
2025-03-04 15:38:38.779 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 7/50
2025-03-04 15:38:40.372 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 8/50
2025-03-04 15:38:41.963 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 9/50
2025-03-04 15:38:43.543 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 10/50
2025-03-04 15:38:45.099 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 11/50
2025-03-04 15:38:46.979 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 12/50
2025-03-04 15:38:48.530 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 13/50
2025-03-04 15:38:50.135 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 14/50
2025-03-04 15:38:51.730 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 15/50
2025-03-04 15:38:53.308 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 16/50
2025-03-04 15:38:54.908 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 17/50
2025-03-04 15:38:56.602 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 18/50
2025-03-04 15:38:58.186 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 19/50
2025-03-04 15:38:59.842 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 20/50
2025-03-04 15:39:01.832 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 21/50
2025-03-04 15:39:03.423 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 22/50
2025-03-04 15:39:04.987 | INFO     | willspeak_server.ml.speech_enhancement_model:train:789 - Epoch 23/50
2025-03-04 15:39:06.581 | INFO     | willspeak_server.ml.speech_enhancement_model:train:813 - Early stopping at epoch 23
2025-03-04 15:39:07.131 | INFO     | willspeak_server.ml.speech_enhancement_model:save_model:384 - Saved model to C:\Users\jaxon\Documents\WillSpeak\src\main\python\willspeak_server\models\user_default_model.keras
2025-03-04 15:39:07.132 | INFO     | willspeak_server.ml.speech_enhancement_model:train:840 - Training completed. Loss: 0.2759, MAE: 0.1213, Clarity: 0.3315
2025-03-04 15:39:07.679 | INFO     | willspeak_server.ml.speech_enhancement_model:save_model:384 - Saved model to C:\Users\jaxon\Documents\WillSpeak\src\main\python\willspeak_server\models\user_default_model.keras
2025-03-04 15:39:07.680 | INFO     | willspeak_server.ml.model_integration:train_model:183 - Training completed for user 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 15:39:07.681 | INFO     | willspeak_server.api.training_data_endpoints:_run_training_job:567 - Training job 9b66f53e-4e6a-4399-99da-7458bf0b019a completed successfully
2025-03-04 15:39:33.784 | INFO     | willspeak_server.api.endpoints:verify_user_exists:382 - Verifying user existence: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 15:39:33.784 | DEBUG    | willspeak_server.api.endpoints:verify_user_exists:383 - Checking path: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\users\8fa1972c-a8f1-47e7-a8f6-bbbff06fa063\profile.json
2025-03-04 15:39:33.784 | INFO     | willspeak_server.api.endpoints:verify_user_exists:404 - User verified: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 (TESS)
2025-03-04 15:39:33.784 | INFO     | willspeak_server.api.server:process_audio_generic:520 - Processing audio file: audio.wav for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 15:39:33.785 | INFO     | willspeak_server.api.server:read_audio_file:310 - Reading audio file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_029694d9-a177-4ef0-b272-774f6c5ccaef.wav
2025-03-04 15:39:33.785 | DEBUG    | willspeak_server.api.server:read_audio_file:317 - Attempting to read with soundfile
2025-03-04 15:39:33.786 | INFO     | willspeak_server.api.server:read_audio_file:320 - Successfully read with soundfile: sr=16000, shape=(34816,), dtype=float64
2025-03-04 15:39:33.787 | INFO     | willspeak_server.api.server:process_audio_generic:572 - Audio file loaded: 34816 samples, 16000Hz
2025-03-04 15:39:33.787 | INFO     | willspeak_server.api.server:preprocess_audio:122 - Preprocessing audio: original sr=16000, target sr=16000
2025-03-04 15:39:33.787 | DEBUG    | willspeak_server.api.server:preprocess_audio:123 - Audio data shape: (34816,), dtype: float64
2025-03-04 15:39:33.787 | INFO     | willspeak_server.api.server:preprocess_audio:153 - Normalizing amplitude
2025-03-04 15:39:33.787 | INFO     | willspeak_server.api.server:preprocess_audio:163 - Removing silence
2025-03-04 15:39:33.788 | DEBUG    | willspeak_server.api.server:preprocess_audio:178 - After silence removal, audio length: 31616
2025-03-04 15:39:33.789 | INFO     | willspeak_server.api.server:preprocess_audio:189 - Preprocessing complete
2025-03-04 15:39:33.789 | INFO     | willspeak_server.api.server:extract_features:206 - Extracting features: n_mfcc=13, n_fft=2048
2025-03-04 15:39:33.795 | INFO     | willspeak_server.api.server:extract_features:237 - Feature extraction complete
2025-03-04 15:39:34.145 | WARNING  | willspeak_server.api.server:transcribe_audio:290 - Speech Recognition could not understand audio
2025-03-04 15:39:34.145 | INFO     | willspeak_server.ml.model_integration:enhance_audio:98 - Enhancing audio with model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 15:39:34.395 | ERROR    | willspeak_server.api.server:enhance_speech:260 - Speech enhancement failed: operands could not be broadcast together with shapes (257,128) (257,248) 
2025-03-04 15:39:34.395 | WARNING  | willspeak_server.api.server:enhance_speech:262 - Returning original audio due to enhancement failure
2025-03-04 15:39:34.397 | INFO     | willspeak_server.api.server:save_audio_file:408 - Saving audio to: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\processed_dfc7fc80-d348-4a0e-8ba9-c1cc82794239.wav
2025-03-04 15:39:34.397 | DEBUG    | willspeak_server.api.server:save_audio_file:418 - Attempting to save with soundfile
2025-03-04 15:39:34.400 | INFO     | willspeak_server.api.server:save_audio_file:421 - Successfully saved with soundfile
2025-03-04 15:39:34.400 | DEBUG    | willspeak_server.api.server:process_audio_generic:639 - Removed temporary file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_029694d9-a177-4ef0-b272-774f6c5ccaef.wav
2025-03-04 15:57:07.349 | INFO     | willspeak_server.api.server:shutdown_event:845 - Cleanup completed on shutdown
2025-03-04 15:57:21.254 | INFO     | willspeak_server.api.server:<module>:89 - Included training data router from training_data_endpoints.py
2025-03-04 15:57:21.295 | INFO     | willspeak_server.api.server:<module>:799 - Included router from endpoints.py
2025-03-04 15:57:21.296 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/create-pair - {'POST'}
2025-03-04 15:57:21.296 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/upload-clear-template - {'POST'}
2025-03-04 15:57:21.296 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/templates - {'GET'}
2025-03-04 15:57:21.296 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/templates/{template_id} - {'GET'}
2025-03-04 15:57:21.296 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/templates/{template_id}/audio - {'GET'}
2025-03-04 15:57:21.297 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/user-pairs/{user_id} - {'GET'}
2025-03-04 15:57:21.297 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/use-template - {'POST'}
2025-03-04 15:57:21.297 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/train-from-pairs - {'POST'}
2025-03-04 15:57:21.297 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/training-jobs/{user_id} - {'GET'}
2025-03-04 15:57:21.297 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training-data/training-jobs/{job_id}/status - {'GET'}
2025-03-04 15:57:21.297 | INFO     | willspeak_server.api.server:<module>:804 - Route: / - {'GET'}
2025-03-04 15:57:21.298 | INFO     | willspeak_server.api.server:<module>:804 - Route: /process-audio - {'POST'}
2025-03-04 15:57:21.298 | INFO     | willspeak_server.api.server:<module>:804 - Route: /process-audio-for-user - {'POST'}
2025-03-04 15:57:21.298 | INFO     | willspeak_server.api.server:<module>:804 - Route: /debug/audio-test - {'GET'}
2025-03-04 15:57:21.298 | INFO     | willspeak_server.api.server:<module>:804 - Route: /debug/paths - {'GET'}
2025-03-04 15:57:21.298 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/create - {'POST'}
2025-03-04 15:57:21.298 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/list - {'GET'}
2025-03-04 15:57:21.298 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/{user_id} - {'GET'}
2025-03-04 15:57:21.298 | INFO     | willspeak_server.api.server:<module>:804 - Route: /user/{user_id}/update - {'POST'}
2025-03-04 15:57:21.298 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training/start - {'POST'}
2025-03-04 15:57:21.299 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training/{session_id}/upload - {'POST'}
2025-03-04 15:57:21.299 | INFO     | willspeak_server.api.server:<module>:804 - Route: /training/{session_id}/complete - {'POST'}
2025-03-04 15:57:21.299 | INFO     | willspeak_server.api.server:<module>:804 - Route: /process-audio-for-user - {'POST'}
2025-03-04 15:57:21.406 | INFO     | willspeak_server.ml.model_integration:initialize_models:75 - Initializing speech enhancement models
2025-03-04 15:57:21.407 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: default
2025-03-04 15:57:21.407 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:368 - No pre-trained model found
2025-03-04 15:57:21.407 | WARNING  | willspeak_server.ml.model_integration:initialize_models:82 - No pre-trained model found. Building new model.
2025-03-04 15:57:21.407 | INFO     | willspeak_server.ml.speech_enhancement_model:build_model:87 - Building improved model with input shape: (128, 128, 1)
2025-03-04 15:57:23.327 | INFO     | keras.src.utils.summary_utils:print_summary:389 - Model: "functional"

 Layer (type)         Output Shape          Param #  Connected to      

 input_spectrogram    (None, 128, 128,            0  -                 
 (InputLayer)         1)                                               

 conv2d (Conv2D)      (None, 128, 128,          320  input_spectrogra 
                      32)                                              

 batch_normalization  (None, 128, 128,          128  conv2d[0][0]      
 (BatchNormalizatio  32)                                              

 conv2d_1 (Conv2D)    (None, 128, 128,        9,248  batch_normalizat 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_1[0][0]    
 (BatchNormalizatio  32)                                              

 max_pooling2d        (None, 64, 64,              0  batch_normalizat 
 (MaxPooling2D)       32)                                              

 conv2d_2 (Conv2D)    (None, 64, 64,         18,496  max_pooling2d[0] 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_2[0][0]    
 (BatchNormalizatio  64)                                              

 conv2d_3 (Conv2D)    (None, 64, 64,         36,928  batch_normalizat 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_3[0][0]    
 (BatchNormalizatio  64)                                              

 global_average_poo  (None, 64)                  0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape (Reshape)    (None, 1, 1, 64)            0  global_average_p 

 conv2d_4 (Conv2D)    (None, 1, 1, 8)           520  reshape[0][0]     

 lambda (Lambda)      (None, 64, 64, 1)           0  batch_normalizat 

 lambda_1 (Lambda)    (None, 64, 64, 1)           0  batch_normalizat 

 conv2d_5 (Conv2D)    (None, 1, 1, 64)          576  conv2d_4[0][0]    

 concatenate          (None, 64, 64, 2)           0  lambda[0][0],     
 (Concatenate)                                       lambda_1[0][0]    

 multiply (Multiply)  (None, 64, 64,              0  batch_normalizat 
                      64)                            conv2d_5[0][0]    

 conv2d_6 (Conv2D)    (None, 64, 64, 1)          99  concatenate[0][0] 

 multiply_1           (None, 64, 64,              0  multiply[0][0],   
 (Multiply)           64)                            conv2d_6[0][0]    

 add (Add)            (None, 64, 64,              0  batch_normalizat 
                      64)                            multiply_1[0][0]  

 max_pooling2d_1      (None, 32, 32,              0  add[0][0]         
 (MaxPooling2D)       64)                                              

 conv2d_7 (Conv2D)    (None, 32, 32,         73,856  max_pooling2d_1[ 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_7[0][0]    
 (BatchNormalizatio  128)                                             

 conv2d_8 (Conv2D)    (None, 32, 32,        147,584  batch_normalizat 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_8[0][0]    
 (BatchNormalizatio  128)                                             

 global_average_poo  (None, 128)                 0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape_1 (Reshape)  (None, 1, 1, 128)           0  global_average_p 

 conv2d_9 (Conv2D)    (None, 1, 1, 16)        2,064  reshape_1[0][0]   

 lambda_2 (Lambda)    (None, 32, 32, 1)           0  batch_normalizat 

 lambda_3 (Lambda)    (None, 32, 32, 1)           0  batch_normalizat 

 conv2d_10 (Conv2D)   (None, 1, 1, 128)       2,176  conv2d_9[0][0]    

 concatenate_1        (None, 32, 32, 2)           0  lambda_2[0][0],   
 (Concatenate)                                       lambda_3[0][0]    

 multiply_2           (None, 32, 32,              0  batch_normalizat 
 (Multiply)           128)                           conv2d_10[0][0]   

 conv2d_11 (Conv2D)   (None, 32, 32, 1)          99  concatenate_1[0] 

 multiply_3           (None, 32, 32,              0  multiply_2[0][0], 
 (Multiply)           128)                           conv2d_11[0][0]   

 add_1 (Add)          (None, 32, 32,              0  batch_normalizat 
                      128)                           multiply_3[0][0]  

 max_pooling2d_2      (None, 16, 16,              0  add_1[0][0]       
 (MaxPooling2D)       128)                                             

 conv2d_12 (Conv2D)   (None, 16, 16,        295,168  max_pooling2d_2[ 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_12[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_13 (Conv2D)   (None, 16, 16,        590,080  batch_normalizat 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_13[0][0]   
 (BatchNormalizatio  256)                                             

 global_average_poo  (None, 256)                 0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape_2 (Reshape)  (None, 1, 1, 256)           0  global_average_p 

 conv2d_14 (Conv2D)   (None, 1, 1, 32)        8,224  reshape_2[0][0]   

 lambda_4 (Lambda)    (None, 16, 16, 1)           0  batch_normalizat 

 lambda_5 (Lambda)    (None, 16, 16, 1)           0  batch_normalizat 

 conv2d_15 (Conv2D)   (None, 1, 1, 256)       8,448  conv2d_14[0][0]   

 concatenate_2        (None, 16, 16, 2)           0  lambda_4[0][0],   
 (Concatenate)                                       lambda_5[0][0]    

 multiply_4           (None, 16, 16,              0  batch_normalizat 
 (Multiply)           256)                           conv2d_15[0][0]   

 conv2d_16 (Conv2D)   (None, 16, 16, 1)          99  concatenate_2[0] 

 multiply_5           (None, 16, 16,              0  multiply_4[0][0], 
 (Multiply)           256)                           conv2d_16[0][0]   

 add_2 (Add)          (None, 16, 16,              0  batch_normalizat 
                      256)                           multiply_5[0][0]  

 max_pooling2d_3      (None, 8, 8, 256)           0  add_2[0][0]       
 (MaxPooling2D)                                                        

 conv2d_17 (Conv2D)   (None, 8, 8, 512)   1,180,160  max_pooling2d_3[ 

 batch_normalizatio  (None, 8, 8, 512)       2,048  conv2d_17[0][0]   
 (BatchNormalizatio                                                   

 dropout (Dropout)    (None, 8, 8, 512)           0  batch_normalizat 

 conv2d_18 (Conv2D)   (None, 8, 8, 512)   2,359,808  dropout[0][0]     

 batch_normalizatio  (None, 8, 8, 512)       2,048  conv2d_18[0][0]   
 (BatchNormalizatio                                                   

 conv2d_transpose     (None, 16, 16,        524,544  batch_normalizat 
 (Conv2DTranspose)    256)                                             

 concatenate_3        (None, 16, 16,              0  conv2d_transpose 
 (Concatenate)        512)                           add_2[0][0]       

 conv2d_19 (Conv2D)   (None, 16, 16,      1,179,904  concatenate_3[0] 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_19[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_20 (Conv2D)   (None, 16, 16,        590,080  batch_normalizat 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_20[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_transpose_1   (None, 32, 32,        131,200  batch_normalizat 
 (Conv2DTranspose)    128)                                             

 concatenate_4        (None, 32, 32,              0  conv2d_transpose 
 (Concatenate)        256)                           add_1[0][0]       

 conv2d_21 (Conv2D)   (None, 32, 32,        295,040  concatenate_4[0] 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_21[0][0]   
 (BatchNormalizatio  128)                                             

 conv2d_22 (Conv2D)   (None, 32, 32,        147,584  batch_normalizat 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_22[0][0]   
 (BatchNormalizatio  128)                                             

 conv2d_transpose_2   (None, 64, 64,         32,832  batch_normalizat 
 (Conv2DTranspose)    64)                                              

 concatenate_5        (None, 64, 64,              0  conv2d_transpose 
 (Concatenate)        128)                           add[0][0]         

 conv2d_23 (Conv2D)   (None, 64, 64,         73,792  concatenate_5[0] 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_23[0][0]   
 (BatchNormalizatio  64)                                              

 conv2d_24 (Conv2D)   (None, 64, 64,         36,928  batch_normalizat 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_24[0][0]   
 (BatchNormalizatio  64)                                              

 conv2d_transpose_3   (None, 128, 128,        8,224  batch_normalizat 
 (Conv2DTranspose)    32)                                              

 concatenate_6        (None, 128, 128,            0  conv2d_transpose 
 (Concatenate)        64)                            batch_normalizat 

 conv2d_25 (Conv2D)   (None, 128, 128,       18,464  concatenate_6[0] 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_25[0][0]   
 (BatchNormalizatio  32)                                              

 conv2d_26 (Conv2D)   (None, 128, 128,        9,248  batch_normalizat 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_26[0][0]   
 (BatchNormalizatio  32)                                              

 enhanced_spectrogr  (None, 128, 128,           33  batch_normalizat 
 (Conv2D)             1)                                               

 Total params: 7,793,602 (29.73 MB)
 Trainable params: 7,787,714 (29.71 MB)
 Non-trainable params: 5,888 (23.00 KB)

2025-03-04 15:57:23.335 | INFO     | willspeak_server.ml.model_integration:initialize_models:84 - Base model built successfully
2025-03-04 15:57:23.335 | INFO     | willspeak_server.ml.model_integration:initialize_models:92 - Found 1 user-specific models: ['user_default_model.keras']
2025-03-04 15:57:23.335 | INFO     | willspeak_server.ml.model_integration:initialize_models:94 - Speech enhancement models initialized
2025-03-04 15:57:23.335 | INFO     | willspeak_server.api.server:startup_event:830 - Models initialized on startup
2025-03-04 16:04:26.825 | INFO     | willspeak_server.api.server:shutdown_event:845 - Cleanup completed on shutdown
2025-03-04 16:50:16.779 | INFO     | willspeak_server.api.server:<module>:797 - Included training data router from training_data_endpoints.py
2025-03-04 16:50:16.795 | INFO     | willspeak_server.api.server:<module>:803 - Included router from endpoints.py
2025-03-04 16:50:16.795 | INFO     | willspeak_server.api.server:<module>:808 - Route: / - {'GET'}
2025-03-04 16:50:16.795 | INFO     | willspeak_server.api.server:<module>:808 - Route: /process-audio - {'POST'}
2025-03-04 16:50:16.796 | INFO     | willspeak_server.api.server:<module>:808 - Route: /process-audio-for-user - {'POST'}
2025-03-04 16:50:16.796 | INFO     | willspeak_server.api.server:<module>:808 - Route: /debug/audio-test - {'GET'}
2025-03-04 16:50:16.796 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/create-pair - {'POST'}
2025-03-04 16:50:16.796 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/upload-clear-template - {'POST'}
2025-03-04 16:50:16.796 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/templates - {'GET'}
2025-03-04 16:50:16.796 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/templates/{template_id} - {'GET'}
2025-03-04 16:50:16.796 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/templates/{template_id}/audio - {'GET'}
2025-03-04 16:50:16.796 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/user-pairs/{user_id} - {'GET'}
2025-03-04 16:50:16.796 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/use-template - {'POST'}
2025-03-04 16:50:16.796 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/train-from-pairs - {'POST'}
2025-03-04 16:50:16.796 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/training-jobs/{user_id} - {'GET'}
2025-03-04 16:50:16.796 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/training-jobs/{job_id}/status - {'GET'}
2025-03-04 16:50:16.796 | INFO     | willspeak_server.api.server:<module>:808 - Route: /debug/paths - {'GET'}
2025-03-04 16:50:16.796 | INFO     | willspeak_server.api.server:<module>:808 - Route: /user/create - {'POST'}
2025-03-04 16:50:16.797 | INFO     | willspeak_server.api.server:<module>:808 - Route: /user/list - {'GET'}
2025-03-04 16:50:16.797 | INFO     | willspeak_server.api.server:<module>:808 - Route: /user/{user_id} - {'GET'}
2025-03-04 16:50:16.797 | INFO     | willspeak_server.api.server:<module>:808 - Route: /user/{user_id}/update - {'POST'}
2025-03-04 16:50:16.797 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training/start - {'POST'}
2025-03-04 16:50:16.797 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training/{session_id}/upload - {'POST'}
2025-03-04 16:50:16.797 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training/{session_id}/complete - {'POST'}
2025-03-04 16:50:16.800 | INFO     | willspeak_server.ml.model_integration:initialize_models:75 - Initializing speech enhancement models
2025-03-04 16:50:16.800 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: default
2025-03-04 16:50:16.801 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:368 - No pre-trained model found
2025-03-04 16:50:16.801 | WARNING  | willspeak_server.ml.model_integration:initialize_models:82 - No pre-trained model found. Building new model.
2025-03-04 16:50:16.801 | INFO     | willspeak_server.ml.speech_enhancement_model:build_model:87 - Building improved model with input shape: (128, 128, 1)
2025-03-04 16:50:17.965 | INFO     | keras.src.utils.summary_utils:print_summary:389 - Model: "functional"

 Layer (type)         Output Shape          Param #  Connected to      

 input_spectrogram    (None, 128, 128,            0  -                 
 (InputLayer)         1)                                               

 conv2d (Conv2D)      (None, 128, 128,          320  input_spectrogra 
                      32)                                              

 batch_normalization  (None, 128, 128,          128  conv2d[0][0]      
 (BatchNormalizatio  32)                                              

 conv2d_1 (Conv2D)    (None, 128, 128,        9,248  batch_normalizat 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_1[0][0]    
 (BatchNormalizatio  32)                                              

 max_pooling2d        (None, 64, 64,              0  batch_normalizat 
 (MaxPooling2D)       32)                                              

 conv2d_2 (Conv2D)    (None, 64, 64,         18,496  max_pooling2d[0] 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_2[0][0]    
 (BatchNormalizatio  64)                                              

 conv2d_3 (Conv2D)    (None, 64, 64,         36,928  batch_normalizat 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_3[0][0]    
 (BatchNormalizatio  64)                                              

 global_average_poo  (None, 64)                  0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape (Reshape)    (None, 1, 1, 64)            0  global_average_p 

 conv2d_4 (Conv2D)    (None, 1, 1, 8)           520  reshape[0][0]     

 lambda (Lambda)      (None, 64, 64, 1)           0  batch_normalizat 

 lambda_1 (Lambda)    (None, 64, 64, 1)           0  batch_normalizat 

 conv2d_5 (Conv2D)    (None, 1, 1, 64)          576  conv2d_4[0][0]    

 concatenate          (None, 64, 64, 2)           0  lambda[0][0],     
 (Concatenate)                                       lambda_1[0][0]    

 multiply (Multiply)  (None, 64, 64,              0  batch_normalizat 
                      64)                            conv2d_5[0][0]    

 conv2d_6 (Conv2D)    (None, 64, 64, 1)          99  concatenate[0][0] 

 multiply_1           (None, 64, 64,              0  multiply[0][0],   
 (Multiply)           64)                            conv2d_6[0][0]    

 add (Add)            (None, 64, 64,              0  batch_normalizat 
                      64)                            multiply_1[0][0]  

 max_pooling2d_1      (None, 32, 32,              0  add[0][0]         
 (MaxPooling2D)       64)                                              

 conv2d_7 (Conv2D)    (None, 32, 32,         73,856  max_pooling2d_1[ 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_7[0][0]    
 (BatchNormalizatio  128)                                             

 conv2d_8 (Conv2D)    (None, 32, 32,        147,584  batch_normalizat 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_8[0][0]    
 (BatchNormalizatio  128)                                             

 global_average_poo  (None, 128)                 0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape_1 (Reshape)  (None, 1, 1, 128)           0  global_average_p 

 conv2d_9 (Conv2D)    (None, 1, 1, 16)        2,064  reshape_1[0][0]   

 lambda_2 (Lambda)    (None, 32, 32, 1)           0  batch_normalizat 

 lambda_3 (Lambda)    (None, 32, 32, 1)           0  batch_normalizat 

 conv2d_10 (Conv2D)   (None, 1, 1, 128)       2,176  conv2d_9[0][0]    

 concatenate_1        (None, 32, 32, 2)           0  lambda_2[0][0],   
 (Concatenate)                                       lambda_3[0][0]    

 multiply_2           (None, 32, 32,              0  batch_normalizat 
 (Multiply)           128)                           conv2d_10[0][0]   

 conv2d_11 (Conv2D)   (None, 32, 32, 1)          99  concatenate_1[0] 

 multiply_3           (None, 32, 32,              0  multiply_2[0][0], 
 (Multiply)           128)                           conv2d_11[0][0]   

 add_1 (Add)          (None, 32, 32,              0  batch_normalizat 
                      128)                           multiply_3[0][0]  

 max_pooling2d_2      (None, 16, 16,              0  add_1[0][0]       
 (MaxPooling2D)       128)                                             

 conv2d_12 (Conv2D)   (None, 16, 16,        295,168  max_pooling2d_2[ 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_12[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_13 (Conv2D)   (None, 16, 16,        590,080  batch_normalizat 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_13[0][0]   
 (BatchNormalizatio  256)                                             

 global_average_poo  (None, 256)                 0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape_2 (Reshape)  (None, 1, 1, 256)           0  global_average_p 

 conv2d_14 (Conv2D)   (None, 1, 1, 32)        8,224  reshape_2[0][0]   

 lambda_4 (Lambda)    (None, 16, 16, 1)           0  batch_normalizat 

 lambda_5 (Lambda)    (None, 16, 16, 1)           0  batch_normalizat 

 conv2d_15 (Conv2D)   (None, 1, 1, 256)       8,448  conv2d_14[0][0]   

 concatenate_2        (None, 16, 16, 2)           0  lambda_4[0][0],   
 (Concatenate)                                       lambda_5[0][0]    

 multiply_4           (None, 16, 16,              0  batch_normalizat 
 (Multiply)           256)                           conv2d_15[0][0]   

 conv2d_16 (Conv2D)   (None, 16, 16, 1)          99  concatenate_2[0] 

 multiply_5           (None, 16, 16,              0  multiply_4[0][0], 
 (Multiply)           256)                           conv2d_16[0][0]   

 add_2 (Add)          (None, 16, 16,              0  batch_normalizat 
                      256)                           multiply_5[0][0]  

 max_pooling2d_3      (None, 8, 8, 256)           0  add_2[0][0]       
 (MaxPooling2D)                                                        

 conv2d_17 (Conv2D)   (None, 8, 8, 512)   1,180,160  max_pooling2d_3[ 

 batch_normalizatio  (None, 8, 8, 512)       2,048  conv2d_17[0][0]   
 (BatchNormalizatio                                                   

 dropout (Dropout)    (None, 8, 8, 512)           0  batch_normalizat 

 conv2d_18 (Conv2D)   (None, 8, 8, 512)   2,359,808  dropout[0][0]     

 batch_normalizatio  (None, 8, 8, 512)       2,048  conv2d_18[0][0]   
 (BatchNormalizatio                                                   

 conv2d_transpose     (None, 16, 16,        524,544  batch_normalizat 
 (Conv2DTranspose)    256)                                             

 concatenate_3        (None, 16, 16,              0  conv2d_transpose 
 (Concatenate)        512)                           add_2[0][0]       

 conv2d_19 (Conv2D)   (None, 16, 16,      1,179,904  concatenate_3[0] 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_19[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_20 (Conv2D)   (None, 16, 16,        590,080  batch_normalizat 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_20[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_transpose_1   (None, 32, 32,        131,200  batch_normalizat 
 (Conv2DTranspose)    128)                                             

 concatenate_4        (None, 32, 32,              0  conv2d_transpose 
 (Concatenate)        256)                           add_1[0][0]       

 conv2d_21 (Conv2D)   (None, 32, 32,        295,040  concatenate_4[0] 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_21[0][0]   
 (BatchNormalizatio  128)                                             

 conv2d_22 (Conv2D)   (None, 32, 32,        147,584  batch_normalizat 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_22[0][0]   
 (BatchNormalizatio  128)                                             

 conv2d_transpose_2   (None, 64, 64,         32,832  batch_normalizat 
 (Conv2DTranspose)    64)                                              

 concatenate_5        (None, 64, 64,              0  conv2d_transpose 
 (Concatenate)        128)                           add[0][0]         

 conv2d_23 (Conv2D)   (None, 64, 64,         73,792  concatenate_5[0] 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_23[0][0]   
 (BatchNormalizatio  64)                                              

 conv2d_24 (Conv2D)   (None, 64, 64,         36,928  batch_normalizat 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_24[0][0]   
 (BatchNormalizatio  64)                                              

 conv2d_transpose_3   (None, 128, 128,        8,224  batch_normalizat 
 (Conv2DTranspose)    32)                                              

 concatenate_6        (None, 128, 128,            0  conv2d_transpose 
 (Concatenate)        64)                            batch_normalizat 

 conv2d_25 (Conv2D)   (None, 128, 128,       18,464  concatenate_6[0] 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_25[0][0]   
 (BatchNormalizatio  32)                                              

 conv2d_26 (Conv2D)   (None, 128, 128,        9,248  batch_normalizat 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_26[0][0]   
 (BatchNormalizatio  32)                                              

 enhanced_spectrogr  (None, 128, 128,           33  batch_normalizat 
 (Conv2D)             1)                                               

 Total params: 7,793,602 (29.73 MB)
 Trainable params: 7,787,714 (29.71 MB)
 Non-trainable params: 5,888 (23.00 KB)

2025-03-04 16:50:17.968 | INFO     | willspeak_server.ml.model_integration:initialize_models:84 - Base model built successfully
2025-03-04 16:50:17.969 | INFO     | willspeak_server.ml.model_integration:initialize_models:92 - Found 1 user-specific models: ['user_default_model.keras']
2025-03-04 16:50:17.969 | INFO     | willspeak_server.ml.model_integration:initialize_models:94 - Speech enhancement models initialized
2025-03-04 16:50:21.796 | INFO     | willspeak_server.api.server:<module>:797 - Included training data router from training_data_endpoints.py
2025-03-04 16:50:21.808 | INFO     | willspeak_server.api.server:<module>:803 - Included router from endpoints.py
2025-03-04 16:50:21.809 | INFO     | willspeak_server.api.server:<module>:808 - Route: / - {'GET'}
2025-03-04 16:50:21.809 | INFO     | willspeak_server.api.server:<module>:808 - Route: /process-audio - {'POST'}
2025-03-04 16:50:21.809 | INFO     | willspeak_server.api.server:<module>:808 - Route: /process-audio-for-user - {'POST'}
2025-03-04 16:50:21.809 | INFO     | willspeak_server.api.server:<module>:808 - Route: /debug/audio-test - {'GET'}
2025-03-04 16:50:21.809 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/create-pair - {'POST'}
2025-03-04 16:50:21.809 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/upload-clear-template - {'POST'}
2025-03-04 16:50:21.809 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/templates - {'GET'}
2025-03-04 16:50:21.809 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/templates/{template_id} - {'GET'}
2025-03-04 16:50:21.809 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/templates/{template_id}/audio - {'GET'}
2025-03-04 16:50:21.809 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/user-pairs/{user_id} - {'GET'}
2025-03-04 16:50:21.809 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/use-template - {'POST'}
2025-03-04 16:50:21.809 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/train-from-pairs - {'POST'}
2025-03-04 16:50:21.810 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/training-jobs/{user_id} - {'GET'}
2025-03-04 16:50:21.810 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/training-jobs/{job_id}/status - {'GET'}
2025-03-04 16:50:21.810 | INFO     | willspeak_server.api.server:<module>:808 - Route: /debug/paths - {'GET'}
2025-03-04 16:50:21.810 | INFO     | willspeak_server.api.server:<module>:808 - Route: /user/create - {'POST'}
2025-03-04 16:50:21.810 | INFO     | willspeak_server.api.server:<module>:808 - Route: /user/list - {'GET'}
2025-03-04 16:50:21.810 | INFO     | willspeak_server.api.server:<module>:808 - Route: /user/{user_id} - {'GET'}
2025-03-04 16:50:21.810 | INFO     | willspeak_server.api.server:<module>:808 - Route: /user/{user_id}/update - {'POST'}
2025-03-04 16:50:21.810 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training/start - {'POST'}
2025-03-04 16:50:21.810 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training/{session_id}/upload - {'POST'}
2025-03-04 16:50:21.810 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training/{session_id}/complete - {'POST'}
2025-03-04 16:50:21.863 | INFO     | willspeak_server.ml.model_integration:initialize_models:75 - Initializing speech enhancement models
2025-03-04 16:50:21.863 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: default
2025-03-04 16:50:21.863 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:368 - No pre-trained model found
2025-03-04 16:50:21.863 | WARNING  | willspeak_server.ml.model_integration:initialize_models:82 - No pre-trained model found. Building new model.
2025-03-04 16:50:21.863 | INFO     | willspeak_server.ml.speech_enhancement_model:build_model:87 - Building improved model with input shape: (128, 128, 1)
2025-03-04 16:50:22.952 | INFO     | keras.src.utils.summary_utils:print_summary:389 - Model: "functional"

 Layer (type)         Output Shape          Param #  Connected to      

 input_spectrogram    (None, 128, 128,            0  -                 
 (InputLayer)         1)                                               

 conv2d (Conv2D)      (None, 128, 128,          320  input_spectrogra 
                      32)                                              

 batch_normalization  (None, 128, 128,          128  conv2d[0][0]      
 (BatchNormalizatio  32)                                              

 conv2d_1 (Conv2D)    (None, 128, 128,        9,248  batch_normalizat 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_1[0][0]    
 (BatchNormalizatio  32)                                              

 max_pooling2d        (None, 64, 64,              0  batch_normalizat 
 (MaxPooling2D)       32)                                              

 conv2d_2 (Conv2D)    (None, 64, 64,         18,496  max_pooling2d[0] 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_2[0][0]    
 (BatchNormalizatio  64)                                              

 conv2d_3 (Conv2D)    (None, 64, 64,         36,928  batch_normalizat 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_3[0][0]    
 (BatchNormalizatio  64)                                              

 global_average_poo  (None, 64)                  0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape (Reshape)    (None, 1, 1, 64)            0  global_average_p 

 conv2d_4 (Conv2D)    (None, 1, 1, 8)           520  reshape[0][0]     

 lambda (Lambda)      (None, 64, 64, 1)           0  batch_normalizat 

 lambda_1 (Lambda)    (None, 64, 64, 1)           0  batch_normalizat 

 conv2d_5 (Conv2D)    (None, 1, 1, 64)          576  conv2d_4[0][0]    

 concatenate          (None, 64, 64, 2)           0  lambda[0][0],     
 (Concatenate)                                       lambda_1[0][0]    

 multiply (Multiply)  (None, 64, 64,              0  batch_normalizat 
                      64)                            conv2d_5[0][0]    

 conv2d_6 (Conv2D)    (None, 64, 64, 1)          99  concatenate[0][0] 

 multiply_1           (None, 64, 64,              0  multiply[0][0],   
 (Multiply)           64)                            conv2d_6[0][0]    

 add (Add)            (None, 64, 64,              0  batch_normalizat 
                      64)                            multiply_1[0][0]  

 max_pooling2d_1      (None, 32, 32,              0  add[0][0]         
 (MaxPooling2D)       64)                                              

 conv2d_7 (Conv2D)    (None, 32, 32,         73,856  max_pooling2d_1[ 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_7[0][0]    
 (BatchNormalizatio  128)                                             

 conv2d_8 (Conv2D)    (None, 32, 32,        147,584  batch_normalizat 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_8[0][0]    
 (BatchNormalizatio  128)                                             

 global_average_poo  (None, 128)                 0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape_1 (Reshape)  (None, 1, 1, 128)           0  global_average_p 

 conv2d_9 (Conv2D)    (None, 1, 1, 16)        2,064  reshape_1[0][0]   

 lambda_2 (Lambda)    (None, 32, 32, 1)           0  batch_normalizat 

 lambda_3 (Lambda)    (None, 32, 32, 1)           0  batch_normalizat 

 conv2d_10 (Conv2D)   (None, 1, 1, 128)       2,176  conv2d_9[0][0]    

 concatenate_1        (None, 32, 32, 2)           0  lambda_2[0][0],   
 (Concatenate)                                       lambda_3[0][0]    

 multiply_2           (None, 32, 32,              0  batch_normalizat 
 (Multiply)           128)                           conv2d_10[0][0]   

 conv2d_11 (Conv2D)   (None, 32, 32, 1)          99  concatenate_1[0] 

 multiply_3           (None, 32, 32,              0  multiply_2[0][0], 
 (Multiply)           128)                           conv2d_11[0][0]   

 add_1 (Add)          (None, 32, 32,              0  batch_normalizat 
                      128)                           multiply_3[0][0]  

 max_pooling2d_2      (None, 16, 16,              0  add_1[0][0]       
 (MaxPooling2D)       128)                                             

 conv2d_12 (Conv2D)   (None, 16, 16,        295,168  max_pooling2d_2[ 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_12[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_13 (Conv2D)   (None, 16, 16,        590,080  batch_normalizat 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_13[0][0]   
 (BatchNormalizatio  256)                                             

 global_average_poo  (None, 256)                 0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape_2 (Reshape)  (None, 1, 1, 256)           0  global_average_p 

 conv2d_14 (Conv2D)   (None, 1, 1, 32)        8,224  reshape_2[0][0]   

 lambda_4 (Lambda)    (None, 16, 16, 1)           0  batch_normalizat 

 lambda_5 (Lambda)    (None, 16, 16, 1)           0  batch_normalizat 

 conv2d_15 (Conv2D)   (None, 1, 1, 256)       8,448  conv2d_14[0][0]   

 concatenate_2        (None, 16, 16, 2)           0  lambda_4[0][0],   
 (Concatenate)                                       lambda_5[0][0]    

 multiply_4           (None, 16, 16,              0  batch_normalizat 
 (Multiply)           256)                           conv2d_15[0][0]   

 conv2d_16 (Conv2D)   (None, 16, 16, 1)          99  concatenate_2[0] 

 multiply_5           (None, 16, 16,              0  multiply_4[0][0], 
 (Multiply)           256)                           conv2d_16[0][0]   

 add_2 (Add)          (None, 16, 16,              0  batch_normalizat 
                      256)                           multiply_5[0][0]  

 max_pooling2d_3      (None, 8, 8, 256)           0  add_2[0][0]       
 (MaxPooling2D)                                                        

 conv2d_17 (Conv2D)   (None, 8, 8, 512)   1,180,160  max_pooling2d_3[ 

 batch_normalizatio  (None, 8, 8, 512)       2,048  conv2d_17[0][0]   
 (BatchNormalizatio                                                   

 dropout (Dropout)    (None, 8, 8, 512)           0  batch_normalizat 

 conv2d_18 (Conv2D)   (None, 8, 8, 512)   2,359,808  dropout[0][0]     

 batch_normalizatio  (None, 8, 8, 512)       2,048  conv2d_18[0][0]   
 (BatchNormalizatio                                                   

 conv2d_transpose     (None, 16, 16,        524,544  batch_normalizat 
 (Conv2DTranspose)    256)                                             

 concatenate_3        (None, 16, 16,              0  conv2d_transpose 
 (Concatenate)        512)                           add_2[0][0]       

 conv2d_19 (Conv2D)   (None, 16, 16,      1,179,904  concatenate_3[0] 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_19[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_20 (Conv2D)   (None, 16, 16,        590,080  batch_normalizat 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_20[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_transpose_1   (None, 32, 32,        131,200  batch_normalizat 
 (Conv2DTranspose)    128)                                             

 concatenate_4        (None, 32, 32,              0  conv2d_transpose 
 (Concatenate)        256)                           add_1[0][0]       

 conv2d_21 (Conv2D)   (None, 32, 32,        295,040  concatenate_4[0] 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_21[0][0]   
 (BatchNormalizatio  128)                                             

 conv2d_22 (Conv2D)   (None, 32, 32,        147,584  batch_normalizat 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_22[0][0]   
 (BatchNormalizatio  128)                                             

 conv2d_transpose_2   (None, 64, 64,         32,832  batch_normalizat 
 (Conv2DTranspose)    64)                                              

 concatenate_5        (None, 64, 64,              0  conv2d_transpose 
 (Concatenate)        128)                           add[0][0]         

 conv2d_23 (Conv2D)   (None, 64, 64,         73,792  concatenate_5[0] 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_23[0][0]   
 (BatchNormalizatio  64)                                              

 conv2d_24 (Conv2D)   (None, 64, 64,         36,928  batch_normalizat 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_24[0][0]   
 (BatchNormalizatio  64)                                              

 conv2d_transpose_3   (None, 128, 128,        8,224  batch_normalizat 
 (Conv2DTranspose)    32)                                              

 concatenate_6        (None, 128, 128,            0  conv2d_transpose 
 (Concatenate)        64)                            batch_normalizat 

 conv2d_25 (Conv2D)   (None, 128, 128,       18,464  concatenate_6[0] 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_25[0][0]   
 (BatchNormalizatio  32)                                              

 conv2d_26 (Conv2D)   (None, 128, 128,        9,248  batch_normalizat 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_26[0][0]   
 (BatchNormalizatio  32)                                              

 enhanced_spectrogr  (None, 128, 128,           33  batch_normalizat 
 (Conv2D)             1)                                               

 Total params: 7,793,602 (29.73 MB)
 Trainable params: 7,787,714 (29.71 MB)
 Non-trainable params: 5,888 (23.00 KB)

2025-03-04 16:50:22.955 | INFO     | willspeak_server.ml.model_integration:initialize_models:84 - Base model built successfully
2025-03-04 16:50:22.956 | INFO     | willspeak_server.ml.model_integration:initialize_models:92 - Found 1 user-specific models: ['user_default_model.keras']
2025-03-04 16:50:22.956 | INFO     | willspeak_server.ml.model_integration:initialize_models:94 - Speech enhancement models initialized
2025-03-04 16:50:22.956 | INFO     | willspeak_server.api.server:startup_event:837 - Models initialized on startup
2025-03-04 16:51:01.209 | INFO     | willspeak_server.api.training_data_endpoints:verify_user_exists:621 - Verifying user existence: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:51:01.209 | DEBUG    | willspeak_server.api.training_data_endpoints:verify_user_exists:622 - Checking path: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\users\8fa1972c-a8f1-47e7-a8f6-bbbff06fa063\profile.json
2025-03-04 16:51:01.209 | INFO     | willspeak_server.api.training_data_endpoints:verify_user_exists:643 - User verified: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 (TESS)
2025-03-04 16:51:01.845 | INFO     | willspeak_server.api.training_data_endpoints:verify_user_exists:621 - Verifying user existence: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:51:01.845 | DEBUG    | willspeak_server.api.training_data_endpoints:verify_user_exists:622 - Checking path: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\users\8fa1972c-a8f1-47e7-a8f6-bbbff06fa063\profile.json
2025-03-04 16:51:01.845 | INFO     | willspeak_server.api.training_data_endpoints:verify_user_exists:643 - User verified: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 (TESS)
2025-03-04 16:51:07.699 | INFO     | willspeak_server.api.training_data_endpoints:verify_user_exists:621 - Verifying user existence: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:51:07.699 | DEBUG    | willspeak_server.api.training_data_endpoints:verify_user_exists:622 - Checking path: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\users\8fa1972c-a8f1-47e7-a8f6-bbbff06fa063\profile.json
2025-03-04 16:51:07.699 | INFO     | willspeak_server.api.training_data_endpoints:verify_user_exists:643 - User verified: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 (TESS)
2025-03-04 16:51:07.703 | INFO     | willspeak_server.api.training_data_endpoints:train_from_pairs:472 - Started training job 5d607a04-d0e0-43c2-8ae5-b23a86c7356b for user 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 with 2 pairs
2025-03-04 16:51:07.704 | INFO     | willspeak_server.ml.model_integration:train_model:161 - Starting training for user 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 with 2 sample pairs
2025-03-04 16:51:07.704 | INFO     | willspeak_server.ml.model_integration:get_model:51 - Creating new model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:51:07.704 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:51:07.704 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:368 - No pre-trained model found
2025-03-04 16:51:07.704 | WARNING  | willspeak_server.ml.model_integration:get_model:58 - No user-specific model found for 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063, attempting to load base model
2025-03-04 16:51:07.705 | INFO     | willspeak_server.ml.model_integration:train_model:172 - Training pair 1: impaired.wav <-> clear.wav
2025-03-04 16:51:07.705 | INFO     | willspeak_server.ml.model_integration:train_model:172 - Training pair 2: impaired.wav <-> clear.wav
2025-03-04 16:51:07.705 | INFO     | willspeak_server.ml.model_integration:train_model:175 - Preparing training data...
2025-03-04 16:51:07.705 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:630 - Preparing training data from 2 file pairs
2025-03-04 16:51:07.705 | DEBUG    | willspeak_server.ml.speech_enhancement_model:prepare_training_data:635 - Processing file pair 1/2: impaired.wav
2025-03-04 16:51:10.777 | ERROR    | willspeak_server.ml.speech_enhancement_model:prepare_training_data:691 - Error processing audio pair 1: 'SpeechEnhancementModel' object has no attribute 'apply_emphasis_filter'
2025-03-04 16:51:10.777 | DEBUG    | willspeak_server.ml.speech_enhancement_model:prepare_training_data:635 - Processing file pair 2/2: impaired.wav
2025-03-04 16:51:10.783 | ERROR    | willspeak_server.ml.speech_enhancement_model:prepare_training_data:691 - Error processing audio pair 2: 'SpeechEnhancementModel' object has no attribute 'apply_emphasis_filter'
2025-03-04 16:51:10.783 | ERROR    | willspeak_server.ml.model_integration:train_model:262 - Error training model: No valid training pairs found after preprocessing
2025-03-04 16:51:10.784 | ERROR    | willspeak_server.api.training_data_endpoints:_run_training_job:595 - Training job 5d607a04-d0e0-43c2-8ae5-b23a86c7356b failed: No valid training pairs found after preprocessing
2025-03-04 16:51:40.491 | INFO     | willspeak_server.api.training_data_endpoints:verify_user_exists:621 - Verifying user existence: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:51:40.493 | DEBUG    | willspeak_server.api.training_data_endpoints:verify_user_exists:622 - Checking path: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\users\8fa1972c-a8f1-47e7-a8f6-bbbff06fa063\profile.json
2025-03-04 16:51:40.493 | INFO     | willspeak_server.api.training_data_endpoints:verify_user_exists:643 - User verified: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 (TESS)
2025-03-04 16:51:40.494 | INFO     | willspeak_server.api.training_data_endpoints:create_training_pair:96 - Created training pair da4b7990-b1d6-42b8-b2b6-f15b0af5c9b6 for user 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:51:42.525 | INFO     | willspeak_server.api.training_data_endpoints:verify_user_exists:621 - Verifying user existence: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:51:42.525 | DEBUG    | willspeak_server.api.training_data_endpoints:verify_user_exists:622 - Checking path: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\users\8fa1972c-a8f1-47e7-a8f6-bbbff06fa063\profile.json
2025-03-04 16:51:42.525 | INFO     | willspeak_server.api.training_data_endpoints:verify_user_exists:643 - User verified: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 (TESS)
2025-03-04 16:51:42.527 | INFO     | willspeak_server.api.training_data_endpoints:train_from_pairs:472 - Started training job 05f507aa-3e88-4bc8-8ab2-484c9b2569cf for user 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 with 3 pairs
2025-03-04 16:51:42.529 | INFO     | willspeak_server.ml.model_integration:train_model:161 - Starting training for user 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 with 3 sample pairs
2025-03-04 16:51:42.529 | INFO     | willspeak_server.ml.model_integration:get_model:51 - Creating new model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:51:42.529 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:51:42.529 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:368 - No pre-trained model found
2025-03-04 16:51:42.529 | WARNING  | willspeak_server.ml.model_integration:get_model:58 - No user-specific model found for 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063, attempting to load base model
2025-03-04 16:51:42.529 | INFO     | willspeak_server.ml.model_integration:train_model:172 - Training pair 1: impaired.wav <-> clear.wav
2025-03-04 16:51:42.529 | INFO     | willspeak_server.ml.model_integration:train_model:172 - Training pair 2: impaired.wav <-> clear.wav
2025-03-04 16:51:42.529 | INFO     | willspeak_server.ml.model_integration:train_model:172 - Training pair 3: impaired.wav <-> clear.wav
2025-03-04 16:51:42.529 | INFO     | willspeak_server.ml.model_integration:train_model:175 - Preparing training data...
2025-03-04 16:51:42.531 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:630 - Preparing training data from 3 file pairs
2025-03-04 16:51:42.531 | DEBUG    | willspeak_server.ml.speech_enhancement_model:prepare_training_data:635 - Processing file pair 1/3: impaired.wav
2025-03-04 16:51:42.531 | ERROR    | willspeak_server.ml.speech_enhancement_model:prepare_training_data:691 - Error processing audio pair 1: 'SpeechEnhancementModel' object has no attribute 'apply_emphasis_filter'
2025-03-04 16:51:42.532 | DEBUG    | willspeak_server.ml.speech_enhancement_model:prepare_training_data:635 - Processing file pair 2/3: impaired.wav
2025-03-04 16:51:42.532 | ERROR    | willspeak_server.ml.speech_enhancement_model:prepare_training_data:691 - Error processing audio pair 2: 'SpeechEnhancementModel' object has no attribute 'apply_emphasis_filter'
2025-03-04 16:51:42.532 | DEBUG    | willspeak_server.ml.speech_enhancement_model:prepare_training_data:635 - Processing file pair 3/3: impaired.wav
2025-03-04 16:51:42.535 | ERROR    | willspeak_server.ml.speech_enhancement_model:prepare_training_data:691 - Error processing audio pair 3: 'SpeechEnhancementModel' object has no attribute 'apply_emphasis_filter'
2025-03-04 16:51:42.535 | ERROR    | willspeak_server.ml.model_integration:train_model:262 - Error training model: No valid training pairs found after preprocessing
2025-03-04 16:51:42.535 | ERROR    | willspeak_server.api.training_data_endpoints:_run_training_job:595 - Training job 05f507aa-3e88-4bc8-8ab2-484c9b2569cf failed: No valid training pairs found after preprocessing
2025-03-04 16:53:03.390 | INFO     | willspeak_server.api.server:shutdown_event:853 - Cleanup completed on shutdown
2025-03-04 16:53:13.408 | INFO     | willspeak_server.api.server:<module>:797 - Included training data router from training_data_endpoints.py
2025-03-04 16:53:13.422 | INFO     | willspeak_server.api.server:<module>:803 - Included router from endpoints.py
2025-03-04 16:53:13.422 | INFO     | willspeak_server.api.server:<module>:808 - Route: / - {'GET'}
2025-03-04 16:53:13.422 | INFO     | willspeak_server.api.server:<module>:808 - Route: /process-audio - {'POST'}
2025-03-04 16:53:13.422 | INFO     | willspeak_server.api.server:<module>:808 - Route: /process-audio-for-user - {'POST'}
2025-03-04 16:53:13.422 | INFO     | willspeak_server.api.server:<module>:808 - Route: /debug/audio-test - {'GET'}
2025-03-04 16:53:13.422 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/create-pair - {'POST'}
2025-03-04 16:53:13.422 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/upload-clear-template - {'POST'}
2025-03-04 16:53:13.422 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/templates - {'GET'}
2025-03-04 16:53:13.422 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/templates/{template_id} - {'GET'}
2025-03-04 16:53:13.423 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/templates/{template_id}/audio - {'GET'}
2025-03-04 16:53:13.423 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/user-pairs/{user_id} - {'GET'}
2025-03-04 16:53:13.423 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/use-template - {'POST'}
2025-03-04 16:53:13.423 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/train-from-pairs - {'POST'}
2025-03-04 16:53:13.423 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/training-jobs/{user_id} - {'GET'}
2025-03-04 16:53:13.423 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/training-jobs/{job_id}/status - {'GET'}
2025-03-04 16:53:13.423 | INFO     | willspeak_server.api.server:<module>:808 - Route: /debug/paths - {'GET'}
2025-03-04 16:53:13.423 | INFO     | willspeak_server.api.server:<module>:808 - Route: /user/create - {'POST'}
2025-03-04 16:53:13.423 | INFO     | willspeak_server.api.server:<module>:808 - Route: /user/list - {'GET'}
2025-03-04 16:53:13.423 | INFO     | willspeak_server.api.server:<module>:808 - Route: /user/{user_id} - {'GET'}
2025-03-04 16:53:13.423 | INFO     | willspeak_server.api.server:<module>:808 - Route: /user/{user_id}/update - {'POST'}
2025-03-04 16:53:13.423 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training/start - {'POST'}
2025-03-04 16:53:13.423 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training/{session_id}/upload - {'POST'}
2025-03-04 16:53:13.423 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training/{session_id}/complete - {'POST'}
2025-03-04 16:53:13.425 | INFO     | willspeak_server.ml.model_integration:initialize_models:75 - Initializing speech enhancement models
2025-03-04 16:53:13.425 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: default
2025-03-04 16:53:13.425 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:368 - No pre-trained model found
2025-03-04 16:53:13.425 | WARNING  | willspeak_server.ml.model_integration:initialize_models:82 - No pre-trained model found. Building new model.
2025-03-04 16:53:13.425 | INFO     | willspeak_server.ml.speech_enhancement_model:build_model:87 - Building improved model with input shape: (128, 128, 1)
2025-03-04 16:53:14.469 | INFO     | keras.src.utils.summary_utils:print_summary:389 - Model: "functional"

 Layer (type)         Output Shape          Param #  Connected to      

 input_spectrogram    (None, 128, 128,            0  -                 
 (InputLayer)         1)                                               

 conv2d (Conv2D)      (None, 128, 128,          320  input_spectrogra 
                      32)                                              

 batch_normalization  (None, 128, 128,          128  conv2d[0][0]      
 (BatchNormalizatio  32)                                              

 conv2d_1 (Conv2D)    (None, 128, 128,        9,248  batch_normalizat 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_1[0][0]    
 (BatchNormalizatio  32)                                              

 max_pooling2d        (None, 64, 64,              0  batch_normalizat 
 (MaxPooling2D)       32)                                              

 conv2d_2 (Conv2D)    (None, 64, 64,         18,496  max_pooling2d[0] 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_2[0][0]    
 (BatchNormalizatio  64)                                              

 conv2d_3 (Conv2D)    (None, 64, 64,         36,928  batch_normalizat 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_3[0][0]    
 (BatchNormalizatio  64)                                              

 global_average_poo  (None, 64)                  0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape (Reshape)    (None, 1, 1, 64)            0  global_average_p 

 conv2d_4 (Conv2D)    (None, 1, 1, 8)           520  reshape[0][0]     

 lambda (Lambda)      (None, 64, 64, 1)           0  batch_normalizat 

 lambda_1 (Lambda)    (None, 64, 64, 1)           0  batch_normalizat 

 conv2d_5 (Conv2D)    (None, 1, 1, 64)          576  conv2d_4[0][0]    

 concatenate          (None, 64, 64, 2)           0  lambda[0][0],     
 (Concatenate)                                       lambda_1[0][0]    

 multiply (Multiply)  (None, 64, 64,              0  batch_normalizat 
                      64)                            conv2d_5[0][0]    

 conv2d_6 (Conv2D)    (None, 64, 64, 1)          99  concatenate[0][0] 

 multiply_1           (None, 64, 64,              0  multiply[0][0],   
 (Multiply)           64)                            conv2d_6[0][0]    

 add (Add)            (None, 64, 64,              0  batch_normalizat 
                      64)                            multiply_1[0][0]  

 max_pooling2d_1      (None, 32, 32,              0  add[0][0]         
 (MaxPooling2D)       64)                                              

 conv2d_7 (Conv2D)    (None, 32, 32,         73,856  max_pooling2d_1[ 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_7[0][0]    
 (BatchNormalizatio  128)                                             

 conv2d_8 (Conv2D)    (None, 32, 32,        147,584  batch_normalizat 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_8[0][0]    
 (BatchNormalizatio  128)                                             

 global_average_poo  (None, 128)                 0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape_1 (Reshape)  (None, 1, 1, 128)           0  global_average_p 

 conv2d_9 (Conv2D)    (None, 1, 1, 16)        2,064  reshape_1[0][0]   

 lambda_2 (Lambda)    (None, 32, 32, 1)           0  batch_normalizat 

 lambda_3 (Lambda)    (None, 32, 32, 1)           0  batch_normalizat 

 conv2d_10 (Conv2D)   (None, 1, 1, 128)       2,176  conv2d_9[0][0]    

 concatenate_1        (None, 32, 32, 2)           0  lambda_2[0][0],   
 (Concatenate)                                       lambda_3[0][0]    

 multiply_2           (None, 32, 32,              0  batch_normalizat 
 (Multiply)           128)                           conv2d_10[0][0]   

 conv2d_11 (Conv2D)   (None, 32, 32, 1)          99  concatenate_1[0] 

 multiply_3           (None, 32, 32,              0  multiply_2[0][0], 
 (Multiply)           128)                           conv2d_11[0][0]   

 add_1 (Add)          (None, 32, 32,              0  batch_normalizat 
                      128)                           multiply_3[0][0]  

 max_pooling2d_2      (None, 16, 16,              0  add_1[0][0]       
 (MaxPooling2D)       128)                                             

 conv2d_12 (Conv2D)   (None, 16, 16,        295,168  max_pooling2d_2[ 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_12[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_13 (Conv2D)   (None, 16, 16,        590,080  batch_normalizat 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_13[0][0]   
 (BatchNormalizatio  256)                                             

 global_average_poo  (None, 256)                 0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape_2 (Reshape)  (None, 1, 1, 256)           0  global_average_p 

 conv2d_14 (Conv2D)   (None, 1, 1, 32)        8,224  reshape_2[0][0]   

 lambda_4 (Lambda)    (None, 16, 16, 1)           0  batch_normalizat 

 lambda_5 (Lambda)    (None, 16, 16, 1)           0  batch_normalizat 

 conv2d_15 (Conv2D)   (None, 1, 1, 256)       8,448  conv2d_14[0][0]   

 concatenate_2        (None, 16, 16, 2)           0  lambda_4[0][0],   
 (Concatenate)                                       lambda_5[0][0]    

 multiply_4           (None, 16, 16,              0  batch_normalizat 
 (Multiply)           256)                           conv2d_15[0][0]   

 conv2d_16 (Conv2D)   (None, 16, 16, 1)          99  concatenate_2[0] 

 multiply_5           (None, 16, 16,              0  multiply_4[0][0], 
 (Multiply)           256)                           conv2d_16[0][0]   

 add_2 (Add)          (None, 16, 16,              0  batch_normalizat 
                      256)                           multiply_5[0][0]  

 max_pooling2d_3      (None, 8, 8, 256)           0  add_2[0][0]       
 (MaxPooling2D)                                                        

 conv2d_17 (Conv2D)   (None, 8, 8, 512)   1,180,160  max_pooling2d_3[ 

 batch_normalizatio  (None, 8, 8, 512)       2,048  conv2d_17[0][0]   
 (BatchNormalizatio                                                   

 dropout (Dropout)    (None, 8, 8, 512)           0  batch_normalizat 

 conv2d_18 (Conv2D)   (None, 8, 8, 512)   2,359,808  dropout[0][0]     

 batch_normalizatio  (None, 8, 8, 512)       2,048  conv2d_18[0][0]   
 (BatchNormalizatio                                                   

 conv2d_transpose     (None, 16, 16,        524,544  batch_normalizat 
 (Conv2DTranspose)    256)                                             

 concatenate_3        (None, 16, 16,              0  conv2d_transpose 
 (Concatenate)        512)                           add_2[0][0]       

 conv2d_19 (Conv2D)   (None, 16, 16,      1,179,904  concatenate_3[0] 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_19[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_20 (Conv2D)   (None, 16, 16,        590,080  batch_normalizat 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_20[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_transpose_1   (None, 32, 32,        131,200  batch_normalizat 
 (Conv2DTranspose)    128)                                             

 concatenate_4        (None, 32, 32,              0  conv2d_transpose 
 (Concatenate)        256)                           add_1[0][0]       

 conv2d_21 (Conv2D)   (None, 32, 32,        295,040  concatenate_4[0] 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_21[0][0]   
 (BatchNormalizatio  128)                                             

 conv2d_22 (Conv2D)   (None, 32, 32,        147,584  batch_normalizat 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_22[0][0]   
 (BatchNormalizatio  128)                                             

 conv2d_transpose_2   (None, 64, 64,         32,832  batch_normalizat 
 (Conv2DTranspose)    64)                                              

 concatenate_5        (None, 64, 64,              0  conv2d_transpose 
 (Concatenate)        128)                           add[0][0]         

 conv2d_23 (Conv2D)   (None, 64, 64,         73,792  concatenate_5[0] 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_23[0][0]   
 (BatchNormalizatio  64)                                              

 conv2d_24 (Conv2D)   (None, 64, 64,         36,928  batch_normalizat 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_24[0][0]   
 (BatchNormalizatio  64)                                              

 conv2d_transpose_3   (None, 128, 128,        8,224  batch_normalizat 
 (Conv2DTranspose)    32)                                              

 concatenate_6        (None, 128, 128,            0  conv2d_transpose 
 (Concatenate)        64)                            batch_normalizat 

 conv2d_25 (Conv2D)   (None, 128, 128,       18,464  concatenate_6[0] 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_25[0][0]   
 (BatchNormalizatio  32)                                              

 conv2d_26 (Conv2D)   (None, 128, 128,        9,248  batch_normalizat 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_26[0][0]   
 (BatchNormalizatio  32)                                              

 enhanced_spectrogr  (None, 128, 128,           33  batch_normalizat 
 (Conv2D)             1)                                               

 Total params: 7,793,602 (29.73 MB)
 Trainable params: 7,787,714 (29.71 MB)
 Non-trainable params: 5,888 (23.00 KB)

2025-03-04 16:53:14.473 | INFO     | willspeak_server.ml.model_integration:initialize_models:84 - Base model built successfully
2025-03-04 16:53:14.474 | INFO     | willspeak_server.ml.model_integration:initialize_models:92 - Found 1 user-specific models: ['user_default_model.keras']
2025-03-04 16:53:14.474 | INFO     | willspeak_server.ml.model_integration:initialize_models:94 - Speech enhancement models initialized
2025-03-04 16:53:18.206 | INFO     | willspeak_server.api.server:<module>:797 - Included training data router from training_data_endpoints.py
2025-03-04 16:53:18.218 | INFO     | willspeak_server.api.server:<module>:803 - Included router from endpoints.py
2025-03-04 16:53:18.219 | INFO     | willspeak_server.api.server:<module>:808 - Route: / - {'GET'}
2025-03-04 16:53:18.219 | INFO     | willspeak_server.api.server:<module>:808 - Route: /process-audio - {'POST'}
2025-03-04 16:53:18.219 | INFO     | willspeak_server.api.server:<module>:808 - Route: /process-audio-for-user - {'POST'}
2025-03-04 16:53:18.219 | INFO     | willspeak_server.api.server:<module>:808 - Route: /debug/audio-test - {'GET'}
2025-03-04 16:53:18.219 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/create-pair - {'POST'}
2025-03-04 16:53:18.219 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/upload-clear-template - {'POST'}
2025-03-04 16:53:18.219 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/templates - {'GET'}
2025-03-04 16:53:18.219 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/templates/{template_id} - {'GET'}
2025-03-04 16:53:18.219 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/templates/{template_id}/audio - {'GET'}
2025-03-04 16:53:18.219 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/user-pairs/{user_id} - {'GET'}
2025-03-04 16:53:18.219 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/use-template - {'POST'}
2025-03-04 16:53:18.219 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/train-from-pairs - {'POST'}
2025-03-04 16:53:18.219 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/training-jobs/{user_id} - {'GET'}
2025-03-04 16:53:18.219 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/training-jobs/{job_id}/status - {'GET'}
2025-03-04 16:53:18.219 | INFO     | willspeak_server.api.server:<module>:808 - Route: /debug/paths - {'GET'}
2025-03-04 16:53:18.219 | INFO     | willspeak_server.api.server:<module>:808 - Route: /user/create - {'POST'}
2025-03-04 16:53:18.219 | INFO     | willspeak_server.api.server:<module>:808 - Route: /user/list - {'GET'}
2025-03-04 16:53:18.219 | INFO     | willspeak_server.api.server:<module>:808 - Route: /user/{user_id} - {'GET'}
2025-03-04 16:53:18.219 | INFO     | willspeak_server.api.server:<module>:808 - Route: /user/{user_id}/update - {'POST'}
2025-03-04 16:53:18.219 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training/start - {'POST'}
2025-03-04 16:53:18.219 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training/{session_id}/upload - {'POST'}
2025-03-04 16:53:18.219 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training/{session_id}/complete - {'POST'}
2025-03-04 16:53:18.261 | INFO     | willspeak_server.ml.model_integration:initialize_models:75 - Initializing speech enhancement models
2025-03-04 16:53:18.262 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: default
2025-03-04 16:53:18.262 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:368 - No pre-trained model found
2025-03-04 16:53:18.262 | WARNING  | willspeak_server.ml.model_integration:initialize_models:82 - No pre-trained model found. Building new model.
2025-03-04 16:53:18.262 | INFO     | willspeak_server.ml.speech_enhancement_model:build_model:87 - Building improved model with input shape: (128, 128, 1)
2025-03-04 16:53:19.352 | INFO     | keras.src.utils.summary_utils:print_summary:389 - Model: "functional"

 Layer (type)         Output Shape          Param #  Connected to      

 input_spectrogram    (None, 128, 128,            0  -                 
 (InputLayer)         1)                                               

 conv2d (Conv2D)      (None, 128, 128,          320  input_spectrogra 
                      32)                                              

 batch_normalization  (None, 128, 128,          128  conv2d[0][0]      
 (BatchNormalizatio  32)                                              

 conv2d_1 (Conv2D)    (None, 128, 128,        9,248  batch_normalizat 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_1[0][0]    
 (BatchNormalizatio  32)                                              

 max_pooling2d        (None, 64, 64,              0  batch_normalizat 
 (MaxPooling2D)       32)                                              

 conv2d_2 (Conv2D)    (None, 64, 64,         18,496  max_pooling2d[0] 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_2[0][0]    
 (BatchNormalizatio  64)                                              

 conv2d_3 (Conv2D)    (None, 64, 64,         36,928  batch_normalizat 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_3[0][0]    
 (BatchNormalizatio  64)                                              

 global_average_poo  (None, 64)                  0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape (Reshape)    (None, 1, 1, 64)            0  global_average_p 

 conv2d_4 (Conv2D)    (None, 1, 1, 8)           520  reshape[0][0]     

 lambda (Lambda)      (None, 64, 64, 1)           0  batch_normalizat 

 lambda_1 (Lambda)    (None, 64, 64, 1)           0  batch_normalizat 

 conv2d_5 (Conv2D)    (None, 1, 1, 64)          576  conv2d_4[0][0]    

 concatenate          (None, 64, 64, 2)           0  lambda[0][0],     
 (Concatenate)                                       lambda_1[0][0]    

 multiply (Multiply)  (None, 64, 64,              0  batch_normalizat 
                      64)                            conv2d_5[0][0]    

 conv2d_6 (Conv2D)    (None, 64, 64, 1)          99  concatenate[0][0] 

 multiply_1           (None, 64, 64,              0  multiply[0][0],   
 (Multiply)           64)                            conv2d_6[0][0]    

 add (Add)            (None, 64, 64,              0  batch_normalizat 
                      64)                            multiply_1[0][0]  

 max_pooling2d_1      (None, 32, 32,              0  add[0][0]         
 (MaxPooling2D)       64)                                              

 conv2d_7 (Conv2D)    (None, 32, 32,         73,856  max_pooling2d_1[ 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_7[0][0]    
 (BatchNormalizatio  128)                                             

 conv2d_8 (Conv2D)    (None, 32, 32,        147,584  batch_normalizat 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_8[0][0]    
 (BatchNormalizatio  128)                                             

 global_average_poo  (None, 128)                 0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape_1 (Reshape)  (None, 1, 1, 128)           0  global_average_p 

 conv2d_9 (Conv2D)    (None, 1, 1, 16)        2,064  reshape_1[0][0]   

 lambda_2 (Lambda)    (None, 32, 32, 1)           0  batch_normalizat 

 lambda_3 (Lambda)    (None, 32, 32, 1)           0  batch_normalizat 

 conv2d_10 (Conv2D)   (None, 1, 1, 128)       2,176  conv2d_9[0][0]    

 concatenate_1        (None, 32, 32, 2)           0  lambda_2[0][0],   
 (Concatenate)                                       lambda_3[0][0]    

 multiply_2           (None, 32, 32,              0  batch_normalizat 
 (Multiply)           128)                           conv2d_10[0][0]   

 conv2d_11 (Conv2D)   (None, 32, 32, 1)          99  concatenate_1[0] 

 multiply_3           (None, 32, 32,              0  multiply_2[0][0], 
 (Multiply)           128)                           conv2d_11[0][0]   

 add_1 (Add)          (None, 32, 32,              0  batch_normalizat 
                      128)                           multiply_3[0][0]  

 max_pooling2d_2      (None, 16, 16,              0  add_1[0][0]       
 (MaxPooling2D)       128)                                             

 conv2d_12 (Conv2D)   (None, 16, 16,        295,168  max_pooling2d_2[ 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_12[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_13 (Conv2D)   (None, 16, 16,        590,080  batch_normalizat 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_13[0][0]   
 (BatchNormalizatio  256)                                             

 global_average_poo  (None, 256)                 0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape_2 (Reshape)  (None, 1, 1, 256)           0  global_average_p 

 conv2d_14 (Conv2D)   (None, 1, 1, 32)        8,224  reshape_2[0][0]   

 lambda_4 (Lambda)    (None, 16, 16, 1)           0  batch_normalizat 

 lambda_5 (Lambda)    (None, 16, 16, 1)           0  batch_normalizat 

 conv2d_15 (Conv2D)   (None, 1, 1, 256)       8,448  conv2d_14[0][0]   

 concatenate_2        (None, 16, 16, 2)           0  lambda_4[0][0],   
 (Concatenate)                                       lambda_5[0][0]    

 multiply_4           (None, 16, 16,              0  batch_normalizat 
 (Multiply)           256)                           conv2d_15[0][0]   

 conv2d_16 (Conv2D)   (None, 16, 16, 1)          99  concatenate_2[0] 

 multiply_5           (None, 16, 16,              0  multiply_4[0][0], 
 (Multiply)           256)                           conv2d_16[0][0]   

 add_2 (Add)          (None, 16, 16,              0  batch_normalizat 
                      256)                           multiply_5[0][0]  

 max_pooling2d_3      (None, 8, 8, 256)           0  add_2[0][0]       
 (MaxPooling2D)                                                        

 conv2d_17 (Conv2D)   (None, 8, 8, 512)   1,180,160  max_pooling2d_3[ 

 batch_normalizatio  (None, 8, 8, 512)       2,048  conv2d_17[0][0]   
 (BatchNormalizatio                                                   

 dropout (Dropout)    (None, 8, 8, 512)           0  batch_normalizat 

 conv2d_18 (Conv2D)   (None, 8, 8, 512)   2,359,808  dropout[0][0]     

 batch_normalizatio  (None, 8, 8, 512)       2,048  conv2d_18[0][0]   
 (BatchNormalizatio                                                   

 conv2d_transpose     (None, 16, 16,        524,544  batch_normalizat 
 (Conv2DTranspose)    256)                                             

 concatenate_3        (None, 16, 16,              0  conv2d_transpose 
 (Concatenate)        512)                           add_2[0][0]       

 conv2d_19 (Conv2D)   (None, 16, 16,      1,179,904  concatenate_3[0] 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_19[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_20 (Conv2D)   (None, 16, 16,        590,080  batch_normalizat 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_20[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_transpose_1   (None, 32, 32,        131,200  batch_normalizat 
 (Conv2DTranspose)    128)                                             

 concatenate_4        (None, 32, 32,              0  conv2d_transpose 
 (Concatenate)        256)                           add_1[0][0]       

 conv2d_21 (Conv2D)   (None, 32, 32,        295,040  concatenate_4[0] 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_21[0][0]   
 (BatchNormalizatio  128)                                             

 conv2d_22 (Conv2D)   (None, 32, 32,        147,584  batch_normalizat 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_22[0][0]   
 (BatchNormalizatio  128)                                             

 conv2d_transpose_2   (None, 64, 64,         32,832  batch_normalizat 
 (Conv2DTranspose)    64)                                              

 concatenate_5        (None, 64, 64,              0  conv2d_transpose 
 (Concatenate)        128)                           add[0][0]         

 conv2d_23 (Conv2D)   (None, 64, 64,         73,792  concatenate_5[0] 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_23[0][0]   
 (BatchNormalizatio  64)                                              

 conv2d_24 (Conv2D)   (None, 64, 64,         36,928  batch_normalizat 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_24[0][0]   
 (BatchNormalizatio  64)                                              

 conv2d_transpose_3   (None, 128, 128,        8,224  batch_normalizat 
 (Conv2DTranspose)    32)                                              

 concatenate_6        (None, 128, 128,            0  conv2d_transpose 
 (Concatenate)        64)                            batch_normalizat 

 conv2d_25 (Conv2D)   (None, 128, 128,       18,464  concatenate_6[0] 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_25[0][0]   
 (BatchNormalizatio  32)                                              

 conv2d_26 (Conv2D)   (None, 128, 128,        9,248  batch_normalizat 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_26[0][0]   
 (BatchNormalizatio  32)                                              

 enhanced_spectrogr  (None, 128, 128,           33  batch_normalizat 
 (Conv2D)             1)                                               

 Total params: 7,793,602 (29.73 MB)
 Trainable params: 7,787,714 (29.71 MB)
 Non-trainable params: 5,888 (23.00 KB)

2025-03-04 16:53:19.358 | INFO     | willspeak_server.ml.model_integration:initialize_models:84 - Base model built successfully
2025-03-04 16:53:19.358 | INFO     | willspeak_server.ml.model_integration:initialize_models:92 - Found 1 user-specific models: ['user_default_model.keras']
2025-03-04 16:53:19.358 | INFO     | willspeak_server.ml.model_integration:initialize_models:94 - Speech enhancement models initialized
2025-03-04 16:53:19.358 | INFO     | willspeak_server.api.server:startup_event:837 - Models initialized on startup
2025-03-04 16:53:23.354 | INFO     | willspeak_server.api.training_data_endpoints:verify_user_exists:621 - Verifying user existence: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:53:23.354 | DEBUG    | willspeak_server.api.training_data_endpoints:verify_user_exists:622 - Checking path: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\users\8fa1972c-a8f1-47e7-a8f6-bbbff06fa063\profile.json
2025-03-04 16:53:23.356 | INFO     | willspeak_server.api.training_data_endpoints:verify_user_exists:643 - User verified: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 (TESS)
2025-03-04 16:53:23.358 | INFO     | willspeak_server.api.training_data_endpoints:train_from_pairs:472 - Started training job 5c53f338-022f-4818-9777-85a9738f1d28 for user 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 with 3 pairs
2025-03-04 16:53:23.359 | INFO     | willspeak_server.ml.model_integration:train_model:161 - Starting training for user 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 with 3 sample pairs
2025-03-04 16:53:23.359 | INFO     | willspeak_server.ml.model_integration:get_model:51 - Creating new model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:53:23.359 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:53:23.359 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:368 - No pre-trained model found
2025-03-04 16:53:23.359 | WARNING  | willspeak_server.ml.model_integration:get_model:58 - No user-specific model found for 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063, attempting to load base model
2025-03-04 16:53:23.359 | INFO     | willspeak_server.ml.model_integration:train_model:172 - Training pair 1: impaired.wav <-> clear.wav
2025-03-04 16:53:23.359 | INFO     | willspeak_server.ml.model_integration:train_model:172 - Training pair 2: impaired.wav <-> clear.wav
2025-03-04 16:53:23.359 | INFO     | willspeak_server.ml.model_integration:train_model:172 - Training pair 3: impaired.wav <-> clear.wav
2025-03-04 16:53:23.359 | INFO     | willspeak_server.ml.model_integration:train_model:175 - Preparing training data...
2025-03-04 16:53:23.360 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:766 - Preparing training data from 3 file pairs
2025-03-04 16:53:23.360 | DEBUG    | willspeak_server.ml.speech_enhancement_model:prepare_training_data:771 - Processing file pair 1/3: impaired.wav
2025-03-04 16:53:25.558 | DEBUG    | willspeak_server.ml.speech_enhancement_model:prepare_training_data:771 - Processing file pair 2/3: impaired.wav
2025-03-04 16:53:25.582 | DEBUG    | willspeak_server.ml.speech_enhancement_model:prepare_training_data:771 - Processing file pair 3/3: impaired.wav
2025-03-04 16:53:26.121 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:836 - Prepared 3 valid training pairs out of 3 total pairs
2025-03-04 16:53:26.121 | INFO     | willspeak_server.ml.speech_enhancement_model:prepare_training_data:837 - Training data shapes: X=(3, 128, 128, 1), Y=(3, 128, 128, 1)
2025-03-04 16:53:26.123 | INFO     | willspeak_server.ml.model_integration:train_model:198 - Training data split: 2 training samples, 1 validation samples
2025-03-04 16:53:26.123 | INFO     | willspeak_server.ml.model_integration:train_model:201 - Training model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:53:26.123 | INFO     | willspeak_server.ml.speech_enhancement_model:train:674 - Adjusted batch_size to 2 due to small dataset (2 samples)
2025-03-04 16:53:26.123 | INFO     | willspeak_server.ml.speech_enhancement_model:train:712 - Starting training with 2 samples, batch size 2, 50 epochs
2025-03-04 16:55:29.465 | ERROR    | willspeak_server.ml.model_integration:train_model:262 - Error training model: 'Adam' object has no attribute 'lr'
2025-03-04 16:55:29.467 | ERROR    | willspeak_server.api.training_data_endpoints:_run_training_job:595 - Training job 5c53f338-022f-4818-9777-85a9738f1d28 failed: 'Adam' object has no attribute 'lr'
2025-03-04 16:56:04.438 | INFO     | willspeak_server.api.endpoints:verify_user_exists:349 - Verifying user existence: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:56:04.439 | DEBUG    | willspeak_server.api.endpoints:verify_user_exists:350 - Checking path: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\users\8fa1972c-a8f1-47e7-a8f6-bbbff06fa063\profile.json
2025-03-04 16:56:04.439 | INFO     | willspeak_server.api.endpoints:verify_user_exists:371 - User verified: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 (TESS)
2025-03-04 16:56:04.440 | INFO     | willspeak_server.api.server:process_audio_generic:514 - Processing audio file: audio.wav for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:56:04.442 | INFO     | willspeak_server.api.server:read_audio_file:304 - Reading audio file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_cbe32d22-6f33-4f4b-8eb9-13eb49f9358c.wav
2025-03-04 16:56:04.442 | DEBUG    | willspeak_server.api.server:read_audio_file:311 - Attempting to read with soundfile
2025-03-04 16:56:04.446 | INFO     | willspeak_server.api.server:read_audio_file:314 - Successfully read with soundfile: sr=16000, shape=(32768,), dtype=float64
2025-03-04 16:56:04.446 | INFO     | willspeak_server.api.server:process_audio_generic:566 - Audio file loaded: 32768 samples, 16000Hz
2025-03-04 16:56:04.446 | INFO     | willspeak_server.api.server:preprocess_audio:115 - Preprocessing audio: original sr=16000, target sr=16000
2025-03-04 16:56:04.446 | DEBUG    | willspeak_server.api.server:preprocess_audio:116 - Audio data shape: (32768,), dtype: float64
2025-03-04 16:56:04.446 | INFO     | willspeak_server.api.server:preprocess_audio:146 - Normalizing amplitude
2025-03-04 16:56:04.447 | INFO     | willspeak_server.api.server:preprocess_audio:156 - Removing silence
2025-03-04 16:56:04.850 | DEBUG    | willspeak_server.api.server:preprocess_audio:171 - After silence removal, audio length: 32768
2025-03-04 16:56:04.850 | INFO     | willspeak_server.api.server:preprocess_audio:182 - Preprocessing complete
2025-03-04 16:56:04.850 | INFO     | willspeak_server.api.server:extract_features:199 - Extracting features: n_mfcc=13, n_fft=2048
2025-03-04 16:56:04.863 | INFO     | willspeak_server.api.server:extract_features:230 - Feature extraction complete
2025-03-04 16:56:05.634 | INFO     | willspeak_server.api.server:transcribe_audio:281 - Transcription: hello my name is John
2025-03-04 16:56:05.634 | INFO     | willspeak_server.ml.model_integration:get_model:51 - Creating new model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:56:05.634 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:56:05.635 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:368 - No pre-trained model found
2025-03-04 16:56:05.635 | WARNING  | willspeak_server.ml.model_integration:get_model:58 - No user-specific model found for 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063, attempting to load base model
2025-03-04 16:56:05.635 | INFO     | willspeak_server.ml.model_integration:enhance_audio:123 - Enhancing audio with model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:56:07.014 | ERROR    | willspeak_server.api.server:enhance_speech:254 - Speech enhancement failed: 'SpeechEnhancementModel' object has no attribute 'postprocess_spectrogram'
2025-03-04 16:56:07.014 | WARNING  | willspeak_server.api.server:enhance_speech:256 - Returning original audio due to enhancement failure
2025-03-04 16:56:07.015 | INFO     | willspeak_server.api.server:save_audio_file:402 - Saving audio to: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\processed_b07a0d0a-87f3-471f-b17e-ae5b257180e9.wav
2025-03-04 16:56:07.015 | DEBUG    | willspeak_server.api.server:save_audio_file:412 - Attempting to save with soundfile
2025-03-04 16:56:07.017 | INFO     | willspeak_server.api.server:save_audio_file:415 - Successfully saved with soundfile
2025-03-04 16:56:07.017 | DEBUG    | willspeak_server.api.server:process_audio_generic:633 - Removed temporary file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_cbe32d22-6f33-4f4b-8eb9-13eb49f9358c.wav
2025-03-04 16:56:21.957 | INFO     | willspeak_server.api.endpoints:verify_user_exists:349 - Verifying user existence: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:56:21.957 | DEBUG    | willspeak_server.api.endpoints:verify_user_exists:350 - Checking path: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\users\8fa1972c-a8f1-47e7-a8f6-bbbff06fa063\profile.json
2025-03-04 16:56:21.957 | INFO     | willspeak_server.api.endpoints:verify_user_exists:371 - User verified: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 (TESS)
2025-03-04 16:56:21.957 | INFO     | willspeak_server.api.server:process_audio_generic:514 - Processing audio file: audio.wav for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:56:21.958 | INFO     | willspeak_server.api.server:read_audio_file:304 - Reading audio file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_a343854b-c9e1-4924-8768-a8dfb37ef2e1.wav
2025-03-04 16:56:21.958 | DEBUG    | willspeak_server.api.server:read_audio_file:311 - Attempting to read with soundfile
2025-03-04 16:56:21.958 | INFO     | willspeak_server.api.server:read_audio_file:314 - Successfully read with soundfile: sr=16000, shape=(43008,), dtype=float64
2025-03-04 16:56:21.958 | INFO     | willspeak_server.api.server:process_audio_generic:566 - Audio file loaded: 43008 samples, 16000Hz
2025-03-04 16:56:21.958 | INFO     | willspeak_server.api.server:preprocess_audio:115 - Preprocessing audio: original sr=16000, target sr=16000
2025-03-04 16:56:21.958 | DEBUG    | willspeak_server.api.server:preprocess_audio:116 - Audio data shape: (43008,), dtype: float64
2025-03-04 16:56:21.959 | INFO     | willspeak_server.api.server:preprocess_audio:146 - Normalizing amplitude
2025-03-04 16:56:21.959 | INFO     | willspeak_server.api.server:preprocess_audio:156 - Removing silence
2025-03-04 16:56:21.961 | DEBUG    | willspeak_server.api.server:preprocess_audio:171 - After silence removal, audio length: 35712
2025-03-04 16:56:21.961 | INFO     | willspeak_server.api.server:preprocess_audio:182 - Preprocessing complete
2025-03-04 16:56:21.961 | INFO     | willspeak_server.api.server:extract_features:199 - Extracting features: n_mfcc=13, n_fft=2048
2025-03-04 16:56:21.970 | INFO     | willspeak_server.api.server:extract_features:230 - Feature extraction complete
2025-03-04 16:56:22.781 | INFO     | willspeak_server.api.server:transcribe_audio:281 - Transcription: today is Monday
2025-03-04 16:56:22.781 | INFO     | willspeak_server.ml.model_integration:get_model:51 - Creating new model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:56:22.782 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:56:22.782 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:368 - No pre-trained model found
2025-03-04 16:56:22.782 | WARNING  | willspeak_server.ml.model_integration:get_model:58 - No user-specific model found for 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063, attempting to load base model
2025-03-04 16:56:22.782 | INFO     | willspeak_server.ml.model_integration:enhance_audio:123 - Enhancing audio with model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:56:22.930 | ERROR    | willspeak_server.api.server:enhance_speech:254 - Speech enhancement failed: 'SpeechEnhancementModel' object has no attribute 'postprocess_spectrogram'
2025-03-04 16:56:22.930 | WARNING  | willspeak_server.api.server:enhance_speech:256 - Returning original audio due to enhancement failure
2025-03-04 16:56:22.931 | INFO     | willspeak_server.api.server:save_audio_file:402 - Saving audio to: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\processed_9bb22ea4-b5c1-40a3-b9e9-74f652c4edde.wav
2025-03-04 16:56:22.931 | DEBUG    | willspeak_server.api.server:save_audio_file:412 - Attempting to save with soundfile
2025-03-04 16:56:22.934 | INFO     | willspeak_server.api.server:save_audio_file:415 - Successfully saved with soundfile
2025-03-04 16:56:22.936 | DEBUG    | willspeak_server.api.server:process_audio_generic:633 - Removed temporary file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_a343854b-c9e1-4924-8768-a8dfb37ef2e1.wav
2025-03-04 16:56:37.295 | INFO     | willspeak_server.api.endpoints:verify_user_exists:349 - Verifying user existence: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:56:37.295 | DEBUG    | willspeak_server.api.endpoints:verify_user_exists:350 - Checking path: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\users\8fa1972c-a8f1-47e7-a8f6-bbbff06fa063\profile.json
2025-03-04 16:56:37.295 | INFO     | willspeak_server.api.endpoints:verify_user_exists:371 - User verified: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 (TESS)
2025-03-04 16:56:37.295 | INFO     | willspeak_server.api.server:process_audio_generic:514 - Processing audio file: audio.wav for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:56:37.296 | INFO     | willspeak_server.api.server:read_audio_file:304 - Reading audio file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_fda1fb7d-a673-4c02-8e91-a58190d544ff.wav
2025-03-04 16:56:37.296 | DEBUG    | willspeak_server.api.server:read_audio_file:311 - Attempting to read with soundfile
2025-03-04 16:56:37.297 | INFO     | willspeak_server.api.server:read_audio_file:314 - Successfully read with soundfile: sr=16000, shape=(40960,), dtype=float64
2025-03-04 16:56:37.297 | INFO     | willspeak_server.api.server:process_audio_generic:566 - Audio file loaded: 40960 samples, 16000Hz
2025-03-04 16:56:37.297 | INFO     | willspeak_server.api.server:preprocess_audio:115 - Preprocessing audio: original sr=16000, target sr=16000
2025-03-04 16:56:37.297 | DEBUG    | willspeak_server.api.server:preprocess_audio:116 - Audio data shape: (40960,), dtype: float64
2025-03-04 16:56:37.297 | INFO     | willspeak_server.api.server:preprocess_audio:146 - Normalizing amplitude
2025-03-04 16:56:37.297 | INFO     | willspeak_server.api.server:preprocess_audio:156 - Removing silence
2025-03-04 16:56:37.299 | DEBUG    | willspeak_server.api.server:preprocess_audio:171 - After silence removal, audio length: 38912
2025-03-04 16:56:37.299 | INFO     | willspeak_server.api.server:preprocess_audio:182 - Preprocessing complete
2025-03-04 16:56:37.299 | INFO     | willspeak_server.api.server:extract_features:199 - Extracting features: n_mfcc=13, n_fft=2048
2025-03-04 16:56:37.306 | INFO     | willspeak_server.api.server:extract_features:230 - Feature extraction complete
2025-03-04 16:56:38.579 | INFO     | willspeak_server.api.server:transcribe_audio:281 - Transcription: what time is today
2025-03-04 16:56:38.580 | INFO     | willspeak_server.ml.model_integration:get_model:51 - Creating new model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:56:38.580 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:56:38.580 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:368 - No pre-trained model found
2025-03-04 16:56:38.580 | WARNING  | willspeak_server.ml.model_integration:get_model:58 - No user-specific model found for 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063, attempting to load base model
2025-03-04 16:56:38.580 | INFO     | willspeak_server.ml.model_integration:enhance_audio:123 - Enhancing audio with model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:56:38.717 | ERROR    | willspeak_server.api.server:enhance_speech:254 - Speech enhancement failed: 'SpeechEnhancementModel' object has no attribute 'postprocess_spectrogram'
2025-03-04 16:56:38.717 | WARNING  | willspeak_server.api.server:enhance_speech:256 - Returning original audio due to enhancement failure
2025-03-04 16:56:38.717 | INFO     | willspeak_server.api.server:save_audio_file:402 - Saving audio to: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\processed_9419339e-c519-4f66-af1b-a1e48036b3ac.wav
2025-03-04 16:56:38.718 | DEBUG    | willspeak_server.api.server:save_audio_file:412 - Attempting to save with soundfile
2025-03-04 16:56:38.722 | INFO     | willspeak_server.api.server:save_audio_file:415 - Successfully saved with soundfile
2025-03-04 16:56:38.722 | DEBUG    | willspeak_server.api.server:process_audio_generic:633 - Removed temporary file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_fda1fb7d-a673-4c02-8e91-a58190d544ff.wav
2025-03-04 16:57:29.929 | INFO     | willspeak_server.api.endpoints:verify_user_exists:349 - Verifying user existence: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:57:29.929 | DEBUG    | willspeak_server.api.endpoints:verify_user_exists:350 - Checking path: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\users\8fa1972c-a8f1-47e7-a8f6-bbbff06fa063\profile.json
2025-03-04 16:57:29.929 | INFO     | willspeak_server.api.endpoints:verify_user_exists:371 - User verified: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 (TESS)
2025-03-04 16:57:29.929 | INFO     | willspeak_server.api.server:process_audio_generic:514 - Processing audio file: audio.wav for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:57:29.931 | INFO     | willspeak_server.api.server:read_audio_file:304 - Reading audio file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_c026c451-1e7c-4b52-96b8-b8d3fbc4b834.wav
2025-03-04 16:57:29.931 | DEBUG    | willspeak_server.api.server:read_audio_file:311 - Attempting to read with soundfile
2025-03-04 16:57:29.933 | INFO     | willspeak_server.api.server:read_audio_file:314 - Successfully read with soundfile: sr=16000, shape=(53248,), dtype=float64
2025-03-04 16:57:29.933 | INFO     | willspeak_server.api.server:process_audio_generic:566 - Audio file loaded: 53248 samples, 16000Hz
2025-03-04 16:57:29.933 | INFO     | willspeak_server.api.server:preprocess_audio:115 - Preprocessing audio: original sr=16000, target sr=16000
2025-03-04 16:57:29.933 | DEBUG    | willspeak_server.api.server:preprocess_audio:116 - Audio data shape: (53248,), dtype: float64
2025-03-04 16:57:29.933 | INFO     | willspeak_server.api.server:preprocess_audio:146 - Normalizing amplitude
2025-03-04 16:57:29.935 | INFO     | willspeak_server.api.server:preprocess_audio:156 - Removing silence
2025-03-04 16:57:29.937 | DEBUG    | willspeak_server.api.server:preprocess_audio:171 - After silence removal, audio length: 49280
2025-03-04 16:57:29.937 | INFO     | willspeak_server.api.server:preprocess_audio:182 - Preprocessing complete
2025-03-04 16:57:29.937 | INFO     | willspeak_server.api.server:extract_features:199 - Extracting features: n_mfcc=13, n_fft=2048
2025-03-04 16:57:29.945 | INFO     | willspeak_server.api.server:extract_features:230 - Feature extraction complete
2025-03-04 16:57:30.715 | INFO     | willspeak_server.api.server:transcribe_audio:281 - Transcription: my name is Jonathan
2025-03-04 16:57:30.715 | INFO     | willspeak_server.ml.model_integration:get_model:51 - Creating new model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:57:30.716 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:57:30.716 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:368 - No pre-trained model found
2025-03-04 16:57:30.716 | WARNING  | willspeak_server.ml.model_integration:get_model:58 - No user-specific model found for 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063, attempting to load base model
2025-03-04 16:57:30.716 | INFO     | willspeak_server.ml.model_integration:enhance_audio:123 - Enhancing audio with model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:57:30.859 | ERROR    | willspeak_server.api.server:enhance_speech:254 - Speech enhancement failed: 'SpeechEnhancementModel' object has no attribute 'postprocess_spectrogram'
2025-03-04 16:57:30.859 | WARNING  | willspeak_server.api.server:enhance_speech:256 - Returning original audio due to enhancement failure
2025-03-04 16:57:30.860 | INFO     | willspeak_server.api.server:save_audio_file:402 - Saving audio to: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\processed_d814a685-0008-4361-ab02-e3e28d4ca338.wav
2025-03-04 16:57:30.860 | DEBUG    | willspeak_server.api.server:save_audio_file:412 - Attempting to save with soundfile
2025-03-04 16:57:30.865 | INFO     | willspeak_server.api.server:save_audio_file:415 - Successfully saved with soundfile
2025-03-04 16:57:30.865 | DEBUG    | willspeak_server.api.server:process_audio_generic:633 - Removed temporary file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_c026c451-1e7c-4b52-96b8-b8d3fbc4b834.wav
2025-03-04 16:57:39.360 | INFO     | willspeak_server.api.endpoints:verify_user_exists:349 - Verifying user existence: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:57:39.360 | DEBUG    | willspeak_server.api.endpoints:verify_user_exists:350 - Checking path: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\users\8fa1972c-a8f1-47e7-a8f6-bbbff06fa063\profile.json
2025-03-04 16:57:39.360 | INFO     | willspeak_server.api.endpoints:verify_user_exists:371 - User verified: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 (TESS)
2025-03-04 16:57:39.360 | INFO     | willspeak_server.api.server:process_audio_generic:514 - Processing audio file: audio.wav for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:57:39.361 | INFO     | willspeak_server.api.server:read_audio_file:304 - Reading audio file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_86ba5b53-745b-4610-80a8-03944d121a16.wav
2025-03-04 16:57:39.361 | DEBUG    | willspeak_server.api.server:read_audio_file:311 - Attempting to read with soundfile
2025-03-04 16:57:39.362 | INFO     | willspeak_server.api.server:read_audio_file:314 - Successfully read with soundfile: sr=16000, shape=(61440,), dtype=float64
2025-03-04 16:57:39.362 | INFO     | willspeak_server.api.server:process_audio_generic:566 - Audio file loaded: 61440 samples, 16000Hz
2025-03-04 16:57:39.362 | INFO     | willspeak_server.api.server:preprocess_audio:115 - Preprocessing audio: original sr=16000, target sr=16000
2025-03-04 16:57:39.362 | DEBUG    | willspeak_server.api.server:preprocess_audio:116 - Audio data shape: (61440,), dtype: float64
2025-03-04 16:57:39.362 | INFO     | willspeak_server.api.server:preprocess_audio:146 - Normalizing amplitude
2025-03-04 16:57:39.363 | INFO     | willspeak_server.api.server:preprocess_audio:156 - Removing silence
2025-03-04 16:57:39.365 | DEBUG    | willspeak_server.api.server:preprocess_audio:171 - After silence removal, audio length: 60288
2025-03-04 16:57:39.365 | INFO     | willspeak_server.api.server:preprocess_audio:182 - Preprocessing complete
2025-03-04 16:57:39.365 | INFO     | willspeak_server.api.server:extract_features:199 - Extracting features: n_mfcc=13, n_fft=2048
2025-03-04 16:57:39.374 | INFO     | willspeak_server.api.server:extract_features:230 - Feature extraction complete
2025-03-04 16:57:40.468 | INFO     | willspeak_server.api.server:transcribe_audio:281 - Transcription: my name is Jonathan
2025-03-04 16:57:40.469 | INFO     | willspeak_server.ml.model_integration:get_model:51 - Creating new model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:57:40.469 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:57:40.470 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:368 - No pre-trained model found
2025-03-04 16:57:40.470 | WARNING  | willspeak_server.ml.model_integration:get_model:58 - No user-specific model found for 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063, attempting to load base model
2025-03-04 16:57:40.470 | INFO     | willspeak_server.ml.model_integration:enhance_audio:123 - Enhancing audio with model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:57:40.628 | ERROR    | willspeak_server.api.server:enhance_speech:254 - Speech enhancement failed: 'SpeechEnhancementModel' object has no attribute 'postprocess_spectrogram'
2025-03-04 16:57:40.628 | WARNING  | willspeak_server.api.server:enhance_speech:256 - Returning original audio due to enhancement failure
2025-03-04 16:57:40.628 | INFO     | willspeak_server.api.server:save_audio_file:402 - Saving audio to: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\processed_2c5e461d-24f8-4574-8010-c7599aed8ab6.wav
2025-03-04 16:57:40.628 | DEBUG    | willspeak_server.api.server:save_audio_file:412 - Attempting to save with soundfile
2025-03-04 16:57:40.631 | INFO     | willspeak_server.api.server:save_audio_file:415 - Successfully saved with soundfile
2025-03-04 16:57:40.632 | DEBUG    | willspeak_server.api.server:process_audio_generic:633 - Removed temporary file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_86ba5b53-745b-4610-80a8-03944d121a16.wav
2025-03-04 16:58:51.630 | INFO     | willspeak_server.api.endpoints:verify_user_exists:349 - Verifying user existence: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:58:51.631 | DEBUG    | willspeak_server.api.endpoints:verify_user_exists:350 - Checking path: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\users\8fa1972c-a8f1-47e7-a8f6-bbbff06fa063\profile.json
2025-03-04 16:58:51.631 | INFO     | willspeak_server.api.endpoints:verify_user_exists:371 - User verified: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 (TESS)
2025-03-04 16:58:51.631 | INFO     | willspeak_server.api.server:process_audio_generic:514 - Processing audio file: audio.wav for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:58:51.632 | INFO     | willspeak_server.api.server:read_audio_file:304 - Reading audio file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_eadfb694-6f5b-4051-aa46-bcbefc877907.wav
2025-03-04 16:58:51.632 | DEBUG    | willspeak_server.api.server:read_audio_file:311 - Attempting to read with soundfile
2025-03-04 16:58:51.634 | INFO     | willspeak_server.api.server:read_audio_file:314 - Successfully read with soundfile: sr=16000, shape=(71680,), dtype=float64
2025-03-04 16:58:51.634 | INFO     | willspeak_server.api.server:process_audio_generic:566 - Audio file loaded: 71680 samples, 16000Hz
2025-03-04 16:58:51.634 | INFO     | willspeak_server.api.server:preprocess_audio:115 - Preprocessing audio: original sr=16000, target sr=16000
2025-03-04 16:58:51.634 | DEBUG    | willspeak_server.api.server:preprocess_audio:116 - Audio data shape: (71680,), dtype: float64
2025-03-04 16:58:51.634 | INFO     | willspeak_server.api.server:preprocess_audio:146 - Normalizing amplitude
2025-03-04 16:58:51.635 | INFO     | willspeak_server.api.server:preprocess_audio:156 - Removing silence
2025-03-04 16:58:51.638 | DEBUG    | willspeak_server.api.server:preprocess_audio:171 - After silence removal, audio length: 69120
2025-03-04 16:58:51.638 | INFO     | willspeak_server.api.server:preprocess_audio:182 - Preprocessing complete
2025-03-04 16:58:51.638 | INFO     | willspeak_server.api.server:extract_features:199 - Extracting features: n_mfcc=13, n_fft=2048
2025-03-04 16:58:51.649 | INFO     | willspeak_server.api.server:extract_features:230 - Feature extraction complete
2025-03-04 16:58:53.323 | INFO     | willspeak_server.api.server:transcribe_audio:281 - Transcription: I love fortnite my favorite game
2025-03-04 16:58:53.323 | INFO     | willspeak_server.ml.model_integration:get_model:51 - Creating new model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:58:53.323 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:58:53.323 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:368 - No pre-trained model found
2025-03-04 16:58:53.323 | WARNING  | willspeak_server.ml.model_integration:get_model:58 - No user-specific model found for 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063, attempting to load base model
2025-03-04 16:58:53.324 | INFO     | willspeak_server.ml.model_integration:enhance_audio:123 - Enhancing audio with model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:58:53.492 | ERROR    | willspeak_server.api.server:enhance_speech:254 - Speech enhancement failed: 'SpeechEnhancementModel' object has no attribute 'postprocess_spectrogram'
2025-03-04 16:58:53.492 | WARNING  | willspeak_server.api.server:enhance_speech:256 - Returning original audio due to enhancement failure
2025-03-04 16:58:53.492 | INFO     | willspeak_server.api.server:save_audio_file:402 - Saving audio to: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\processed_b00b7edb-e48f-4d5a-ab79-cb0a0aa44a26.wav
2025-03-04 16:58:53.492 | DEBUG    | willspeak_server.api.server:save_audio_file:412 - Attempting to save with soundfile
2025-03-04 16:58:53.498 | INFO     | willspeak_server.api.server:save_audio_file:415 - Successfully saved with soundfile
2025-03-04 16:58:53.498 | DEBUG    | willspeak_server.api.server:process_audio_generic:633 - Removed temporary file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_eadfb694-6f5b-4051-aa46-bcbefc877907.wav
2025-03-04 16:59:25.041 | INFO     | willspeak_server.api.endpoints:verify_user_exists:349 - Verifying user existence: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:59:25.041 | DEBUG    | willspeak_server.api.endpoints:verify_user_exists:350 - Checking path: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\users\8fa1972c-a8f1-47e7-a8f6-bbbff06fa063\profile.json
2025-03-04 16:59:25.041 | INFO     | willspeak_server.api.endpoints:verify_user_exists:371 - User verified: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 (TESS)
2025-03-04 16:59:25.041 | INFO     | willspeak_server.api.server:process_audio_generic:514 - Processing audio file: audio.wav for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:59:25.042 | INFO     | willspeak_server.api.server:read_audio_file:304 - Reading audio file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_f45be094-56f2-4d9b-b3fb-75d255e09063.wav
2025-03-04 16:59:25.042 | DEBUG    | willspeak_server.api.server:read_audio_file:311 - Attempting to read with soundfile
2025-03-04 16:59:25.043 | INFO     | willspeak_server.api.server:read_audio_file:314 - Successfully read with soundfile: sr=16000, shape=(73728,), dtype=float64
2025-03-04 16:59:25.043 | INFO     | willspeak_server.api.server:process_audio_generic:566 - Audio file loaded: 73728 samples, 16000Hz
2025-03-04 16:59:25.043 | INFO     | willspeak_server.api.server:preprocess_audio:115 - Preprocessing audio: original sr=16000, target sr=16000
2025-03-04 16:59:25.043 | DEBUG    | willspeak_server.api.server:preprocess_audio:116 - Audio data shape: (73728,), dtype: float64
2025-03-04 16:59:25.043 | INFO     | willspeak_server.api.server:preprocess_audio:146 - Normalizing amplitude
2025-03-04 16:59:25.044 | INFO     | willspeak_server.api.server:preprocess_audio:156 - Removing silence
2025-03-04 16:59:25.047 | DEBUG    | willspeak_server.api.server:preprocess_audio:171 - After silence removal, audio length: 67456
2025-03-04 16:59:25.047 | INFO     | willspeak_server.api.server:preprocess_audio:182 - Preprocessing complete
2025-03-04 16:59:25.047 | INFO     | willspeak_server.api.server:extract_features:199 - Extracting features: n_mfcc=13, n_fft=2048
2025-03-04 16:59:25.061 | INFO     | willspeak_server.api.server:extract_features:230 - Feature extraction complete
2025-03-04 16:59:26.137 | INFO     | willspeak_server.api.server:transcribe_audio:281 - Transcription: Monday Monday
2025-03-04 16:59:26.137 | INFO     | willspeak_server.ml.model_integration:get_model:51 - Creating new model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:59:26.137 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:59:26.138 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:368 - No pre-trained model found
2025-03-04 16:59:26.138 | WARNING  | willspeak_server.ml.model_integration:get_model:58 - No user-specific model found for 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063, attempting to load base model
2025-03-04 16:59:26.138 | INFO     | willspeak_server.ml.model_integration:enhance_audio:123 - Enhancing audio with model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 16:59:26.302 | ERROR    | willspeak_server.api.server:enhance_speech:254 - Speech enhancement failed: 'SpeechEnhancementModel' object has no attribute 'postprocess_spectrogram'
2025-03-04 16:59:26.303 | WARNING  | willspeak_server.api.server:enhance_speech:256 - Returning original audio due to enhancement failure
2025-03-04 16:59:26.303 | INFO     | willspeak_server.api.server:save_audio_file:402 - Saving audio to: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\processed_d19be9a2-8b63-4e54-adc0-fa78d91d5020.wav
2025-03-04 16:59:26.303 | DEBUG    | willspeak_server.api.server:save_audio_file:412 - Attempting to save with soundfile
2025-03-04 16:59:26.307 | INFO     | willspeak_server.api.server:save_audio_file:415 - Successfully saved with soundfile
2025-03-04 16:59:26.307 | DEBUG    | willspeak_server.api.server:process_audio_generic:633 - Removed temporary file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_f45be094-56f2-4d9b-b3fb-75d255e09063.wav
2025-03-04 17:00:38.061 | INFO     | willspeak_server.api.server:shutdown_event:853 - Cleanup completed on shutdown
2025-03-04 17:00:45.367 | INFO     | willspeak_server.api.server:<module>:797 - Included training data router from training_data_endpoints.py
2025-03-04 17:00:45.380 | INFO     | willspeak_server.api.server:<module>:803 - Included router from endpoints.py
2025-03-04 17:00:45.380 | INFO     | willspeak_server.api.server:<module>:808 - Route: / - {'GET'}
2025-03-04 17:00:45.380 | INFO     | willspeak_server.api.server:<module>:808 - Route: /process-audio - {'POST'}
2025-03-04 17:00:45.380 | INFO     | willspeak_server.api.server:<module>:808 - Route: /process-audio-for-user - {'POST'}
2025-03-04 17:00:45.380 | INFO     | willspeak_server.api.server:<module>:808 - Route: /debug/audio-test - {'GET'}
2025-03-04 17:00:45.380 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/create-pair - {'POST'}
2025-03-04 17:00:45.380 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/upload-clear-template - {'POST'}
2025-03-04 17:00:45.380 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/templates - {'GET'}
2025-03-04 17:00:45.380 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/templates/{template_id} - {'GET'}
2025-03-04 17:00:45.380 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/templates/{template_id}/audio - {'GET'}
2025-03-04 17:00:45.380 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/user-pairs/{user_id} - {'GET'}
2025-03-04 17:00:45.381 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/use-template - {'POST'}
2025-03-04 17:00:45.381 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/train-from-pairs - {'POST'}
2025-03-04 17:00:45.381 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/training-jobs/{user_id} - {'GET'}
2025-03-04 17:00:45.381 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training-data/training-jobs/{job_id}/status - {'GET'}
2025-03-04 17:00:45.381 | INFO     | willspeak_server.api.server:<module>:808 - Route: /debug/paths - {'GET'}
2025-03-04 17:00:45.381 | INFO     | willspeak_server.api.server:<module>:808 - Route: /user/create - {'POST'}
2025-03-04 17:00:45.381 | INFO     | willspeak_server.api.server:<module>:808 - Route: /user/list - {'GET'}
2025-03-04 17:00:45.381 | INFO     | willspeak_server.api.server:<module>:808 - Route: /user/{user_id} - {'GET'}
2025-03-04 17:00:45.381 | INFO     | willspeak_server.api.server:<module>:808 - Route: /user/{user_id}/update - {'POST'}
2025-03-04 17:00:45.381 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training/start - {'POST'}
2025-03-04 17:00:45.381 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training/{session_id}/upload - {'POST'}
2025-03-04 17:00:45.381 | INFO     | willspeak_server.api.server:<module>:808 - Route: /training/{session_id}/complete - {'POST'}
2025-03-04 17:00:45.435 | INFO     | willspeak_server.ml.model_integration:initialize_models:75 - Initializing speech enhancement models
2025-03-04 17:00:45.435 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: default
2025-03-04 17:00:45.435 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:368 - No pre-trained model found
2025-03-04 17:00:45.435 | WARNING  | willspeak_server.ml.model_integration:initialize_models:82 - No pre-trained model found. Building new model.
2025-03-04 17:00:45.435 | INFO     | willspeak_server.ml.speech_enhancement_model:build_model:87 - Building improved model with input shape: (128, 128, 1)
2025-03-04 17:00:46.605 | INFO     | keras.src.utils.summary_utils:print_summary:389 - Model: "functional"

 Layer (type)         Output Shape          Param #  Connected to      

 input_spectrogram    (None, 128, 128,            0  -                 
 (InputLayer)         1)                                               

 conv2d (Conv2D)      (None, 128, 128,          320  input_spectrogra 
                      32)                                              

 batch_normalization  (None, 128, 128,          128  conv2d[0][0]      
 (BatchNormalizatio  32)                                              

 conv2d_1 (Conv2D)    (None, 128, 128,        9,248  batch_normalizat 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_1[0][0]    
 (BatchNormalizatio  32)                                              

 max_pooling2d        (None, 64, 64,              0  batch_normalizat 
 (MaxPooling2D)       32)                                              

 conv2d_2 (Conv2D)    (None, 64, 64,         18,496  max_pooling2d[0] 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_2[0][0]    
 (BatchNormalizatio  64)                                              

 conv2d_3 (Conv2D)    (None, 64, 64,         36,928  batch_normalizat 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_3[0][0]    
 (BatchNormalizatio  64)                                              

 global_average_poo  (None, 64)                  0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape (Reshape)    (None, 1, 1, 64)            0  global_average_p 

 conv2d_4 (Conv2D)    (None, 1, 1, 8)           520  reshape[0][0]     

 lambda (Lambda)      (None, 64, 64, 1)           0  batch_normalizat 

 lambda_1 (Lambda)    (None, 64, 64, 1)           0  batch_normalizat 

 conv2d_5 (Conv2D)    (None, 1, 1, 64)          576  conv2d_4[0][0]    

 concatenate          (None, 64, 64, 2)           0  lambda[0][0],     
 (Concatenate)                                       lambda_1[0][0]    

 multiply (Multiply)  (None, 64, 64,              0  batch_normalizat 
                      64)                            conv2d_5[0][0]    

 conv2d_6 (Conv2D)    (None, 64, 64, 1)          99  concatenate[0][0] 

 multiply_1           (None, 64, 64,              0  multiply[0][0],   
 (Multiply)           64)                            conv2d_6[0][0]    

 add (Add)            (None, 64, 64,              0  batch_normalizat 
                      64)                            multiply_1[0][0]  

 max_pooling2d_1      (None, 32, 32,              0  add[0][0]         
 (MaxPooling2D)       64)                                              

 conv2d_7 (Conv2D)    (None, 32, 32,         73,856  max_pooling2d_1[ 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_7[0][0]    
 (BatchNormalizatio  128)                                             

 conv2d_8 (Conv2D)    (None, 32, 32,        147,584  batch_normalizat 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_8[0][0]    
 (BatchNormalizatio  128)                                             

 global_average_poo  (None, 128)                 0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape_1 (Reshape)  (None, 1, 1, 128)           0  global_average_p 

 conv2d_9 (Conv2D)    (None, 1, 1, 16)        2,064  reshape_1[0][0]   

 lambda_2 (Lambda)    (None, 32, 32, 1)           0  batch_normalizat 

 lambda_3 (Lambda)    (None, 32, 32, 1)           0  batch_normalizat 

 conv2d_10 (Conv2D)   (None, 1, 1, 128)       2,176  conv2d_9[0][0]    

 concatenate_1        (None, 32, 32, 2)           0  lambda_2[0][0],   
 (Concatenate)                                       lambda_3[0][0]    

 multiply_2           (None, 32, 32,              0  batch_normalizat 
 (Multiply)           128)                           conv2d_10[0][0]   

 conv2d_11 (Conv2D)   (None, 32, 32, 1)          99  concatenate_1[0] 

 multiply_3           (None, 32, 32,              0  multiply_2[0][0], 
 (Multiply)           128)                           conv2d_11[0][0]   

 add_1 (Add)          (None, 32, 32,              0  batch_normalizat 
                      128)                           multiply_3[0][0]  

 max_pooling2d_2      (None, 16, 16,              0  add_1[0][0]       
 (MaxPooling2D)       128)                                             

 conv2d_12 (Conv2D)   (None, 16, 16,        295,168  max_pooling2d_2[ 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_12[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_13 (Conv2D)   (None, 16, 16,        590,080  batch_normalizat 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_13[0][0]   
 (BatchNormalizatio  256)                                             

 global_average_poo  (None, 256)                 0  batch_normalizat 
 (GlobalAveragePool                                                   

 reshape_2 (Reshape)  (None, 1, 1, 256)           0  global_average_p 

 conv2d_14 (Conv2D)   (None, 1, 1, 32)        8,224  reshape_2[0][0]   

 lambda_4 (Lambda)    (None, 16, 16, 1)           0  batch_normalizat 

 lambda_5 (Lambda)    (None, 16, 16, 1)           0  batch_normalizat 

 conv2d_15 (Conv2D)   (None, 1, 1, 256)       8,448  conv2d_14[0][0]   

 concatenate_2        (None, 16, 16, 2)           0  lambda_4[0][0],   
 (Concatenate)                                       lambda_5[0][0]    

 multiply_4           (None, 16, 16,              0  batch_normalizat 
 (Multiply)           256)                           conv2d_15[0][0]   

 conv2d_16 (Conv2D)   (None, 16, 16, 1)          99  concatenate_2[0] 

 multiply_5           (None, 16, 16,              0  multiply_4[0][0], 
 (Multiply)           256)                           conv2d_16[0][0]   

 add_2 (Add)          (None, 16, 16,              0  batch_normalizat 
                      256)                           multiply_5[0][0]  

 max_pooling2d_3      (None, 8, 8, 256)           0  add_2[0][0]       
 (MaxPooling2D)                                                        

 conv2d_17 (Conv2D)   (None, 8, 8, 512)   1,180,160  max_pooling2d_3[ 

 batch_normalizatio  (None, 8, 8, 512)       2,048  conv2d_17[0][0]   
 (BatchNormalizatio                                                   

 dropout (Dropout)    (None, 8, 8, 512)           0  batch_normalizat 

 conv2d_18 (Conv2D)   (None, 8, 8, 512)   2,359,808  dropout[0][0]     

 batch_normalizatio  (None, 8, 8, 512)       2,048  conv2d_18[0][0]   
 (BatchNormalizatio                                                   

 conv2d_transpose     (None, 16, 16,        524,544  batch_normalizat 
 (Conv2DTranspose)    256)                                             

 concatenate_3        (None, 16, 16,              0  conv2d_transpose 
 (Concatenate)        512)                           add_2[0][0]       

 conv2d_19 (Conv2D)   (None, 16, 16,      1,179,904  concatenate_3[0] 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_19[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_20 (Conv2D)   (None, 16, 16,        590,080  batch_normalizat 
                      256)                                             

 batch_normalizatio  (None, 16, 16,          1,024  conv2d_20[0][0]   
 (BatchNormalizatio  256)                                             

 conv2d_transpose_1   (None, 32, 32,        131,200  batch_normalizat 
 (Conv2DTranspose)    128)                                             

 concatenate_4        (None, 32, 32,              0  conv2d_transpose 
 (Concatenate)        256)                           add_1[0][0]       

 conv2d_21 (Conv2D)   (None, 32, 32,        295,040  concatenate_4[0] 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_21[0][0]   
 (BatchNormalizatio  128)                                             

 conv2d_22 (Conv2D)   (None, 32, 32,        147,584  batch_normalizat 
                      128)                                             

 batch_normalizatio  (None, 32, 32,            512  conv2d_22[0][0]   
 (BatchNormalizatio  128)                                             

 conv2d_transpose_2   (None, 64, 64,         32,832  batch_normalizat 
 (Conv2DTranspose)    64)                                              

 concatenate_5        (None, 64, 64,              0  conv2d_transpose 
 (Concatenate)        128)                           add[0][0]         

 conv2d_23 (Conv2D)   (None, 64, 64,         73,792  concatenate_5[0] 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_23[0][0]   
 (BatchNormalizatio  64)                                              

 conv2d_24 (Conv2D)   (None, 64, 64,         36,928  batch_normalizat 
                      64)                                              

 batch_normalizatio  (None, 64, 64,            256  conv2d_24[0][0]   
 (BatchNormalizatio  64)                                              

 conv2d_transpose_3   (None, 128, 128,        8,224  batch_normalizat 
 (Conv2DTranspose)    32)                                              

 concatenate_6        (None, 128, 128,            0  conv2d_transpose 
 (Concatenate)        64)                            batch_normalizat 

 conv2d_25 (Conv2D)   (None, 128, 128,       18,464  concatenate_6[0] 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_25[0][0]   
 (BatchNormalizatio  32)                                              

 conv2d_26 (Conv2D)   (None, 128, 128,        9,248  batch_normalizat 
                      32)                                              

 batch_normalizatio  (None, 128, 128,          128  conv2d_26[0][0]   
 (BatchNormalizatio  32)                                              

 enhanced_spectrogr  (None, 128, 128,           33  batch_normalizat 
 (Conv2D)             1)                                               

 Total params: 7,793,602 (29.73 MB)
 Trainable params: 7,787,714 (29.71 MB)
 Non-trainable params: 5,888 (23.00 KB)

2025-03-04 17:00:46.606 | INFO     | willspeak_server.ml.model_integration:initialize_models:84 - Base model built successfully
2025-03-04 17:00:46.607 | INFO     | willspeak_server.ml.model_integration:initialize_models:92 - Found 1 user-specific models: ['user_default_model.keras']
2025-03-04 17:00:46.607 | INFO     | willspeak_server.ml.model_integration:initialize_models:94 - Speech enhancement models initialized
2025-03-04 17:00:46.607 | INFO     | willspeak_server.api.server:startup_event:837 - Models initialized on startup
2025-03-04 17:00:51.806 | INFO     | willspeak_server.api.training_data_endpoints:verify_user_exists:621 - Verifying user existence: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 17:00:51.807 | DEBUG    | willspeak_server.api.training_data_endpoints:verify_user_exists:622 - Checking path: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\users\8fa1972c-a8f1-47e7-a8f6-bbbff06fa063\profile.json
2025-03-04 17:00:51.807 | INFO     | willspeak_server.api.training_data_endpoints:verify_user_exists:643 - User verified: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 (TESS)
2025-03-04 17:00:58.742 | INFO     | willspeak_server.api.endpoints:verify_user_exists:349 - Verifying user existence: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 17:00:58.742 | DEBUG    | willspeak_server.api.endpoints:verify_user_exists:350 - Checking path: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\users\8fa1972c-a8f1-47e7-a8f6-bbbff06fa063\profile.json
2025-03-04 17:00:58.742 | INFO     | willspeak_server.api.endpoints:verify_user_exists:371 - User verified: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063 (TESS)
2025-03-04 17:00:58.742 | INFO     | willspeak_server.api.server:process_audio_generic:514 - Processing audio file: audio.wav for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 17:00:58.743 | INFO     | willspeak_server.api.server:read_audio_file:304 - Reading audio file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_eb4e8e30-d570-4818-8b0e-6b81fa30b0fc.wav
2025-03-04 17:00:58.743 | DEBUG    | willspeak_server.api.server:read_audio_file:311 - Attempting to read with soundfile
2025-03-04 17:00:58.743 | INFO     | willspeak_server.api.server:read_audio_file:314 - Successfully read with soundfile: sr=16000, shape=(40960,), dtype=float64
2025-03-04 17:00:58.744 | INFO     | willspeak_server.api.server:process_audio_generic:566 - Audio file loaded: 40960 samples, 16000Hz
2025-03-04 17:00:58.744 | INFO     | willspeak_server.api.server:preprocess_audio:115 - Preprocessing audio: original sr=16000, target sr=16000
2025-03-04 17:00:58.744 | DEBUG    | willspeak_server.api.server:preprocess_audio:116 - Audio data shape: (40960,), dtype: float64
2025-03-04 17:00:58.744 | INFO     | willspeak_server.api.server:preprocess_audio:146 - Normalizing amplitude
2025-03-04 17:01:00.523 | INFO     | willspeak_server.api.server:preprocess_audio:156 - Removing silence
2025-03-04 17:01:01.317 | DEBUG    | willspeak_server.api.server:preprocess_audio:171 - After silence removal, audio length: 38656
2025-03-04 17:01:01.317 | INFO     | willspeak_server.api.server:preprocess_audio:182 - Preprocessing complete
2025-03-04 17:01:01.317 | INFO     | willspeak_server.api.server:extract_features:199 - Extracting features: n_mfcc=13, n_fft=2048
2025-03-04 17:01:01.324 | INFO     | willspeak_server.api.server:extract_features:230 - Feature extraction complete
2025-03-04 17:01:02.107 | INFO     | willspeak_server.api.server:transcribe_audio:281 - Transcription: my name is John
2025-03-04 17:01:02.107 | INFO     | willspeak_server.ml.model_integration:get_model:51 - Creating new model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 17:01:02.107 | INFO     | willspeak_server.ml.speech_enhancement_model:__init__:66 - Initialized SpeechEnhancementModel for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 17:01:02.108 | WARNING  | willspeak_server.ml.speech_enhancement_model:load_model:368 - No pre-trained model found
2025-03-04 17:01:02.108 | WARNING  | willspeak_server.ml.model_integration:get_model:58 - No user-specific model found for 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063, attempting to load base model
2025-03-04 17:01:02.108 | INFO     | willspeak_server.ml.model_integration:enhance_audio:123 - Enhancing audio with model for user: 8fa1972c-a8f1-47e7-a8f6-bbbff06fa063
2025-03-04 17:01:02.890 | INFO     | willspeak_server.ml.speech_enhancement_model:postprocess_spectrogram:437 - Postprocessing enhanced spectrogram to audio
2025-03-04 17:01:02.897 | INFO     | willspeak_server.ml.speech_enhancement_model:postprocess_spectrogram:468 - Postprocessing complete: Generated 38656 samples
2025-03-04 17:01:02.897 | INFO     | willspeak_server.ml.model_integration:enhance_audio:131 - Enhancement completed: confidence=0.21, ratio=0.86, time=789.79ms
2025-03-04 17:01:02.897 | INFO     | willspeak_server.api.server:save_audio_file:402 - Saving audio to: C:\Users\jaxon\Documents\WillSpeak\src\main\python\data\processed_8d67b167-9116-4da2-a658-b2f06e65a787.wav
2025-03-04 17:01:02.898 | DEBUG    | willspeak_server.api.server:save_audio_file:412 - Attempting to save with soundfile
2025-03-04 17:01:02.901 | INFO     | willspeak_server.api.server:save_audio_file:415 - Successfully saved with soundfile
2025-03-04 17:01:02.901 | DEBUG    | willspeak_server.api.server:process_audio_generic:633 - Removed temporary file: C:\Users\jaxon\AppData\Local\Temp\willspeak\willspeak_temp_eb4e8e30-d570-4818-8b0e-6b81fa30b0fc.wav
